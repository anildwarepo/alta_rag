<?xml version="1.0"?>
<!DOCTYPE book SYSTEM "c:\docbook\docbookx.dtd"[
	<!ENTITY CompanyName "Veritas">
	<!ENTITY CompanyNameLong "Veritas Technologies LLC">
	<!ENTITY DatabaseAgent "NetBackup for DB2">
	<!ENTITY db "DB2">
	<!ENTITY nbuProductName "NetBackup">
	<!ENTITY nbuVersion "10.5">
	<!ENTITY log "bpdb2">
	<!ENTITY logfile "db2_stdout">
	<!ENTITY logfile-err "db2_stderr">
	<!ENTITY policy "DB2">
	<!ENTITY ProductName "NetBackup">
	<!ENTITY utility "DB2 commands">
	<!ENTITY Version "10.5">
	<!ENTITY lang "EN_US">
	<!--<!ENTITY % entitydeclarations SYSTEM "entitydeclarations.ent" >-->
]><?VasontExtractInfo entity_id="16222484" version_id="12654"?>
<book id="NBU_DB2">
	<title id="v16223507">&ProductName;&#8482; for DB2 Administrator&apos;s Guide</title>
	<subtitle id="v16223510">UNIX, Windows, and Linux</subtitle>
	<bookinfo id="v16225980">
		<edition id="v166024750" condition="db2_uma">db2_uma;db2;dbagent;print;uma</edition>
		<keywordset condition="db2_uma" role="rosetta">
			<keyword id="v166024757" role="document.type">Product Guides</keyword>
			<keyword id="v166024758" role="theme.title">Veritas</keyword>
			<keyword id="pid-195" role="product">NetBackup &#38; Alta Data Protection</keyword>
			<keyword id="p1-195" role="p1.product">NetBackup &#38; Alta Data Protection</keyword>
			<keyword id="vid-1201931" role="product.version">NetBackup &#38; Alta Data Protection 10.5</keyword>
			<keyword id="p2-220" role="p2.feature">Enterprise Server</keyword>
		</keywordset>
		<releaseinfo>Release &nbuVersion;</releaseinfo>
	</bookinfo>
	<preface id="frontmatter_standard" role="frontmatter">
		<title id="v262663">NetBackup&#8482; for DB2 Administrator&apos;s Guide</title>
		<section id="v129831118" revision="02062023135547" role="copyright">
			<title id="v2454683">
				<remark>blank</remark>
			</title>
			<para id="v2454684">
				<remark>Per Karin Gallagher, and Anna Brannan in Legal, this para is not necessary. If you want to use it, remove the remark tags. - M5L 8 Oct 2013</remark>
			</para>
			<para id="v118239636">Last updated: <?dbtimestamp format="Y-m-d"?>
			</para>
			<para id="v2454686"/>
		</section>
		<section id="v129831124" revision="02062023150906" role="copyright">
			<title id="v262665" role="copyright">Legal Notice<remark>Contains ProductName entity; use this section if your entities are not yet updated</remark>
			</title>
			<para id="v130376739">Copyright &#xA9; <?dbtimestamp format="Y"?> &CompanyName; Technologies LLC. All rights reserved.</para>
			<para id="v130376740">&CompanyName;, the &CompanyName; Logo, &CompanyName; Alta, and &ProductName;<remark>[NOTE: Insert all other &CompanyName; trademarks, service marks, slogans, logos, etc. referred to or displayed in the document that appear on the &CompanyName; Trademark List]</remark> are trademarks or registered trademarks of &CompanyName; Technologies LLC or its affiliates in the U.S. and other countries. Other names may be trademarks of their respective owners.<remark>NOTE: DO NOT insert third party trademarks here. The third party trademarks should be in a standalone file.</remark>
			</para>
			<para id="v130376741">
				<remark>Third-party Legal Notices - NOTE: This paragraph should be included if there is a standalone file with the third-party attributions posted on https://www.veritas.com/about/legal/license-agreements#3rd-party. This paragraph should be removed if there is not a third-party attributions document.</remark>This product may contain third-party software for which &CompanyName; is required to provide attribution to the third party (&quot;Third-party Programs&quot;). Some of the Third-party Programs are available under open source or free software licenses. The License Agreement accompanying the Software does not alter any rights or obligations you may have under those open source or free software licenses. Refer to the Third-party Legal Notices document accompanying this &CompanyName; product or available at:<remark>Wording per Jennifer Fryhling_ljv</remark>
			</para>
			<para id="v130376742">
				<ulink url="https://www.veritas.com/about/legal/license-agreements">https://www.veritas.com/about/legal/license-agreements</ulink>
			</para>
			<para id="v130376743">The product described in this document is distributed under licenses restricting its use, copying, distribution, and decompilation/reverse engineering. No part of this document may be reproduced in any form by any means without prior written authorization of &CompanyNameLong; and its licensors, if any.</para>
			<para id="v130376744">THE DOCUMENTATION IS PROVIDED "AS IS" AND ALL EXPRESS OR IMPLIED CONDITIONS, REPRESENTATIONS AND WARRANTIES, INCLUDING ANY IMPLIED WARRANTY OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT, ARE DISCLAIMED, EXCEPT TO THE EXTENT THAT SUCH DISCLAIMERS ARE HELD TO BE LEGALLY INVALID. &CompanyNameLong; SHALL NOT BE LIABLE FOR INCIDENTAL OR CONSEQUENTIAL DAMAGES IN CONNECTION WITH THE FURNISHING, PERFORMANCE, OR USE OF THIS DOCUMENTATION. THE INFORMATION CONTAINED IN THIS DOCUMENTATION IS SUBJECT TO CHANGE WITHOUT NOTICE.</para>
			<para id="v130376745">The Licensed Software and Documentation are deemed to be commercial computer software as defined in FAR 12.212 and subject to restricted rights as defined in FAR Section 52.227-19 "Commercial Computer Software - Restricted Rights" and DFARS 227.7202, et seq. "Commercial Computer Software and Commercial Computer Software Documentation," as applicable, and any successor regulations, whether delivered by &CompanyName; as on premises or hosted services. Any use, modification, reproduction release, performance, display or disclosure of the Licensed Software and Documentation by the U.S. Government shall be solely in accordance with the terms of this Agreement.</para>
			<para id="v137986514"><?dbfo-need height="1.5.in" ?>
				<remark>x_writer: I changed from 2.2in to 1.5in. Need to check guidelines._ljv </remark>&CompanyNameLong;<?line_break ?>2625 Augustine Drive<?line_break ?>Santa Clara, CA 95054</para>
			<para id="v130376747">
				<ulink url="http://www.veritas.com">http://www.veritas.com</ulink>
			</para>
		</section>
		<section id="v129831137" revision="04172020093328" role="copyright">
			<title id="v111036663">Technical Support</title>
			<para id="v111036664">Technical Support maintains support centers globally. All support services will be delivered in accordance with your support agreement and the then-current enterprise technical support policies. For information about our support offerings and how to contact Technical Support, visit our website:</para>
			<para id="v111036678">
				<ulink url="https://www.veritas.com/support">https://www.veritas.com/support</ulink>
			</para>
			<para id="v116202521">You can manage your &CompanyName; account information at the following URL: </para>
			<para id="v116202522">
				<ulink url="https://my.veritas.com">https://my.veritas.com</ulink>
			</para>
			<para id="v111036738">If you have questions regarding an existing support agreement, please email the support agreement administration team for your region as follows:</para>
			<informaltable id="v111036739">
				<tgroup cols="2" id="v111036740">
					<colspec colname="col1" colnum="1" colwidth="2in"/>
					<colspec colname="col2" colnum="2" colwidth="*"/>
					<tbody id="v12540000">
						<row id="v12540002">
							<entry colname="col1">
								<para id="v2667240">Worldwide (except Japan)</para>
							</entry>
							<entry colname="col2">
								<para>
									<ulink url="mailto:CustomerCare@veritas.com">CustomerCare@veritas.com</ulink>
								</para>
							</entry>
						</row>
						<row id="v12540001">
							<entry colname="col1">
								<para id="v2667238">Japan</para>
							</entry>
							<entry colname="col2">
								<para>
									<ulink url="mailto:CustomerCare_Japan@veritas.com">CustomerCare_Japan@veritas.com</ulink>
									<remark>DWAG aug 08 2015 per Juan Rico-Alarcon</remark>
								</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</section>
		<section id="v129831151" revision="02062023135547" role="copyright">
			<title id="v116202567">Documentation</title>
			<para id="v116202817">Make sure that you have the current version of the documentation. Each document displays the date of the last update on page 2. <remark>For IA: The document version appears on page 2 of each guide.</remark>The latest documentation is available on the &CompanyName; website:</para>
			<para id="v116202569">
				<ulink url="https://sort.veritas.com/documents">https://sort.veritas.com/documents</ulink>
				<remark>Replace this link with the link to your docs if not on SORT. - LJV Feb 2016</remark>
			</para>
		</section>
		<section id="v129831155" revision="02062023135547" role="copyright">
			<title id="v118154724">Documentation feedback</title>
			<para id="v116202570">Your feedback is important to us. Suggest improvements or report errors or omissions to the documentation. Include the document title, document version, chapter title, and section title of the text on which you are reporting. Send feedback to:</para>
			<para id="v116202571">
				<ulink url="mailto:NB.docs@veritas.com">NB.docs@veritas.com</ulink>
				<remark>Replace this link with your feedback alias. - LJV Feb 2016</remark>
			</para>
			<para id="v116202572">You can also see documentation information or ask a question on the &CompanyName; community site:</para>
			<para id="v116202818">
				<ulink url="http://www.veritas.com/community/">http://www.veritas.com/community/</ulink>
			</para>
		</section>
		<section id="v129831161" revision="02062023135547" role="copyright">
			<title id="v116444590">&CompanyName; Services and Operations Readiness Tools (SORT)<remark>Exclude if your product does not use SORT- LJV Feb 2016</remark>
			</title>
			<para id="v116444591">&CompanyName; Services and Operations Readiness Tools (SORT) is a website that provides information and tools to automate and simplify certain time-consuming administrative tasks. Depending on the product, SORT helps you prepare for installations and upgrades, identify risks in your datacenters, and improve operational efficiency. To see what services and tools SORT provides for your product, see the data sheet:</para>
			<para id="v118092118">
				<ulink url="https://sort.veritas.com/data/support/SORT_Data_Sheet.pdf">https://sort.veritas.com/data/support/SORT_Data_Sheet.pdf</ulink>
			</para>
		</section>
	</preface>
	<chapter id="v16233481">
		<title id="v16233482">Introduction to NetBackup for DB2</title>
		<section id="v14761159" revision="06272024113110" vendor="referenced">
			<title id="v14761164">Features of &DatabaseAgent;</title>
			<para id="v14761165">
				<xref xreflabel="&DatabaseAgent; features and descriptions" linkend="id-SF930152734" role="link"/> shows &DatabaseAgent;'s main features and introduces some terms that are used in this documentation.</para>
			<table tabstyle="complex" id="id-SF930152734">
				<title id="v14761168">&DatabaseAgent; features and descriptions</title>
				<tgroup cols="2" id="v14761169">
					<colspec colnum="1" colwidth="1.2in"/>
					<colspec colnum="2" colwidth="*"/>
					<thead id="v14761172">
						<row id="v14761173">
							<entry>
								<para>Feature</para>
							</entry>
							<entry>
								<para>Description</para>
							</entry>
						</row>
					</thead>
					<tbody id="v14761174">
						<row id="v14761175">
							<entry>
								<para>Media and device management</para>
							</entry>
							<entry>
								<para>All the devices supported by Media Manager are available to &DatabaseAgent;.</para>
							</entry>
						</row>
						<row id="v14761176">
							<entry>
								<para>Scheduling facilities</para>
							</entry>
							<entry>
								<para>&nbuProductName; scheduling facilities on the primary server can be used to schedule automatic and unattended &db; backups.</para>
								<para>This feature also lets you choose the times when these operations can occur. For example, to prevent interference with normal daytime operations, you can schedule your database backups to occur only at night.</para>
							</entry>
						</row>
						<row id="v14761177">
							<entry>
								<para>Multiplexed backups and restores</para>
							</entry>
							<entry>
								<para>&DatabaseAgent; lets you take advantage of &nbuProductName;'s multiplexing capabilities. Multiplexing directs multiple data streams to one backup device, thereby reducing the time necessary to complete the operation.</para>
							</entry>
						</row>
						<row id="v14761178">
							<entry>
								<para>Transparent &db; and regular file system backup and restore operations</para>
							</entry>
							<entry>
								<para>All backups and restores run simultaneously and transparently without any action from the &nbuProductName; administrator.</para>
								<para>The database administrator can run database backup and restore operations through &nbuProductName;. An administrator or any other authorized user can use &nbuProductName; to run database backups and restores.</para>
							</entry>
						</row>
						<row id="v14761179">
							<entry>
								<para>Sharing the same storage units that are used for other file backups</para>
							</entry>
							<entry>
								<para>It is possible to share the same devices and media that is used for other backups or to give &db; exclusive use of certain devices and media. &DatabaseAgent; can use Media Manager, disk, and Media Server Deduplication Pool (MSDP) storage units.</para>
							</entry>
						</row>
						<row id="v14761180">
							<entry>
								<para>Centralized and networked backup operations</para>
							</entry>
							<entry>
								<para>From the &nbuProductName; primary server, you can schedule database backups or start them manually for any client. The &db; databases can also reside on hosts that are different from the devices on which &nbuProductName; stores the backups.</para>
							</entry>
						</row>
						<row id="v14761181">
							<entry>
								<para>User interfaces</para>
							</entry>
							<entry>
								<itemizedlist>
									<title>&nbuProductName; provides the following user interfaces:</title>
									<listitem>
										<para>&nbuProductName; web UI</para>
									</listitem>
								</itemizedlist>
								<para condition="db2">A &nbuProductName; administrator can start backup or restore operations for &db; from the &nbuProductName; user interface on the primary server.</para>
								<para condition="db2">A database administrator can also use the IBM DB2 control center or command-line processor to start user-directed backup and restore operations.</para>
							</entry>
						</row>
						<row id="v14761183">
							<entry>
								<para>Parallel backup and restore operations</para>
							</entry>
							<entry>
								<para condition="db2;inx">&DatabaseAgent; supports the parallel backup and restore capabilities of &db;. For example, this permits the user to run more than one tape device at a time for a single &db; backup or restore. This usage can reduce the time necessary to complete the operation.</para>
							</entry>
						</row>
						<row id="v14761184">
							<entry>
								<para>Compression</para>
							</entry>
							<entry>
								<para>Compression increases backup performance over the network and reduces the size of the backup image that &nbuProductName; writes to the storage unit.</para>
							</entry>
						</row>
						<row condition="db2" id="v156213475">
							<entry>
								<para>Database delete requests accepted and processed</para>
							</entry>
							<entry>
								<para id="v141293976">Database delete requests are accepted and processed. When &nbuProductName; receives a delete image request, it searches the &nbuProductName; catalog. If the image is found and it is not on a legal hold, the image is removed from the &nbuProductName; catalog.</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
		</section>
		<section id="v15491710" revision="09232024100318" vendor="referenced">
			<title id="v15491711">&ProductName; for DB2 overview</title>
			<para id="v15491635">&ProductName; for DB2 integrates the database backup and recovery capabilities of DB2 with the backup and the recovery management capabilities of &ProductName;.</para>
			<para id="v15491712">The server that hosts the DB2 database must be a &ProductName; client.</para>
			<para id="v53729057">On Windows, &ProductName; for DB2 must be licensed on the server.</para>
			<para id="v15491713">On UNIX, &ProductName; for DB2 must be installed on the server.</para>
			<para id="v15491714">
				<xref xreflabel="NetBackup for DB2 components" linkend="id-SF0A0182553" role="link"/> shows the hardware components and software components for a &ProductName; for DB2 environment.</para>
			<figure float="0" pgwide="1" id="id-SF0A0182553">
				<title id="v15491717">NetBackup for DB2 components</title>
				<mediaobject id="v151841320">
					<imageobject id="v151841321">
						<imagedata fileref="db2system_v3_9_7_21.svg" id="v151841322"/>
					</imageobject>
				</mediaobject>
			</figure>
			<section id="v15491721" revision="09232024100415">
				<title id="v15491722">About the NetBackup for DB2 components</title>
				<para id="v53729058">
					<xref xreflabel="NetBackup for DB2 component descriptions" linkend="v53729060" role="link"/> describes the main &ProductName; components in a &ProductName; for DB2 environment.</para>
				<table tabstyle="complex" id="v53729060">
					<title id="v53729061">NetBackup for DB2 component descriptions</title>
					<tgroup cols="2" id="v53729062">
						<colspec colnum="1" colwidth="1.2in"/>
						<colspec colnum="2" colwidth="2*"/>
						<thead id="v53729065">
							<row id="v53729066">
								<entry>
									<para>Component</para>
								</entry>
								<entry>
									<para>Description</para>
								</entry>
							</row>
						</thead>
						<tbody id="v53729067">
							<row id="v53729068">
								<entry>
									<para>NBDB2 vendor I/O library</para>
								</entry>
								<entry>
									<para id="v15491726">The DB2 <command moreinfo="none">BACKUP</command> and <command moreinfo="none">RESTORE</command> commands use the NBDB2 vendor I/O library to send data buffers between a &db; database and NetBackup.</para>
									<para id="v15491746">You specify the library as the argument to the <command moreinfo="none">LOAD</command> parameter of the DB2 <command moreinfo="none">BACKUP</command> and <command moreinfo="none">RESTORE</command> commands.</para>
									<para id="v15491729">The installation program installs the vendor library in the following location:</para>
									<para>On Windows: <filename>
											<replaceable>install_path</replaceable>\NetBackup\bin\nbdb2.dll</filename>
									</para>
									<para>On UNIX: <filename>/usr/openv/netbackup/bin</filename>
									</para>
									<para id="v15491731">On UNIX, the name of the vendor library differs, depending on your platform as follows:</para>
									<itemizedlist>
										<listitem>
											<para>64-bit Solaris SPARC and 64-bit Linux x86: <command moreinfo="none">nbdb2.so64</command>
											</para>
										</listitem>
										<listitem>
											<para>64-bit AIX and HP-UX PARISC: <command moreinfo="none">nbdb2.sl64</command>
											</para>
										</listitem>
										<listitem>
											<para>64-bit Linux Itanium, HP Itanium, and IBM pSeries: <command moreinfo="none">nbdb2.so</command>
											</para>
										</listitem>
									</itemizedlist>
								</entry>
							</row>
							<row id="v53729069">
								<entry>
									<para>User exit program</para>
								</entry>
								<entry>
									<para id="v15491750">The NetBackup for DB2 user exit program, <command moreinfo="none">db2uext2</command>, provides one method for backing up and restoring the DB2 archive log files.</para>
									<itemizedlist id="v15491752">
										<title id="v15491753">Use this method at the following times:</title>
										<listitem id="v15491754">
											<para id="v15491755">When you use the DB2 <command moreinfo="none">BACKUP</command> command or <command moreinfo="none">ROLLFORWARD</command> command to back up or restore databases.</para>
										</listitem>
										<listitem id="v15491756">
											<para id="v15491757">When the user exits the database with the DB2 <command moreinfo="none">TERMINATE</command> or <command moreinfo="none">DISCONNECT</command> command.</para>
										</listitem>
										<listitem id="v15491758">
											<para id="v15491759">When the log file fills and DB2 starts writing transactions to another log file.</para>
										</listitem>
										<listitem id="v15491760">
											<para id="v15491761">The DB2 <command moreinfo="none">ARCHIVE LOG</command> command is issued.</para>
										</listitem>
									</itemizedlist>
									<para id="v15491762">The user exit program backs up and restores the archive logs as files. The file is called <command moreinfo="none">db2uext2.64</command>. NetBackup for DB2 supports this method for protecting the archive logs on all supported DB2 releases.</para>
									<para id="v15491763">The user exit program resides in the following location:</para>
									<para>On Windows: <command moreinfo="none">%DB2_INSTANCE%\bin\db2uext2.exe</command>
									</para>
									<para>On UNIX: <command moreinfo="none">$DB2_INSTANCE/sqllib/adm/db2uext2</command>.</para>
									<para id="v15491766">Other methods are available for backing up archive log files.</para>
									<para id="v15491767">
										<xref role="linkmoreinfo" xreflabel="About log archiving" linkend="id-SF0A0166207"/>
									</para>
								</entry>
							</row>
							<row id="v53729071">
								<entry>
									<para>Sample configuration file (db2.conf) and script files</para>
								</entry>
								<entry>
									<itemizedlist id="v15491774">
										<title id="v15491775">The installation software installs the following sample files:</title>
										<listitem id="v15491776">
											<para id="v15491777">A sample configuration file (<command moreinfo="none">db2.conf</command> file). The <command moreinfo="none">db2.conf</command> file includes specifications for backups and restores, and it provides information on policies and schedules. The NetBackup for DB2 library and user exit program use the information in this file.</para>
										</listitem>
										<listitem id="v15491779">
											<para id="v15491780">Sample backup and restore scripts. NetBackup can invoke a script to perform a scheduled backup or restore of a DB2 database. The scripts contain DB2 <command moreinfo="none">BACKUP</command> or <command moreinfo="none">RESTORE</command> commands for use with NetBackup.</para>
										</listitem>
									</itemizedlist>
									<para>The installation software writes these sample files to the following location:</para>
									<para>On Windows: <filename>
											<replaceable>install_path</replaceable>\NetBackup\dbext\db2\samples</filename>
									</para>
									<para>On UNIX: <filename>/usr/openv/netbackup/ext/db_ext/db2/scripts</filename>
										<command moreinfo="none"/>.</para>
									<para id="v15491786">To use the sample files, copy the sample files to working directories and modify them for your own use.</para>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>
			<section id="id-SF0A0156693" revision="09232024100455">
				<title id="v15492576">About NetBackup for DB2 terminology</title>
				<para id="v15492577">DB2 supports archiving its log file through a user exit program or through a vendor library. DB2 supports backing up the archive log files by using a vendor library in its 8.2 and later releases. NetBackup for DB2 supplies a user exit program and a library to support both of these methods.</para>
				<para id="v15492578">The DB2 syntax for specifying these archive log methods differs from release to release. NetBackup for DB2 topics use the terms &quot;user exit&quot; and &quot;VENDOR&quot; to differentiate the methods.</para>
				<para id="v15492579">
					<xref xreflabel="Use of user exit and VENDOR terminology" linkend="id-SF0A0138395" role="link"/> shows the DB2 syntax you can use to specify these methods within DB2. It indicates the term that the DB2 for NetBackup uses to describe each method.</para>
				<table tabstyle="complex" id="id-SF0A0138395">
					<title id="v15492582">Use of user exit and VENDOR terminology</title>
					<tgroup cols="2" id="v15492583">
						<colspec colnum="1" colwidth="*"/>
						<colspec colnum="2" colwidth="*"/>
						<thead id="v15492587">
							<row id="v15492588">
								<entry>
									<para> Setting used with &quot;user exit&quot;</para>
								</entry>
								<entry>
									<para> Setting used with &quot;VENDOR&quot;</para>
								</entry>
							</row>
						</thead>
						<tbody id="v15492589">
							<row id="v15492590">
								<entry>
									<programlisting format="linespecific">LOGARCHMETH1=LOGRETAIN
LOGARCHMETH1=USEREXIT
USEREXIT=ON
USEREXIT=YES
LOGRETAIN=ON
LOGRETAIN=RECOVERY</programlisting>
								</entry>
								<entry>
									<programlisting format="linespecific">LOGARCHMETH1=VENDOR<replaceable>library</replaceable>
									</programlisting>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
				<note id="v83444874">
					<para id="v83444875">Database configuration parameters USEREXIT and LOGRETAIN are not valid in DB2 Version 10.1 and later. Instead, LOGARCHMETH1 sets the user exit program settings.</para>
				</note>
				<para id="v15492592">When <command moreinfo="none">VENDOR</command> is used, archive logs are backed up by means of the NetBackup for DB2 vendor library. The full specification for this archive log method is as follows:</para>
				<para id="v53729485">On Windows: <command>LOGARCHMETH1=VENDOR:<replaceable>install_path</replaceable>\NetBackup\bin\nbdb2.dll</command>
				</para>
				<para id="v53729486">On UNIX: <command>LOGARCHMETH1=VENDOR:/usr/openv/netbackup/bin/<replaceable>library</replaceable>
					</command>
				</para>
				<para id="v15492595">For <replaceable>library</replaceable>, specify an operating system-specific library.</para>
				<para id="v15492596">
					<xref xreflabel="About the NetBackup for DB2 components" linkend="v15491721" role="linkmoreinfo"/>
				</para>
				<para id="v15492598">When a user exit program is used, archive logs are backed up by means of the NetBackup for DB2 user exit program. The DB2 syntax that defines the user exit program includes the <command moreinfo="none">USEREXIT</command>, <command moreinfo="none">LOGRETAIN</command>, and <command moreinfo="none">LOGARCHMETH1</command> keywords that are specified in a configuration parameter.</para>
			</section>
		</section>
	</chapter>
	<chapter id="v16227285">
		<title id="v16227286">Installing NetBackup for DB2</title>
		<section id="v14758586" revision="09232024100529" vendor="referenced">
			<title id="v14758591">Planning the installation of &DatabaseAgent; </title>
			<para id="v58346095">
				<xref xreflabel="Installation steps for &DatabaseAgent;" linkend="v164611775" role="link"/> shows the major installation steps that are needed to run &DatabaseAgent;. Each step contains one or more links to pertinent procedures and concepts.</para>
			<table pgwide="1" id="v164611775">
				<title id="v164611776">Installation steps for &DatabaseAgent;</title>
				<tgroup cols="3" id="v164611777">
					<colspec colname="col1" colnum="1" colwidth="0.75in"/>
					<colspec colname="col2" colnum="2" colwidth="*"/>
					<colspec colname="col3" colnum="3" colwidth="*"/>
					<thead id="v164611781">
						<row id="v164611782">
							<entry colname="col1">
								<para>Step</para>
							</entry>
							<entry colname="col2">
								<para>Action</para>
							</entry>
							<entry colname="col3">
								<para>Description</para>
							</entry>
						</row>
					</thead>
					<tbody id="v164611783">
						<row id="v164611784">
							<entry colname="col1">
								<para>Step 1</para>
							</entry>
							<entry colname="col2">
								<para>Verify the installation prerequisites. </para>
							</entry>
							<entry colname="col3">
								<para>
									<xref role="linkseeheading" xreflabel="Verifying the operating system and platform compatibility" linkend="v14758723"/>
								</para>
								<para>
									<ulink url="http://www.netbackup.com/compatibility">http://www.netbackup.com/compatibility</ulink>
								</para>
								<para>
									<xref role="linkseeheading" xreflabel="&nbuProductName; server and client requirements" linkend="v14758175"/>
								</para>
								<para>
									<xref role="linkseeheading" xreflabel="&db; server software requirements" linkend="v16146081"/>
								</para>
								<para>
									<xref role="linkseeheading" xreflabel=" " linkend="v16141620"/>
								</para>
							</entry>
						</row>
						<row id="v164611789">
							<entry colname="col1">
								<para>Step 2</para>
							</entry>
							<entry colname="col2">
								<para>Verify that the primary server has a valid license for &DatabaseAgent; and any &ProductName; options or add-ons.</para>
							</entry>
							<entry colname="col3">
								<para>
									<xref role="linkseeheading" xreflabel="License for &DatabaseAgent;" linkend="v16144611"/>
								</para>
							</entry>
						</row>
						<row id="v164611791">
							<entry colname="col1">
								<para>Step 3</para>
							</entry>
							<entry colname="col2">
								<para>Specify a log archive method.</para>
							</entry>
							<entry colname="col3">
								<para>
									<xref role="linkseeheading" xreflabel="About log archiving" linkend="id-SF0A0166207"/>
								</para>
							</entry>
						</row>
						<row id="v164611793">
							<entry colname="col1">
								<para>Step 4</para>
							</entry>
							<entry colname="col2">
								<para>(UNIX) specify the &db; home path.</para>
							</entry>
							<entry colname="col3">
								<para>
									<xref role="linkseeheading" linkend="v15493450"/>
								</para>
							</entry>
						</row>
						<row id="v164611795">
							<entry colname="col1">
								<para>Step 5</para>
							</entry>
							<entry colname="col2">
								<para>Add a new database instance.</para>
							</entry>
							<entry colname="col3">
								<para>
									<xref role="linkseeheading" xreflabel="About adding new DB2 instances" linkend="v15492295"/>
								</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
		</section>
		<section id="v14758723" revision="02122024092946" vendor="referenced">
			<title id="v14758728">Verifying the operating system and platform compatibility</title>
			<para id="v14758729">Verify that the &DatabaseAgent; agent is supported on your operating system or platform.</para>
			<procedure id="v14758730">
				<title id="v14758731">To verify operating system and compatibility</title>
				<step performance="required" id="v14758732">
					<para id="v14758733">Go to the &ProductName; compatibility list site.</para>
					<para id="v14758734">
						<ulink url="http://www.netbackup.com/compatibility">http://www.netbackup.com/compatibility</ulink>
					</para>
				</step>
				<step performance="required" id="v14758739">
					<para id="v14758740">Click on the following document:</para>
					<para id="v16954715">Application/Database Agent Compatibility List</para>
				</step>
				<step id="v17222480" condition="db2;exch;ora;sap;sql">
					<para id="v17222481">For information on support for Snapshot Client, see the Snapshot Client section in the following document:</para>
					<para id="v164610615">Hardware and Cloud Storage Compatibility List (HCL).</para>
				</step>
			</procedure>
			<section id="v14758175" revision="02092024110658">
				<title id="v14758180">&nbuProductName; server and client requirements</title>
				<para id="v157759906">Before you install &nbuProductName;, review the requirements for the &nbuProductName; server and the &nbuProductName; clients.</para>
				<bridgehead id="v157759907">&nbuProductName; server requirements</bridgehead>
				<note id="v56979656" condition="db2">
					<para id="v32977817">To use &DatabaseAgent; with Snapshot Client, you must have a license for &ProductName; Snapshot Client.</para>
				</note>
				<itemizedlist id="v66329343">
					<title id="v66329344">Verify that the following requirements are met for the &ProductName; server:<indexterm>
							<primary>installation</primary>
							<secondary>requirements for &ProductName; servers</secondary>
						</indexterm>
						<indexterm>
							<primary>backup media required</primary>
						</indexterm>
					</title>
					<listitem id="v66329345">
						<para id="v66329346">The &ProductName; server software is installed and operational on the &ProductName; server. </para>
						<para id="v66329347">See the <ulink url="http://www.veritas.com/docs/DOC5332">&ProductName; Installation Guide</ulink>.</para>
					</listitem>
					<listitem id="v66329348">
						<para id="v66329349">Make sure that you configure any backup media that the storage unit uses. The number of media volumes that are required depends on several things:</para>
						<itemizedlist id="v90163442">
							<listitem id="v90163443">
								<para id="v90163444">The devices that are used and storage capacity of the media.</para>
							</listitem>
							<listitem id="v90163445">
								<para id="v90163446">The sizes of the databases that you want to back up.</para>
							</listitem>
							<listitem id="v90163447">
								<para id="v90163448">The amount of data that you want to archive.</para>
							</listitem>
							<listitem id="v90163449">
								<para id="v90163450">The size of your backups.</para>
							</listitem>
							<listitem id="v90163451">
								<para id="v90163452">The frequency of backups or archives.</para>
							</listitem>
							<listitem id="v90163491">
								<para id="v90163492">The length of retention of the backup images.</para>
							</listitem>
						</itemizedlist>
						<para id="v66329362">See the <ulink url="http://www.veritas.com/docs/DOC5332">&ProductName; Administrator's Guide, Volume I</ulink>.</para>
					</listitem>
				</itemizedlist>
				<para id="v66329363"> &nbsp;</para>
				<bridgehead id="v157759908">&nbuProductName; client requirements</bridgehead>
				<itemizedlist id="v16144582">
					<title id="v16144585">Verify that the following requirements are met for the &ProductName; clients:</title>
					<listitem id="v16144592" condition="db2;inx;lot;sap;sql;syb">
						<para id="v16144593">The &ProductName; client software is installed on the computer that has the databases you want to back up. </para>
						<para id="v127757624">If the database is clustered, you must use the same version of &ProductName; on each node in the cluster.</para>
					</listitem>
					<listitem id="v19827315">
						<para id="v19827316">To use the new features that are included in &DatabaseAgent; in &nbuProductName; &nbuVersion;, you must upgrade your &DatabaseAgent; clients to &nbuProductName; &nbuVersion;. The &nbuProductName; media server must use the same version as the &DatabaseAgent; client or a higher version than the client. </para>
					</listitem>
				</itemizedlist>
			</section>
			<section id="v16146081" revision="02092024110913">
				<title id="v16146315">
					<phrase condition="db2;inx;lot;ora;sap;syb">&db; server software requirements</phrase>
				</title>
				<itemizedlist id="v16146316">
					<title id="v16146317">Verify the following regarding the &db; server software on the &ProductName; server or client: </title>
					<listitem id="v16146318">
						<para id="v16146319">The &db; server software must be installed and operational. </para>
					</listitem>
					<listitem id="v16146320" condition="db2;inx;ora;sap_win;sap_ux;syb">
						<para id="v16146321">One or more &db; instances must exist. </para>
						<note id="v16146322" condition="db2">
							<para id="v16146323">In a DB2 EEE environment, install the &ProductName; client software on every node and client that DB2 uses. </para>
						</note>
					</listitem>
				</itemizedlist>
				<para id="v39453231" condition="dbagent;shpt">
					<xref xreflabel="&nbuProductName; server and client requirements" linkend="v14758175" role="linkmoreinfo"/>
				</para>
			</section>
			<section id="v16141620" revision="02292024141255">
				<title id="v14758244">
					<phrase condition="ora;db2;syb;sql;sqladmin">Requirements for using &DatabaseAgent; in a &nbuProductName; cluster</phrase>
				</title>
				<itemizedlist id="v14758246">
					<title id="v14758247">If you plan to use &DatabaseAgent; on a &ProductName; server configured in a &ProductName; cluster, verify the following requirements:</title>
					<listitem id="v17222144">
						<para id="v17222145">&ProductName; supports your cluster environment.</para>
						<para id="v16005851">See the <ulink url="http://www.netbackup.com/compatibility">Software Compatibility List (SCL)</ulink>. </para>
					</listitem>
					<listitem id="v14758250">
						<para id="v14758251">The &ProductName; server software is installed and configured to work in a &ProductName; cluster.</para>
						<para id="v14758252">See the <ulink url="http://www.veritas.com/docs/DOC5332">&ProductName; Installation Guide</ulink>.</para>
						<para id="v16197397">See the <ulink url="http://www.veritas.com/docs/DOC5332">&ProductName; Clustered Primary Server Administrator&apos;s Guide</ulink>.</para>
					</listitem>
					<listitem id="v14758248">
						<para id="v14758249">The &ProductName; client software is installed and operational on each node to which &ProductName; can failover.</para>
					</listitem>
					<listitem id="v16197398">
						<para id="v14758253">A valid license for &DatabaseAgent; must exist on each node where &ProductName; server resides.</para>
					</listitem>
				</itemizedlist>
			</section>
		</section>
		<section id="v16144611" revision="02092024111031" vendor="referenced">
			<title id="v14759456">License for &DatabaseAgent;</title>
			<para id="v14759457">The &DatabaseAgent; agent is installed with the &ProductName; client software. No separate installation is required. A valid license for the agent must exist on the primary server. </para>
			<para id="v80768450">More information is available on how to add licenses.</para>
			<para id="v27791450">See the <ulink url="http://www.veritas.com/docs/DOC5332">&ProductName; Administrator's Guide, Volume I</ulink>.</para>
			<para id="v14759459" condition="db2;ent_vault_print;exch;ora;sap_ux;sap_win;sql;syb">For a &ProductName; cluster, a valid license for &DatabaseAgent; must exist on each node where &ProductName; server resides.</para>
		</section>
		<section id="id-SF0A0166207" revision="09232024100606" vendor="referenced">
			<title id="v15492075">About log archiving</title>
			<para id="v15492132">DB2 can write database archive logs by using several different methods. For a roll-forward recovery, you need both the database itself and the archive logs from the backup media. The DB2 parameters that specify an archive log method include the <command moreinfo="none">LOGRETAIN</command>, <command moreinfo="none">USEREXIT</command>, and <command moreinfo="none">LOGARCHMETH1</command> keywords. </para>
			<para id="v15492076"> The following topics describe the archive methods and how to specify an archive method in DB2.</para>
			<para id="v16998265">
				<xref xreflabel="Using the VENDOR archive method" linkend="v15492084" role="linkseeheading"/>
			</para>
			<para id="v16998267">
				<xref xreflabel="Using the user exit archive method" linkend="v15492099" role="linkseeheading"/>
			</para>
			<para id="v15492078">The terms &quot;VENDOR&quot; and &quot;user exit&quot; describe the methods that DB2 supports for log archiving. Ensure that you understand how the terms are used in this manual.</para>
			<para id="v15492079">
				<xref xreflabel="About NetBackup for DB2 terminology" linkend="id-SF0A0156693" role="linkseeheading"/>
			</para>
			<section id="v15492084" revision="09232024100638">
				<title id="v15492085">Using the VENDOR archive method</title>
				<para id="v127634258">Starting with the DB2 8.2 release, you can use the <command>VENDOR</command> log archive method.</para>
				<itemizedlist id="v15492092">
					<title id="v15492093">If you use this method, note the following:</title>
					<listitem id="v15492094">
						<para id="v151841323">The archive logs are backed up by a data stream and use a schedule type of <guimenuitem>Application Backup</guimenuitem>.</para>
					</listitem>
					<listitem id="v15492097">
						<para id="v15492098">&ProductName; for DB2 backs up and restores the archive log files as a byte stream. This method uses the DB2 backup API and the DB2 restore API.</para>
					</listitem>
				</itemizedlist>
				<procedure id="v16999839">
					<title id="v16999840">To use the VENDOR archive method</title>
					<step performance="required" id="v16999841">
						<para id="v16999842">Quiesce the DB2 database.</para>
						<para id="v16999843">Perform this procedure and the configuration procedures at a time when minimal changes are made to the DB2 database.</para>
					</step>
					<step performance="required" id="v16999844">
						<para id="v16999845">Specify the archive method. The syntax is as follows:</para>
						<para id="v16998842">On Windows: <command>LOGARCHMETH1=VENDOR:<replaceable>install_path</replaceable>\NetBackup\bin\nbdb2.dll</command>
						</para>
						<para id="v16998843">On UNIX: <command>LOGARCHMETH1=VENDOR:/usr/openv/netbackup/bin/<replaceable>library</replaceable>
							</command>
						</para>
						<para id="v15492089">For the library name, refer to the following topic.</para>
						<para id="v15492090">
							<xref xreflabel="About the NetBackup for DB2 components" linkend="v15491721" role="linkseeheading"/>
						</para>
					</step>
					<step performance="required" id="v16999851">
						<para id="v16999852">Verify your DB2 configuration to ensure that the appropriate log archiving method for your site is enabled.</para>
						<para id="v16999853">If necessary, edit your DB2 configuration specifications to specify the log archiving method.</para>
					</step>
				</procedure>
			</section>
			<section id="v15492099" revision="09232024100804">
				<title id="v15492100">Using the user exit archive method</title>
				<para id="v15492101">&nbuProductName; for DB2 includes a user exit program that you can use to back up the archive logs. Any DB2 release lets you use this log archive method. The syntax for specifying the user exit method depends on the DB2 release.</para>
				<itemizedlist id="v15492103">
					<title id="v15492104">If your DB2 configuration uses the <command moreinfo="none">USEREXIT</command>, <command moreinfo="none">LOGRETAIN</command>, or <command moreinfo="none">LOGARCHMETH1</command> keyword in its configuration parameters, note the following:</title>
					<listitem id="v15492118">
						<para id="v15492119">&nbuProductName; for DB2 backs up and restores the archive log files as individual files.</para>
					</listitem>
					<listitem id="v15492120">
						<para id="v15492121">DB2 supports this archive method only for backward compatibility.</para>
					</listitem>
				</itemizedlist>
				<procedure id="v15492125">
					<title id="v15492126">To use the user exit archive method</title>
					<step performance="required" id="v15492127">
						<para id="v15492128">Quiesce the DB2 database.</para>
						<para id="v15492129">Perform this procedure and the configuration procedures at a time when minimal changes are made to the DB2 database.</para>
					</step>
					<step id="v16999859">
						<para id="v16999860">Specify the archive method.</para>
						<para id="v16999861">The method you use to specify these parameters and the syntax for these parameters depends on the DB2 version level. For more information on the effects of these parameters within DB2, or on the specific syntax for these parameters, see your DB2 documentation.</para>
					</step>
					<step performance="required" id="v15492130">
						<para id="v15492106">If your DB2 configuration uses the <command>USEREXIT</command>, <command>LOGRETAIN</command>, or <command moreinfo="none">LOGARCHMETH1</command> keyword in its configuration parameters, configure one of the following:</para>
						<itemizedlist id="v15492107">
							<listitem id="v15492108">
								<para id="v15492109">On Windows, a separate MS-Windows policy that includes the archive logs.</para>
							</listitem>
							<listitem id="v15492110">
								<para id="v15492111">On UNIX, a separate Standard policy that includes the archive logs.</para>
							</listitem>
							<listitem id="v15492112">
								<para id="v15492113">On UNIX, directories for the user exit program to use when it copies the archive logs. You may also want to create a separate Standard policy for backing up these directories.</para>
							</listitem>
							<listitem id="v15492114">
								<para id="v15492115">On Windows, directories for the user exit program to use when it copies the archive logs. You may also want to create a separate MS-Windows policy for backing up these directories.</para>
							</listitem>
							<listitem id="v16998860">
								<para id="v15492116">On UNIX, modify an existing Standard policy with a user backup schedule. Include the archive log directories..</para>
							</listitem>
							<listitem id="v16998862">
								<para id="v15492117">On Windows, modify an existing MS-Windows policy with a user backup schedule. Include the archive log directories.</para>
							</listitem>
						</itemizedlist>
					</step>
					<step performance="required" id="v15492136">
						<para id="v15492137">Verify your DB2 configuration to ensure that the appropriate log archiving method for your site is enabled.</para>
						<para id="v15492138">If necessary, edit your DB2 configuration specifications to specify the log archiving method.</para>
					</step>
				</procedure>
			</section>
		</section>
		<section id="v15493450" revision="02092024111341" vendor="referenced">
			<title id="v15493451">
				<phrase condition="db2">Specifying the &db; home path (UNIX)</phrase>
			</title>
			<para id="v15493452">After you install &ProductName; with a valid license for &DatabaseAgent;, run this script on the computer where the &db; vendor software is installed. With this script, &ProductName; can gather additional information about your &db; environment.</para>
			<itemizedlist id="v15492143" condition="db2">
				<title id="v15492144">Complete this procedure at the following times:</title>
				<listitem id="v15492145">
					<para id="v15492146">After you specify a log archiving method in DB2.</para>
				</listitem>
				<listitem id="v15492147">
					<para id="v15492148">If you licensed &DatabaseAgent; for the first time.</para>
				</listitem>
				<listitem id="v15492149">
					<para id="v15492150">After you create a new DB2 instance.</para>
				</listitem>
			</itemizedlist>
			<procedure id="v15493453">
				<title id="v15493454">To specify the &db; home path</title>
				<step performance="required" id="v15493455">
					<para id="v15493456">Change to the following directory: </para>
					<para id="v16876743">
						<command>/usr/openv/netbackup/bin</command>
					</para>
				</step>
				<step performance="required" id="v15493458">
					<para id="v15493459">Run the following script: </para>
					<para id="v17052775" condition="db2">
						<command>./db2_config</command>
					</para>
				</step>
				<step performance="required" id="v15493461" condition="db2;inx;syb">
					<para id="v15493462">Supply the home path for the database instance.</para>
					<para id="v15492165" condition="db2">For example:</para>
					<para id="v17052779" condition="db2">
						<command>/home/db2inst1</command>
					</para>
				</step>
				<step performance="required" id="v15502336" condition="db2;syb">
					<para id="v15502337">Add any other database instances, or enter <command moreinfo="none">n</command> if you are finished.</para>
				</step>
			</procedure>
		</section>
		<section id="v15492295" revision="02092024111819" vendor="referenced">
			<title id="v15492296">About adding new DB2 instances</title>
			<para id="v15492301">Adding new DB2 instances on a Windows system is different than adding new instances on a UNIX system.</para>
			<itemizedlist id="v53771810">
				<listitem id="v53771811">
					<para id="v53771812">On Windows, the &ProductName; for DB2 installation software writes the user exit program to the following location:</para>
					<programlisting format="linespecific" id="v15492302">
						<replaceable>install_path</replaceable>\NetBackup\dbext\DB2\db2uext2.exe</programlisting>
					<para id="v15492305">DB2 expects the <command moreinfo="none">db2uext2</command> executable to reside in the DB2 installation location.</para>
					<para id="v15492306">If you reinstall or move the DB2 installation, manually copy <command moreinfo="none">db2uext2.exe</command> from the &ProductName; location into the DB2 location.</para>
				</listitem>
				<listitem id="v53771816">
					<para id="v14705350">On UNIX, if you install a new DB2 instance after you install &ProductName;, you need to add this new instance to the &ProductName; configuration. This action ensures that all new DB2 instances are included in backup operations. </para>
					<para id="v15502341">
						<xref xreflabel="Specifying the DB2  home path (UNIX)" linkend="v15493450" role="linkseeheading"/>
					</para>
				</listitem>
			</itemizedlist>
		</section>
	</chapter>
	<chapter id="v16588248">
		<title id="v16588324">Configuring NetBackup for DB2</title>
		<section id="v15491588" revision="09232024103157" vendor="referenced">
			<title id="v15491589">Overview of &nbuProductName; for DB2 configuration</title>
			<para id="v15491590">Before you configure &nbuProductName; for DB2, complete the installation procedure.</para>
			<para id="v15491591">
				<xref xreflabel="Planning the installation of &DatabaseAgent; " linkend="v14758586" role="linkmoreinfo"/>
			</para>
			<para id="v58229266">
				<xref xreflabel="Configuration tasks for DB2" linkend="v58229268" role="link"/> shows the three major parts of &nbuProductName; for DB2 configuration.</para>
			<table pgwide="1" id="v58229268">
				<title id="v58229269">Configuration tasks for DB2</title>
				<tgroup cols="2" id="v58229270">
					<colspec colname="col1" colnum="1" colwidth="2in"/>
					<colspec colname="col2" colnum="2" colwidth="*"/>
					<thead id="v58229273">
						<row id="v58229274">
							<entry colname="col1">
								<para>Task</para>
							</entry>
							<entry colname="col2">
								<para>Description</para>
							</entry>
						</row>
					</thead>
					<tbody id="v58229275">
						<row id="v58229276">
							<entry colname="col1">
								<para>Configure a backup policy for a DB2 database</para>
							</entry>
							<entry colname="col2">
								<para>A backup policy for a database defines the backup criteria for a specific group of one or more clients. To back up the database environment, you must define at least one DB2 policy with the appropriate schedules.</para>
								<para>
									<xref role="linkseeheading" xreflabel="About configuring a backup policy for &db; " linkend="id-SF930163674"/>
								</para>
							</entry>
						</row>
						<row id="v58229278">
							<entry colname="col1">
								<para>Configure the run-time environment</para>
							</entry>
							<entry colname="col2">
								<para>Configuring the run-time environment consists of creating a <command moreinfo="none">db2.conf</command> file for a standard environment as well as a cluster environment. It also shows the environment variables that &nbuProductName; creates.</para>
								<para>
									<xref role="linkmoreinfo" xreflabel="Creating a db2.conf file for use with the user exit program" linkend="id-SF0A0157544"/>
								</para>
								<para>
									<xref role="linkmoreinfo" xreflabel="Creating a db2.conf file (vendor method)" linkend="v15491397"/>
								</para>
								<para>
									<xref role="linkmoreinfo" xreflabel="Keywords for the db2.conf file" linkend="id-SF0A0175998"/>
								</para>
							</entry>
						</row>
						<row id="v58229280">
							<entry colname="col1">
								<para>Create a shell script</para>
							</entry>
							<entry colname="col2">
								<para>To perform a scheduled &ProductName; for DB2 backup, you must create a shell script. The shell script controls the backup job on the &ProductName; for DB2 client.</para>
								<para>
									<xref role="linkseeheading" xreflabel="About &ProductName; for DB2 shell scripts" linkend="v15491534"/>
								</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
		</section>
		<section id="v27564300" revision="02092024112241" vendor="referenced">
			<title id="v27564317">
				<phrase condition="db2;sap_ux;syb">About permissions for &DatabaseAgent; log files (UNIX)</phrase>
			</title>
			<para id="v164610618">&ProductName; uses the <filename>/usr/openv/netbackup/logs</filename> directory tree not only for the recording of troubleshooting information, but for progress and communication updates to users and other &ProductName; applications. Restrictive permissions on these directories can not only disable the collection of troubleshooting data, but also prevent the application itself from functioning correctly.</para>
		</section>
		<section id="id-SF930163674" revision="02092024112131" vendor="referenced">
			<title id="v89408702">About configuring a backup policy for &db; </title>
			<para id="v133470829">A backup policy for a database defines the backup criteria for a specific group of one or more clients.</para>
			<itemizedlist id="v14758289">
				<title id="v14758290">These criteria include the following:</title>
				<listitem id="v14758291">
					<para id="v14758292">Storage unit and media to use</para>
				</listitem>
				<listitem id="v14758293">
					<para id="v14758294">Policy attributes</para>
				</listitem>
				<listitem id="v14758295">
					<para id="v14758296">Backup schedules</para>
				</listitem>
				<listitem id="v14758297">
					<para id="v14758298">Clients to be backed up</para>
				</listitem>
				<listitem id="v14758299" condition="db2">
					<para id="v14758300">Backup script files to run on the clients</para>
				</listitem>
			</itemizedlist>
			<para id="v14758309" condition="dbagent">To back up the database environment, define at least one &policy; policy with the appropriate schedules. A configuration can have a single policy that includes all clients, or there can be many policies, some of which include only one client.</para>
			<para id="v28562586">
				<xref xreflabel="Adding a &DatabaseAgent; policy" linkend="id-SF930158584" role="linkseeheading"/>
			</para>
			<section id="id-SF930158584" revision="06272024113257">
				<title id="v14759003">Adding a &DatabaseAgent; policy</title>
				<para id="v14759004" condition="dbagent;shpt;lot">This topic describes how to add a new backup policy for a database.</para>
				<para id="v14759015"/>
				<procedure id="v14759016">
					<title id="v14759017">To add a new &DatabaseAgent; policy</title>
					<step performance="required" id="v14759022">
						<para id="v160267732">Open the &ProductName; web UI.</para>
						<para id="v58524033" condition="db2">
							<xref xreflabel="Specifying the primary server for a &nbuProductName; for DB2 client" linkend="v15492494" role="linkmoreinfo"/>
						</para>
					</step>
					<step id="v160267733">
						<para id="v160267734">On the left, select <guimenuitem>Protection &gt; Policies</guimenuitem>. Then select <guimenuitem>Add</guimenuitem>.</para>
					</step>
					<step performance="required" id="v14759033">
						<para id="v14759034">Type a unique name for the new policy.</para>
					</step>
					<step performance="required" id="v14759037">
						<para id="v14759038">From the <guimenuitem moreinfo="none">Policy type</guimenuitem> list, select <guimenuitem moreinfo="none">&policy;</guimenuitem>.</para>
						<para id="v14759039">The &policy; policy type does not appear in the drop-down list unless your primary server has a license for the database agent.</para>
					</step>
					<step performance="required" id="v14759040">
						<para id="v14759041">Complete the entries on the <guilabel>Attributes</guilabel> tab.</para>
						<para id="v14759042">
							<xref xreflabel="About policy attributes" linkend="id-SF930166567" role="linkmoreinfo"/>
						</para>
					</step>
					<step performance="required" id="v14759044">
						<itemizedlist id="v14759045">
							<title id="v14759046">Add other policy information as follows:</title>
							<listitem id="v14759047">
								<para id="v14759048">Add schedules.</para>
								<para id="v133470985" condition="dbagent">
									<xref xreflabel="Configure an application backup schedule" linkend="id-SF930186919" role="linkseeheading"/>
								</para>
								<para id="v133470987" condition="dbagent">
									<xref xreflabel="Configure automatic backup schedules" linkend="id-SF930115156" role="linkseeheading"/>
								</para>
							</listitem>
							<listitem id="v14759051">
								<para id="v14759052">Add clients.</para>
								<para id="v14759053">
									<xref xreflabel="Add clients to a policy" linkend="id-SF930161125" role="linkmoreinfo"/>
								</para>
							</listitem>
							<listitem id="v14759055" condition="db2">
								<para id="v14759056">Adding scripts to the backup selections list.</para>
								<para id="v14759057">
									<xref linkend="id-SF930146675" role="linkmoreinfo"/>
								</para>
							</listitem>
						</itemizedlist>
					</step>
					<step performance="required" id="v14759075">
						<para id="v14759076">When you have added all the schedules, clients, and backup selections you need, click <guimenuitem moreinfo="none">Create</guimenuitem>.</para>
					</step>
				</procedure>
			</section>
			<section id="id-SF930166567" revision="02292024144337">
				<title id="v14761108">About policy attributes</title>
				<para id="v14761110">With a few exceptions, &ProductName; manages the policy attributes set for a database backup like a file system backup. Other policy attributes vary according to your specific backup strategy and system configuration.</para>
				<para id="v14761111">For more information on policy attributes, see the <ulink url="http://www.veritas.com/docs/DOC5332">&ProductName; Administrator's Guide, Volume I</ulink>.</para>
				<table tabstyle="complex" pgwide="1" id="id-SF930110905">
					<title id="v14761115">Policy attribute for &DatabaseAgent; policies</title>
					<tgroup cols="2" id="v14761116">
						<colspec colname="col0" colnum="1" colwidth="1.2in"/>
						<colspec colname="col1" colnum="2" colwidth="*"/>
						<thead id="v14761119">
							<row id="v14761120">
								<entry>
									<para>Attribute</para>
								</entry>
								<entry>
									<para>Description</para>
								</entry>
							</row>
						</thead>
						<tbody id="v14761121">
							<row id="v14761122">
								<entry>
									<para>
										<guimenuitem moreinfo="none">Policy type</guimenuitem>
									</para>
								</entry>
								<entry>
									<para>Determines the types of clients that can be backed up with the policy. For &db; databases, select the policy type &policy;.</para>
								</entry>
							</row>
							<row condition="db2;ora;sap;syb" id="v14761133">
								<entry>
									<para>
										<guimenuitem moreinfo="none">Keyword phrase</guimenuitem>
									</para>
								</entry>
								<entry>
									<para>For &DatabaseAgent;, the <guimenuitem moreinfo="none">Keyword phrase</guimenuitem> entry is ignored.</para>
								</entry>
							</row>
							<row condition="db2;sap" id="v85108138">
								<entry colname="col0">
									<para>
										<guimenuitem moreinfo="none">Snapshot Client and Replication Director</guimenuitem>
									</para>
								</entry>
								<entry colname="col1">
									<para>This group contains the options that enable backups with Snapshot Client. </para>
									<para condition="db2">
										<xref role="linkseeheading" xreflabel="&nbuProductName; for DB2 with Snapshot Client features" linkend="v56692474"/>
									</para>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>
			<section id="id-SF930161125" revision="06272024113349">
				<title id="v14759089">Add clients to a policy</title>
				<para id="v14759093" condition="db2;inx;ora;sap;syb">The client list contains a list of the clients on which your scripts are run during an automatic backup or the clients that can send backup requests to the application schedule. A &ProductName; client must be in at least one policy but can be in more than one.</para>
				<itemizedlist id="v14759099" condition="dbagent;lot">
					<title id="v14759100">For a &DatabaseAgent; policy, clients you want to add must have the following items installed or available:</title>
					<listitem id="v14759103" condition="dbagent">
						<para id="v14759104">&db;</para>
					</listitem>
					<listitem id="v14759118" condition="dbagent;lot">
						<para id="v14759119">&ProductName; client or server</para>
					</listitem>
					<listitem id="v14759129" condition="db2;ora">
						<para id="v14759130">The backup or restore scripts</para>
					</listitem>
				</itemizedlist>
				<procedure id="v14759133">
					<title id="v14759134">To add clients to a policy</title>
					<step id="v166172244">
						<para id="v166172245">Open the &nbuProductName; web UI.</para>
					</step>
					<step performance="required" id="v161602513">
						<para id="v161602514">Open the policy and select the <guilabel>Clients</guilabel> tab.</para>
					</step>
					<step performance="required" id="v86215809">
						<para id="v14759136">Select <guimenuitem>Add</guimenuitem>.</para>
					</step>
					<step performance="required" id="v14759140" condition="db2;inx;sap;sql;sqladmin;syb">
						<para id="v14759141">Type the name of the client and select the hardware and operating system of the client. </para>
						<para id="v28219120" condition="db2;inx;sap;syb">If &db; is installed in a cluster, specify the virtual name of the &db; server as the client name.</para>
						<note id="v127700598" condition="db2;inx;sap;sql;sqladmin;syb">
							<para id="v127700454" condition="db2;inx;sap;sql;sqladmin;syb">If you installed &ProductName; on more than one node in the &db; cluster, you must perform additional configuration. </para>
							<para id="v127700455">
								<xref xreflabel="Reviewing the auto-discovered mappings" linkend="v127366162" role="linkseeheading"/>
							</para>
						</note>
					</step>
					<step id="v161602498">
						<para id="v161602499">Select <guimenuitem>Add</guimenuitem>.</para>
					</step>
				</procedure>
			</section>
			<section id="v15492494" revision="09232024103157">
				<title id="v15492495">Specifying the primary server for a &nbuProductName; for DB2 client</title>
				<para id="v15492496">After you add your &DatabaseAgent; client to a policy, specify the primary server for the client.</para>
				<note id="v15492497">
					<para id="v15492498">Add the server names to the primary server before you configure the server list on the client.</para>
				</note>
				<procedure id="v15492499">
					<title id="v15492500">To specify the primary server for a &nbuProductName; for DB2 client</title>
					<step performance="required" id="v15492501">
						<para id="v164606209">Open the &nbuProductName; web UI.</para>
					</step>
					<step performance="required" id="v164606210">
						<para id="v15492502">On the left, select <guimenuitem moreinfo="none">Hosts &gt; Host properties</guimenuitem>.</para>
					</step>
					<step performance="required" id="v15492505">
						<para id="v15492506">Select the &DatabaseAgent; client name.</para>
					</step>
					<step id="v164606212">
						<para id="v164606213">If necessary, select <guimenuitem>Connect</guimenuitem>. Then select <guimenuitem>Edit client</guimenuitem>.</para>
					</step>
					<step performance="required" id="v15492507">
						<para id="v15492508">Select <guimenuitem moreinfo="none">Servers</guimenuitem>.</para>
					</step>
					<step performance="required" id="v15492509">
						<para id="v15492510">Verify that the correct server displays as the <guimenuitem moreinfo="none">Primary server</guimenuitem>.</para>
						<para id="v15492511">If the correct server does not display, locate the server name in the <guimenuitem moreinfo="none">Additional servers</guimenuitem> list, and click <guimenuitem moreinfo="none">Actions &gt; Make primary</guimenuitem>. Alternatively, select <guimenuitem moreinfo="none">Add</guimenuitem> to add a new server name to the list.</para>
					</step>
					<step performance="required" id="v15492512">
						<para id="v15492513">Click <guimenuitem moreinfo="none">Save</guimenuitem>.</para>
					</step>
				</procedure>
			</section>
			<section id="id-SF0A0142613" revision="09232024103157">
				<title id="v15490630">Configuring a policy to back up the configuration files</title>
				<para id="v15490631">This topic shows how to create an automatic backup policy to back up the &nbuProductName; configuration files. If you want users to be able to back up configuration files manually, you must also create a User Backup schedule.</para>
				<procedure id="v15490632">
					<title id="v15490633">To back up configuration files</title>
					<step performance="required" id="v15490634">
						<para id="v15490635">Create an MS-Windows (Windows) or Standard (UNIX) policy.</para>
					</step>
					<step performance="required" id="v15490636">
						<para id="v15490637">Specify the attributes for the policy.</para>
					</step>
					<step performance="required" id="v15490638">
						<para id="v15490639">On the <guilabel>Schedules</guilabel> tab, create a full backup schedule.</para>
					</step>
					<step performance="required" id="v15490640">
						<para id="v15490641">In the <guimenuitem>Backup selections</guimenuitem> list, add an entry that includes the full path name of the directory that contains the configuration files.</para>
					</step>
					<step performance="required" id="v15490642">
						<para id="v15490643">Specify the clients to back up.</para>
						<itemizedlist id="v15490644">
							<title id="v15490645">The clients must have the following installed:</title>
							<listitem id="v15490646">
								<para id="v15490647">DB2</para>
							</listitem>
							<listitem id="v15490648">
								<para id="v15490649">&nbuProductName; for DB2</para>
							</listitem>
						</itemizedlist>
						<para id="v15490650">If the client is installed in a &db; cluster, add the virtual host name to the client list.</para>
						<note id="v127757380">
							<para id="v127757381">If you installed &nbuProductName; on more than one node in the &db; cluster, you must perform additional configuration. You must approve each valid<guimenuitem>Auto-Discovered Mapping</guimenuitem> that &nbuProductName; discovers in your environment.</para>
							<para id="v127757382">
								<xref xreflabel="Reviewing the auto-discovered mappings" linkend="v127366162" role="linkseeheading"/>
							</para>
						</note>
					</step>
				</procedure>
			</section>
			<section id="v14758648" revision="06272024113637">
				<title id="v14758655">Configuring the Maximum jobs per client</title>
				<para id="v161614831"/>
				<para id="v164610487"/>
				<para id="v164610488">The <guimenuitem moreinfo="none">Maximum jobs per client</guimenuitem> specifies the maximum number of concurrent backups that are allowed per client.</para>
				<note id="v14758716">
					<para id="v14758717">Enter a large enough value for the <guimenuitem moreinfo="none">Maximum jobs per client</guimenuitem> attribute to meet the number of jobs that &db; runs. You may need to experiment with different values at your site.</para>
				</note>
				<procedure id="v14758657">
					<title id="v14758658">To configure the maximum jobs per client</title>
					<step id="v161614832">
						<para id="v161614833">Open the web UI.</para>
					</step>
					<step id="v161614834">
						<para id="v152306779">On the left, select <guimenuitem>Hosts &gt; Host properties</guimenuitem>.</para>
					</step>
					<step id="v161614836">
						<para id="v152306781">Select the primary server. </para>
					</step>
					<step id="v161614838">
						<para id="v161614839">If necessary, select <guimenuitem>Connect</guimenuitem>. Then select <guimenuitem>Edit primary server</guimenuitem>.</para>
					</step>
					<step performance="required" id="v14758665">
						<para id="v14758666">Select <guimenuitem moreinfo="none">Global attributes</guimenuitem>.</para>
					</step>
					<step performance="required" id="v14758667">
						<para id="v14758668">Select the appropriate value for <guimenuitem moreinfo="none">Maximum jobs per client</guimenuitem>.</para>
						<para id="v14758669">The default is 1.</para>
					</step>
				</procedure>
				<para id="v14758674" condition="inx;sap;syb;db2">You can use the following formula to calculate a smaller value for the Maximum jobs per client setting:</para>
				<para id="v14758697" condition="db2">Maximum jobs per client = <replaceable>number_of_sessions</replaceable> X <replaceable>number_of_policies</replaceable>
				</para>
				<para id="v14758698" condition="db2">Refer to the following definitions:</para>
				<informaltable id="v14758699" condition="db2" tabstyle="simple">
					<tgroup cols="2" id="v14758700">
						<colspec colnum="1" colwidth="1in"/>
						<colspec colnum="2" colwidth="*"/>
						<tbody id="v14758703">
							<row id="v14758704">
								<entry>
									<para>
										<replaceable>number_of_sessions</replaceable>
									</para>
								</entry>
								<entry>
									<para>The number of backup sessions between the backup server and &ProductName; on the client. Each separate session starts a new backup job on the client.</para>
								</entry>
							</row>
							<row id="v14758705">
								<entry>
									<para>
										<replaceable>number_of_policies</replaceable>
									</para>
								</entry>
								<entry>
									<para>The number of policies of any type that can back up this client at the same time. This number can be greater than one. For example, a client can be in two policies to back up two different databases. These backup windows can overlap.</para>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</informaltable>
			</section>
		</section>
		<section id="id-SF930146675" revision="06072022140419" vendor="referenced">
			<title id="v14759835">
				<phrase condition="db2">About adding backup selections to a DB2 policy</phrase>
			</title>
			<para id="v14759837">The backup selections list in a database policy has a different meaning than for non-database policies. For example, in a Standard or MS-Windows policy, the list contains files and directories to be backed up.<indexterm>
					<primary>policy configuration</primary>
					<secondary>backup selections list</secondary>
				</indexterm>
				<indexterm>
					<primary>Backup Selections list</primary>
					<secondary>overview</secondary>
				</indexterm>
			</para>
			<para id="v14759838">In a database policy, you specify scripts to be run.</para>
			<itemizedlist id="v14759841">
				<title id="v14759842">Observe the following rules when you use scripts:</title>
				<listitem id="v14759843">
					<para id="v14759844">Make sure that the scripts reside on each client in the client list.</para>
				</listitem>
				<listitem id="v14759847">
					<para id="v14759848">&ProductName; installs sample scripts when you install the software; you can modify these scripts for your own use.</para>
				</listitem>
				<listitem id="v125234067">
					<para id="v125234068">All scripts must be in an authorized location.</para>
					<para id="v125234069">
						<xref xreflabel="Registering authorized locations used by a &ProductName; database script-based policy" linkend="v125208570" role="linkmoreinfo"/>
					</para>
				</listitem>
				<listitem id="v14759850">
					<para id="v14759851">If you use &DatabaseAgent; in a &ProductName; server cluster, make sure that the scripts reside in a location that is available after a failover.</para>
				</listitem>
			</itemizedlist>
			<note id="v125234071">
				<para id="v125210395">All scripts must be stored and run locally. One recommendation is that scripts should not be world-writable. Scripts are not allowed to be run from network or remote locations. Any script that is created and saved in the &ProductName; <filename>db_ext</filename> (UNIX) or <filename>dbext</filename> (Windows) location needs to be protected during a &ProductName; uninstall.</para>
				<para id="v125234073">For more information about registering authorized locations and scripts, review the knowledge base article:</para>
				<para id="v125234074">
					<ulink url="https://www.veritas.com/content/support/en_US/article.100039639">Registering authorized locations used by a &ProductName; database script-based policy</ulink>
				</para>
			</note>
			<para id="v14759852">Add scripts to the backup selections list only if you want to set up a policy for automatic backups. These scripts are run for manual backups and for automatic schedules as specified under the <guilabel>Schedules</guilabel> tab. &ProductName; runs the scripts in the order that they appear in the backup selections list.</para>
			<para id="v14759853" condition="db2">
				<xref xreflabel="About &ProductName; for DB2 shell scripts" linkend="v15491534" role="linkmoreinfo"/>
			</para>
			<para id="v58524167">
				<xref xreflabel="Adding a script to the backup selections list" linkend="v14759857" role="linkmoreinfo"/>
			</para>
			<section id="v14761509" revision="03142023173012">
				<title id="v14761510">About backup schedules and scripts</title>
				<para id="v151874725">Be aware of what may happen if an automatic schedule invokes a script that a user authored. &ProductName; does not provide safeguards to prevent an automatic backup schedule from running a restore or a recovery script.<indexterm>
						<primary>scripts</primary>
						<secondary>cautions for using</secondary>
					</indexterm>
				</para>
				<para id="v58524149" condition="db2;ora">
					<xref linkend="id-SF930146675" role="linkmoreinfo"/>
				</para>
				<para id="v58524155">
					<xref xreflabel="Adding a script to the backup selections list" linkend="v14759857" role="linkmoreinfo"/>
				</para>
			</section>
			<section id="v14759857" revision="06272024113825">
				<title id="v56034891">Adding a script to the backup selections list</title>
				<para id="v109287608">The following procedure describes how to add a script to the backup selections list.</para>
				<note id="v56034892">
					<para id="v56034893">Be sure to specify the correct script name in the backup selections list to prevent an error or a wrong operation.</para>
				</note>
				<procedure id="v14759880">
					<title id="v14759881">To add a script to the backup selections list</title>
					<step performance="required" id="v14759882">
						<para id="v14759883">Open the &nbuProductName; web UI.</para>
					</step>
					<step id="v166172246">
						<para id="v166172247">Open the policy.</para>
					</step>
					<step performance="required" id="v14759885">
						<para id="v14759886">Select the <guilabel>Backup selections</guilabel> tab.</para>
					</step>
					<step performance="required" id="v14759887">
						<para id="v14759888">Select <guimenuitem moreinfo="none">Add</guimenuitem>.</para>
					</step>
					<step performance="required" id="v14759889">
						<para id="v14759890">In the <guimenuitem>Script</guimenuitem> box, type the full path name of a script on the client.</para>
						<para id="v14759891">For example:</para>
						<programlisting format="linespecific" id="v14759892">/backup_scripts/db/cold_backup.sh
C:\backup_scripts\db\cold_backup.cmd</programlisting>
						<para id="v125212704">
							<xref xreflabel="Registering authorized locations used by a &ProductName; database script-based policy" linkend="v125208570" role="linkmoreinfo"/>
						</para>
					</step>
					<step performance="required" id="v14759893">
						<para id="v14759894">Select <guimenuitem moreinfo="none">Add</guimenuitem> to add the script to the list.</para>
					</step>
					<step performance="required" id="v14759895">
						<para id="v14759896">Select <guimenuitem moreinfo="none">Save</guimenuitem>.</para>
					</step>
				</procedure>
				<note id="v151832116">
					<para id="v151832117">Be aware of what may happen if an automatic schedule invokes a script that a user authored. &ProductName; does not provide safeguards to prevent an automatic backup schedule from running a restore or a recovery script.</para>
				</note>
			</section>
		</section>
		<section id="id-SF930186919" revision="05062024153423" vendor="referenced">
			<title id="v14758845">Configure an application backup schedule</title>
			<para id="v14758846">A database backup requires an application backup schedule. You cannot perform backups if this type of schedule is not included in the policy. &ProductName; automatically creates this schedule and names it <guimenuitem moreinfo="none">Default-Application-Backup</guimenuitem>.</para>
			<para id="v14758847">The backup window for an application backup schedule must encompass the time period during which all scheduled jobs and client-initiated jobs can occur. This window is necessary because the application backup schedule accepts the backup request from &DatabaseAgent; regardless of whether the backup was initiated from an automatic schedule or from the client. You can choose to set the window for the application backup schedule for 24 hours per day, seven days per week. This window ensures that your operations are never locked out due to the application backup schedule.</para>
			<procedure id="v14758849">
				<title id="v14758850">To configure an application backup schedule</title>
				<step performance="required" id="v14758851">
					<para id="v161602502">Open the &nbuProductName; web UI.</para>
				</step>
				<step performance="required" id="v161602503">
					<para id="v14758852">Open the policy and click the <guilabel>Schedules</guilabel> tab.</para>
				</step>
				<step performance="required" id="v14758854">
					<para id="v14758855">Select the schedule that is named <guimenuitem moreinfo="none">Default-Application-Backup</guimenuitem> and click <guimenuitem>Edit</guimenuitem>.</para>
				</step>
				<step performance="required" id="v14758856">
					<para id="v14758857">Specify the other properties for the schedule.</para>
					<para id="v14758858">
						<xref xreflabel="About schedule properties " linkend="id-SF930186642" role="linkseeheading"/>
					</para>
				</step>
				<step id="v161602500">
					<para id="v161602501">Click <guimenuitem>Add</guimenuitem>.</para>
				</step>
			</procedure>
		</section>
		<section id="v14758860" revision="02092024112836" vendor="referenced">
			<title id="v14758861">Example application backup schedule</title>
			<para id="v54267858" condition="db2">Specify the application backup schedule name in the <filename>db2.conf</filename> file on the client. The <filename>db2.conf</filename> file is located in the following directory path:</para>
			<para id="v54267860" condition="db2">Windows: <command moreinfo="none">
					<replaceable>install_path</replaceable>\NetBackup\dbext\db2\db2.conf</command>
			</para>
			<para id="v54267859" condition="db2">UNIX: <command moreinfo="none">$DB2_Instance_Home/db2.conf</command>
			</para>
			<itemizedlist id="v14758862">
				<title id="v14758863">Assume the following:</title>
				<listitem id="v14758864">
					<para id="v14758865">Users perform database backup operations during business hours, 08:00 to 13:00.</para>
				</listitem>
				<listitem id="v14758866">
					<para id="v14758867">The automatic backups that use this policy start between 18:00 and 22:00.</para>
				</listitem>
			</itemizedlist>
			<para id="v14758868">In this scenario, the application backup schedule must have a start time of 0800 and a duration of 14 hours. Alternatively, the schedule can have two windows each day; one with a start time of 0800 and duration of 5 hours, and another with a start time of 1800 and a duration of 4 hours.</para>
			<table tabstyle="complex" id="id-SF930149899">
				<title id="v14758872">Example settings for a &DatabaseAgent; application backup schedule</title>
				<tgroup cols="2" id="v14758873">
					<colspec colnum="1" colwidth="1.2in"/>
					<colspec colnum="2" colwidth="*"/>
					<thead id="v14758877">
						<row id="v14758878">
							<entry>
								<para>Schedule option</para>
							</entry>
							<entry>
								<para>Setting</para>
							</entry>
						</row>
					</thead>
					<tbody id="v14758879">
						<row id="v14758880">
							<entry>
								<para>Retention</para>
							</entry>
							<entry>
								<para>2 weeks</para>
							</entry>
						</row>
						<row id="v14758881">
							<entry>
								<para>Backup window</para>
							</entry>
							<entry>
								<para>Sunday through Saturday</para>
								<para>00:08:00 - 22:00:00</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
		</section>
		<section id="id-SF930115156" revision="05062024151842" vendor="referenced">
			<title id="v14758894">Configure automatic backup schedules</title>
			<para id="v14758897" condition="db2;sap;sql">If you plan to have &ProductName; perform automatic backups, or if you use Snapshot Client features, you need one or more automatic backup schedules.</para>
			<procedure id="v14758898">
				<title id="v14758899">To configure an automatic backup schedule</title>
				<step performance="required" id="v161602509">
					<para id="v161602510">Open the &nbuProductName; web UI.</para>
				</step>
				<step performance="required" id="v14758902">
					<para id="v14758903">Click <guimenuitem moreinfo="none">Add</guimenuitem>.</para>
				</step>
				<step performance="required" id="v14758904">
					<para id="v14758905">Specify a unique name for the schedule.</para>
				</step>
				<step performance="required" id="v14758906" condition="db2;inx;sap;syb">
					<para id="v14758907">Select the <guimenuitem moreinfo="none">Type of backup</guimenuitem>.</para>
					<para id="v14758916" condition="db2">
						<xref xreflabel="&nbuProductName; for DB2 backup types" linkend="id-SF930185830" role="linkmoreinfo"/>
					</para>
				</step>
				<step performance="required" id="v14758922">
					<para id="v14758923">Specify the other properties for the schedule.</para>
					<para id="v14758924">
						<xref xreflabel="About schedule properties " linkend="id-SF930186642" role="linkmoreinfo"/>
					</para>
				</step>
				<step performance="required" id="id-SF930184138">
					<para id="v14758930">Click <guimenuitem moreinfo="none">Add</guimenuitem>. </para>
				</step>
			</procedure>
		</section>
		<section id="v14758933" revision="02092024113459" vendor="referenced">
			<title id="v14758934">Example automatic backup schedule</title>
			<para id="v24618097" condition="db2">
				<xref xreflabel="Example settings for &DatabaseAgent; automatic backup schedules" linkend="v29773497" role="link"/> shows example settings for automatic backup schedules.<indexterm>
					<primary>Automatic Full Backup schedule</primary>
				</indexterm>
			</para>
			<table tabstyle="complex" id="v29773497" condition="db2">
				<title id="v29773498">Example settings for &DatabaseAgent; automatic backup schedules</title>
				<tgroup cols="3" id="v29773499">
					<colspec colnum="1" colwidth="1.5in"/>
					<colspec colnum="2" colwidth="*"/>
					<colspec colnum="3" colwidth="*"/>
					<thead id="v29773503">
						<row id="v29773504">
							<entry>
								<para>Type of backup</para>
							</entry>
							<entry>
								<para>Schedule property</para>
							</entry>
							<entry>
								<para>Setting</para>
							</entry>
						</row>
					</thead>
					<tbody id="v29773505">
						<row id="v29773506">
							<entry>
								<para>
									<guimenuitem>Automatic Full Backup</guimenuitem>
								</para>
							</entry>
							<entry>
								<para>Retention (proxy backup only)</para>
							</entry>
							<entry>
								<para>2 weeks</para>
							</entry>
						</row>
						<row id="v29773507">
							<entry>
								<para/>
							</entry>
							<entry>
								<para>Frequency</para>
							</entry>
							<entry>
								<para>Every week</para>
							</entry>
						</row>
						<row id="v29773508">
							<entry>
								<para/>
							</entry>
							<entry>
								<para>Backup window</para>
							</entry>
							<entry>
								<para>Sunday, 18:00:00 - 22:00:00</para>
							</entry>
						</row>
						<row id="v29773509">
							<entry>
								<para>
									<guimenuitem>Automatic Differential Incremental Backup</guimenuitem>, <guimenuitem>Automatic Cumulative Incremental Backup</guimenuitem>
								</para>
							</entry>
							<entry>
								<para>Retention (proxy backup only)</para>
							</entry>
							<entry>
								<para>1 week</para>
							</entry>
						</row>
						<row id="v29773510">
							<entry>
								<para/>
							</entry>
							<entry>
								<para>Frequency</para>
							</entry>
							<entry>
								<para>Every day</para>
							</entry>
						</row>
						<row id="v29773511">
							<entry>
								<para/>
							</entry>
							<entry>
								<para>Backup window</para>
							</entry>
							<entry>
								<para>Sunday through Saturday</para>
								<para>18:00:00 - 22:00:00</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
		</section>
		<section id="id-SF930186642" revision="05062024150852" vendor="referenced">
			<title id="v14761031">
				<phrase condition="apagent;db2;inx;sap;syb">Schedule properties</phrase>
			</title>
			<para id="v14761032" condition="apagent;db2;inx;ora;sap_win;sap_ux;syb">This topic describes the schedule properties that have a different meaning for database backups than for file system backups. Other schedule properties vary according to your specific backup strategy and system configuration. Additional information about other schedule properties is available. See the <ulink url="http://www.veritas.com/docs/DOC5332">&ProductName; Administrator's Guide, Volume I</ulink>.</para>
			<table tabstyle="complex" pgwide="1" id="id-SF930139311">
				<title id="v14761036">Description of schedule properties</title>
				<tgroup cols="2" id="v14761037">
					<colspec colname="col0" colnum="1" colwidth="1.25in"/>
					<colspec colname="col1" colnum="2" colwidth="*"/>
					<thead id="v14761040">
						<row id="v14761041">
							<entry>
								<para>Property</para>
							</entry>
							<entry>
								<para>Description</para>
							</entry>
						</row>
					</thead>
					<tbody id="v14761042">
						<row id="v14761043">
							<entry>
								<para>
									<guimenuitem moreinfo="none">Type of backup</guimenuitem>
								</para>
							</entry>
							<entry>
								<para>Specifies the type of backup that this schedule can control. The selection list shows only the backup types that apply to the policy you want to configure.</para>
								<para condition="db2">
									<xref role="linkseeheading" xreflabel="&nbuProductName; for DB2 backup types" linkend="id-SF930185830"/>
								</para>
							</entry>
						</row>
						<row condition="dbagent" id="v14761051">
							<entry>
								<para>
									<guimenuitem moreinfo="none">Schedule type</guimenuitem>
								</para>
							</entry>
							<entry>
								<itemizedlist>
									<title>You can schedule an automatic backup in one of the following ways:</title>
									<listitem>
										<para>
											<guimenuitem moreinfo="none"> Frequency</guimenuitem>
										</para>
										<para>
											<guimenuitem moreinfo="none">Frequency</guimenuitem> specifies the period of time that can elapse until the next backup operation begins on this schedule. For example, assume that the frequency is 7 days and a successful backup occurs on Wednesday. The next full backup does not occur until the following Wednesday. Typically, incremental backups have a shorter frequency than full backups.</para>
									</listitem>
									<listitem>
										<para>
											<guimenuitem moreinfo="none">Calendar</guimenuitem>
										</para>
										<para>The <guimenuitem moreinfo="none">Calendar</guimenuitem> option lets you schedule the backup operations that are based on specific dates, recurring week days, or recurring days of the month.</para>
									</listitem>
								</itemizedlist>
							</entry>
						</row>
						<row condition="db2" id="v156945658">
							<entry colname="col0">
								<para>
									<guimenuitem moreinfo="none">Retention</guimenuitem>
								</para>
							</entry>
							<entry colname="col1">
								<para>The retention period for an application backup type schedule refers to the length of time that &ProductName; keeps backup images for stream-based backups. The retention period for an automatic backup type schedule refers to the length of time that &ProductName; keeps backup images for non-stream-based backups (Example: snapshot). The DB2 database also has retention settings for backup images in the DB2 catalog. As a general recommendation, the &ProductName; retention of a backup image should be longer than the database retention of the same backup image.</para>
								<itemizedlist>
									<title>The type of schedule you select affects the retention period as follows:</title>
									<listitem>
										<para>Frequency-based scheduling</para>
										<para>Set a retention period that is longer than the frequency setting for the schedule. For example, if the frequency setting is set to one week, set the retention period to be more than one week. The &ProductName; scheduler compares the latest record of the automatic backup schedule to the frequency of that automatic backup schedule. This comparison is done to determine whether a backup is due. So if you set the retention period to expire the record too early, the scheduled backup frequency is unpredictable. However, if you set the retention period to be longer than necessary, the &ProductName; catalog accumulates unnecessary records. </para>
									</listitem>
									<listitem>
										<para>Calendar-based scheduling</para>
										<para> The retention period setting is not significant for calendar-based scheduling.</para>
									</listitem>
								</itemizedlist>
							</entry>
						</row>
						<row condition="dbagent" id="v14761053">
							<entry>
								<para>
									<guimenuitem moreinfo="none">Multiple copies</guimenuitem>
								</para>
							</entry>
							<entry>
								<para>If you want to specify multiple copies of a backup for the policy, configure <guimenuitem moreinfo="none">Multiple copies</guimenuitem> on the application backup schedule. If using Snapshot Client, also specify <guilabel>Multiple copies</guilabel> on the automatic schedule.</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
		</section>
		<section id="id-SF930185830" revision="09232024103157" vendor="referenced">
			<title id="v14761479">&nbuProductName; for DB2 backup types</title>
			<para id="v14761480">Each database agent has a unique set of backup schedules.</para>
			<para id="v14761481">
				<xref xreflabel="DB2 backup types" linkend="id-SF930148267" role="link"/> shows the DB2 backup schedules you can specify.</para>
			<table tabstyle="complex" id="id-SF930148267">
				<title id="v14761484">DB2 backup types</title>
				<tgroup cols="2" id="v14761485">
					<colspec colnum="1" colwidth="1.2in"/>
					<colspec colnum="2" colwidth="*"/>
					<thead id="v14761488">
						<row id="v14761489">
							<entry>
								<para>Backup type</para>
							</entry>
							<entry>
								<para>Description</para>
							</entry>
						</row>
					</thead>
					<tbody id="v14761490">
						<row id="v14761491">
							<entry>
								<para>Application Backup</para>
							</entry>
							<entry>
								<para>The Application Backup schedule enables user-controlled &nbuProductName; operations from the client. These operations include those initiated from the client and those initiated by an automatic schedule on the primary server. &nbuProductName; uses the Application Backup schedule when the user starts a backup manually. Configure at least one Application Backup schedule for each database policy. The Default-Application-Backup schedule is configured automatically as an Application Backup schedule.</para>
							</entry>
						</row>
						<row id="v14761492">
							<entry>
								<para>Automatic Full Backup</para>
							</entry>
							<entry>
								<para>An Automatic full backup contains a copy of all the data. A full backup is not the same as a whole database backup. Full means that the backup is not one of the incremental backup types.</para>
								<para>To perform a stream-based Automatic full backup, also specify an Automatic Full Backup schedule for scheduled &nbuProductName; operations.</para>
								<para>Snapshot Client only supports this type of backup and the Block-Level Incremental (BLI) Backup.</para>
							</entry>
						</row>
						<row id="v14761493">
							<entry>
								<para>Automatic Differential incremental backup </para>
							</entry>
							<entry>
								<para>An Automatic Differential incremental backup is an incremental backup that is not cumulative. The backup contains a copy of the database data that has changed since the most recent backup, full or otherwise. This type of backup corresponds to the <command moreinfo="none">INCREMENTAL DELTA</command> option of the DB2 <command moreinfo="none">BACKUP</command> command.</para>
								<para>This type of backup takes less space and time than a cumulative incremental backup. The backup includes only the data that changed since the last backup of any type.</para>
								<para>This type of backup is supported only for stream-based backups and for BLI backups.</para>
							</entry>
						</row>
						<row id="v14761494">
							<entry>
								<para>Automatic Cumulative incremental backup </para>
							</entry>
							<entry>
								<para>An Automatic Cumulative incremental backup is an incremental backup that is cumulative. The backup contains a copy of the database data that changed since the most recent full backup. This type of backup corresponds to the <command moreinfo="none">INCREMENTAL</command> option of the DB2 <command moreinfo="none">BACKUP</command> command.</para>
								<para>Automatic Cumulative Incremental backups are supported only for stream-based backups and for BLI backups.</para>
								<para>This backup takes less time and space than a full backup; it contains only the data that changed since the last full backup.</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
			<note id="v58235353">
				<para id="v58235354">For the types of backup schedules, the information in this topic pertains to stream-based backups. If you use the Snapshot Client option, some of the information in that table may differ.</para>
			</note>
			<para id="v14761516">More information about backup schedules and Snapshot Client features is available.</para>
			<para id="v14761517">
				<xref xreflabel="&nbuProductName; for DB2 with Snapshot Client features" linkend="v56692474" role="linkseeheading"/>
			</para>
		</section>
		<section id="v14759502" revision="05232024143652" vendor="referenced">
			<title id="v14759509">Perform a manual backup</title>
			<para id="v166008200">
				<remark>Writer: This topic is shared with multiple workloads. </remark>
			</para>
			<para id="v14759510">After you configure the servers and assets in your environment, you can test the configuration settings with a manual backup. Perform a manual backup (or backups) from a policy with the automatic backup schedules that you created.</para>
			<para id="v166008201">Or, you can use Backup now to perform a manual backup of an asset in the <guimenuitem>Workloads </guimenuitem> node.</para>
			<procedure id="v14759512">
				<title id="v14759513">To perform a manual backup from a policy</title>
				<step id="v164258606">
					<para id="v164258607">Open the &nbuProductName; web UI.</para>
				</step>
				<step performance="required" id="v14759520">
					<para id="v14759521">On the left, click <guimenuitem>Protection &gt; Policies</guimenuitem>.</para>
				</step>
				<step performance="required" id="v14759522">
					<para id="v14759523">Select the policy you want to test.</para>
				</step>
				<step performance="required" id="v14759524">
					<para id="v14759525">Click <guimenuitem moreinfo="none">Manual backup</guimenuitem>.</para>
				</step>
				<step performance="required" id="v14759527">
					<para id="v14759528">Select the schedule that you want to use for the manual backup.</para>
				</step>
				<step id="v108950651" condition="db2;exch;inx;sap;shpt;syb">
					<para id="v108950652">Select the clients that you want to include for the manual backup.</para>
				</step>
			</procedure>
		</section>
		<section id="v127366162" revision="04242024145535" vendor="referenced">
			<title id="v127366168">Reviewing the auto-discovered mappings</title>
			<para id="v127856814">In certain scenarios, a &ProductName; host shares a particular name with other hosts or has a name that is associated with a cluster. To successfully perform backups and restores with &DatabaseAgent;, you must approve each valid auto-discovered mapping that &ProductName; discovers in your environment. Or, manually add the mappings.</para>
			<para id="v152912360">
				<xref linkend="v152912365" role="linkseeheading"/>
			</para>
			<para id="v152912362">
				<xref linkend="v152912366" role="linkseeheading"/>
			</para>
			<itemizedlist id="v127700514">
				<title id="v127700515">Examples of the configurations that have multiple host names include:</title>
				<listitem id="v127786218">
					<para id="v127786219">A host is associated with its fully qualified domain name (FQDN) and its short name or its IP address.</para>
				</listitem>
				<listitem id="v127786597" condition="db2;exch;inx;sap;syb">
					<para id="v127786598"> If the &db; server is clustered, the host is associated with its node name and the virtual name of the cluster. </para>
				</listitem>
			</itemizedlist>
			<para id="v152912364">These mappings are configured in the <guimenuitem>Security &gt; Host mappings</guimenuitem> node in the &nbuProductName; web UI. You can also use the <command>nbhostmgmt</command> command to manage the mappings. See the <ulink url="http://www.veritas.com/docs/DOC5332">NetBackup Security and Encryption Guide</ulink> and <ulink url="http://www.veritas.com/docs/DOC5332">NetBackup Web UI Administrator&apos;s Guide</ulink> for more details.</para>
			<bridgehead id="v127700520">Auto-discovered mappings for a cluster</bridgehead>
			<itemizedlist id="v127700457" condition="db2;exch;inx;sap;sql;syb">
				<title id="v127700458">In a &db; cluster environment, you must map the node names to the virtual name of the cluster if the following apply:</title>
				<listitem id="v127700459">
					<para id="v127700460">If the backup policy includes the cluster name (or virtual name) </para>
				</listitem>
				<listitem id="v127700461">
					<para id="v127700462">If the &ProductName; client is installed on more than one node in the cluster, the virtual name must be mapped to each node.</para>
					<para id="v127700463">If the &ProductName; Client is only installed on one node, then no mapping is necessary.</para>
				</listitem>
			</itemizedlist>
			<bridgehead id="v152912365">Approve the auto-discovered mappings for a cluster</bridgehead>
			<procedure id="v127856815">
				<title id="v127856816">To approve the auto-discovered mappings for a cluster</title>
				<step id="v160307170">
					<para id="v160307171">In the &ProductName; web UI, expand <guimenuitem>Security &gt; Host mappings</guimenuitem>.</para>
				</step>
				<step id="v127856819">
					<para id="v127856820">Click the <guilabel>Mappings to approve</guilabel> tab.</para>
					<para id="v127856821">The list displays the hosts in your environment and the mappings or additional host names that &ProductName; discovered for those hosts. A host has one entry for each mapping or name that is associated with it.</para>
					<para id="v127856822">For example, for a cluster with hosts <filename>client01.lab04.com</filename> and <filename>client02.lab04.com</filename>, you may see the following entries:</para>
					<informaltable id="v127856823">
						<tgroup cols="2" id="v127856824">
							<colspec colname="col1" colnum="1" colwidth="*"/>
							<colspec colname="col2" colnum="2" colwidth="*"/>
							<thead id="v127856827">
								<row id="v127856828">
									<entry colname="col1">
										<para>Host</para>
									</entry>
									<entry colname="col2">
										<para>Auto-discovered mapping</para>
									</entry>
								</row>
							</thead>
							<tbody id="v127856829">
								<row id="v127856830">
									<entry colname="col1">
										<para>client01.lab04.com</para>
									</entry>
									<entry colname="col2">
										<para>client01</para>
									</entry>
								</row>
								<row id="v127856831">
									<entry colname="col1">
										<para>client01.lab04.com</para>
									</entry>
									<entry colname="col2">
										<para>clustername</para>
									</entry>
								</row>
								<row id="v127856832">
									<entry colname="col1">
										<para>client01.lab04.com</para>
									</entry>
									<entry colname="col2">
										<para>clustername.lab04.com</para>
									</entry>
								</row>
								<row id="v127885766">
									<entry colname="col1">
										<para>client02.lab04.com</para>
									</entry>
									<entry colname="col2">
										<para>client02</para>
									</entry>
								</row>
								<row id="v127885767">
									<entry colname="col1">
										<para>client02.lab04.com</para>
									</entry>
									<entry colname="col2">
										<para>clustername</para>
									</entry>
								</row>
								<row id="v127885768">
									<entry colname="col1">
										<para>client02.lab04.com</para>
									</entry>
									<entry colname="col2">
										<para>clustername.lab04.com</para>
									</entry>
								</row>
							</tbody>
						</tgroup>
					</informaltable>
				</step>
				<step id="v161602523">
					<para id="v161602524">Click the name of the host.</para>
				</step>
				<step id="v127856833">
					<para id="v127856834">Review the mappings for the host and click <guimenuitem>Approve</guimenuitem> if you want to use the discovered mappings. </para>
					<para id="v127885769">For example, if the following mappings are valid for <filename>client01.lab04.com</filename>, then you approve them.</para>
					<informaltable id="v127885770">
						<tgroup cols="2" id="v127885771">
							<colspec colname="col1" colnum="1" colwidth="*"/>
							<colspec colname="col2" colnum="2" colwidth="*"/>
							<thead id="v127885774">
								<row id="v127885775">
									<entry colname="col1">
										<para>Auto-discovered mapping</para>
									</entry>
									<entry colname="col2">
										<para>Valid name for</para>
									</entry>
								</row>
							</thead>
							<tbody id="v127885776">
								<row id="v127885777">
									<entry colname="col1">
										<para>client01</para>
									</entry>
									<entry colname="col2">
										<para>The short name of the client</para>
									</entry>
								</row>
								<row id="v127885778">
									<entry colname="col1">
										<para>clustername</para>
									</entry>
									<entry colname="col2">
										<para>The virtual name of the cluster</para>
									</entry>
								</row>
								<row id="v127885779">
									<entry colname="col1">
										<para>clustername.lab04.com</para>
									</entry>
									<entry colname="col2">
										<para>The FQDN of the virtual name of the cluster</para>
									</entry>
								</row>
							</tbody>
						</tgroup>
					</informaltable>
				</step>
				<step id="v127885780">
					<para id="v127885781">When you finish approving the valid mappings for the hosts, click on the <guilabel>Hosts</guilabel> tab.</para>
					<para id="v127885782">For hosts <filename>client01.lab04.com</filename> and <filename>client02.lab04.com</filename>, you see entries for <guilabel>Mapped host or IP address</guilabel> that are similar to the following:</para>
					<informaltable id="v127885783">
						<tgroup cols="2" id="v127885784">
							<colspec colname="col1" colnum="1" colwidth="*"/>
							<colspec colname="col2" colnum="2" colwidth="*"/>
							<thead id="v127885787">
								<row id="v127885788">
									<entry colname="col1">
										<para>Host</para>
									</entry>
									<entry colname="col2">
										<para>Mapped host names/IP addresses</para>
									</entry>
								</row>
							</thead>
							<tbody id="v127885789">
								<row id="v127885790">
									<entry colname="col1">
										<para>client01.lab04.com</para>
									</entry>
									<entry colname="col2">
										<para>client01.lab04.com, client01, clustername, clustername.lab04.com</para>
									</entry>
								</row>
								<row id="v127885791">
									<entry colname="col1">
										<para>client02.lab04.com</para>
									</entry>
									<entry colname="col2">
										<para>client02.lab04.com, client02, clustername, clustername.lab04.com</para>
									</entry>
								</row>
							</tbody>
						</tgroup>
					</informaltable>
				</step>
				<step id="v127885792">
					<para id="v127885793">If you need to add a mapping that &ProductName; did not automatically discover, you can add it manually. </para>
				</step>
			</procedure>
			<table id="v127700538" condition="db2;inx;sap;syb">
				<title id="v127700539">Example mapped host names for a &db; cluster environment</title>
				<tgroup cols="3" id="v127700540">
					<colspec colname="col01" colnum="1" colwidth="1.25in"/>
					<colspec colname="col1" colnum="2" colwidth="*"/>
					<colspec colname="col2" colnum="3" colwidth="*"/>
					<thead id="v127700544">
						<row id="v127700545">
							<entry colname="col01">
								<para>Environment</para>
							</entry>
							<entry colname="col1">
								<para>
									<guimenuitem>Host</guimenuitem>
								</para>
							</entry>
							<entry colname="col2">
								<para>
									<guimenuitem>Mapped host names</guimenuitem>
								</para>
							</entry>
						</row>
					</thead>
					<tbody id="v127700546">
						<row id="v127700547">
							<entry colname="col01">
								<para>Cluster with two nodes</para>
								<para/>
							</entry>
							<entry colname="col1">
								<para>Physical name of <replaceable>Node 1</replaceable>
								</para>
							</entry>
							<entry colname="col2">
								<para>Virtual name of &db; server</para>
							</entry>
						</row>
						<row id="v127700548">
							<entry colname="col01"/>
							<entry colname="col1">
								<para>Physical name of <replaceable>Node 2</replaceable>
								</para>
								<para/>
							</entry>
							<entry colname="col2">
								<para>Virtual name of &db; server</para>
								<para/>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
			<para id="v137506903">&#xA0;</para>
			<bridgehead id="v152912366">Manually map host names</bridgehead>
			<para id="v152912367">If you need to add a mapping that &ProductName; did not automatically discover, you can add it manually. </para>
			<procedure id="v152912368">
				<title id="v152912369">To manually map host names</title>
				<step id="v152912370">
					<para id="v161602538">In the &ProductName; web UI, expand <guimenuitem>Security &gt; Host mappings</guimenuitem>.</para>
				</step>
				<step id="v152912372">
					<para id="v152912373">Click on the <guilabel>Hosts</guilabel> tab.</para>
				</step>
				<step id="v152912374">
					<para id="v152912375">Click <guimenuitem>Add shared or cluster mappings</guimenuitem>.</para>
					<para id="v152912376">For example, type the name of the virtual name of the cluster. Then click <guimenuitem>Add</guimenuitem> to choose the hosts to which you want to map that virtual name.</para>
				</step>
			</procedure>
		</section>
		<section id="v15490528" revision="09232024103157" vendor="referenced">
			<title id="v15490529">About backing up archive log files with the user exit program</title>
			<para id="v15490530">You can configure the user exit program to back up the archive logs. The user exit program is <command moreinfo="none">db2uext2</command> (UNIX) or <command moreinfo="none">db2uext2.exe</command> (Windows).</para>
			<itemizedlist id="v15490532">
				<title id="v15490533">The backup can be configured in one of the following ways:</title>
				<listitem id="v15490534">
					<para id="v15490535">Save archive log files directly with &nbuProductName;.</para>
					<para id="v15490536">To back up archive log files in this way, configure an MS-Windows or Standard policy with a User Backup schedule.</para>
					<para id="v15490537">
						<xref xreflabel="Configuring a policy to back up the archive logs" linkend="id-SF0A0192038" role="linkmoreinfo"/>
					</para>
					<para id="v15490539">Then specify the <command moreinfo="none">ARCFUNC SAVE</command> keywords in the configuration file <command moreinfo="none">db2.conf</command>.</para>
					<para id="v15490540">
						<xref xreflabel="Creating a db2.conf file for use with the user exit program" linkend="id-SF0A0157544" role="linkmoreinfo"/>
					</para>
				</listitem>
				<listitem id="v15490542">
					<para id="v15490543">Copy archive log files to another directory for later backup by &nbuProductName;.</para>
					<para id="v15490544">To back up archive log files in this way, configure an MS-Windows or Standard policy with a User Archive schedule (this schedule is optional).</para>
					<para id="v15490545">
						<xref xreflabel="Configuring a policy to back up the archive logs" linkend="id-SF0A0192038" role="linkmoreinfo"/>
					</para>
					<para id="v15490547">Specify the <command moreinfo="none">ARCFUNC COPY</command> keywords in the <command moreinfo="none">db2.conf</command> file.</para>
					<para id="v15490548">
						<xref xreflabel="Creating a db2.conf file for use with the user exit program" linkend="id-SF0A0157544" role="linkmoreinfo"/>
					</para>
					<para id="v15490550">You can coordinate the copy of the log files to a directory with a user archive. In this case, the user exit program copies the file to an archive directory. To free disk space, later you can perform a user archive to archive all the files in the <command moreinfo="none">ARCDIR</command> directory.</para>
				</listitem>
			</itemizedlist>
			<para id="v15490551">Do not specify <command moreinfo="none">ARCFUNC SAVE</command> or <command moreinfo="none">ARCFUNC COPY</command> if the <command moreinfo="none">VENDOR DB2</command> configuration parameter is in effect. In environments with <command moreinfo="none">VENDOR</command> in effect, &nbuProductName; ignores the information that pertains to these commands.</para>
			<para id="v15490552">Whether to specify <command moreinfo="none">ARCFUNC SAVE</command> or <command moreinfo="none">ARCFUNC COPY</command> depends on the amount of user intervention you intend to provide.</para>
			<itemizedlist id="v15490553">
				<title id="v15490554">Determine which command to use, as follows:</title>
				<listitem id="v15490555">
					<para id="v15490556">If you specify <command moreinfo="none">ARCFUNC SAVE</command>, &nbuProductName; backs up the archive logs according to the policy and schedule you specify.</para>
					<para id="v15490557">If DB2 later issues a <command moreinfo="none">ROLLFORWARD</command> request, the user exit program looks for the archive logs on a backup volume. At restoration time, no user intervention is required. The sequential recovery can be slow if there are numerous, large log files.</para>
				</listitem>
				<listitem id="v15490558">
					<para id="v15490559">If you specify <command moreinfo="none">ARCFUNC COPY</command>, &nbuProductName; copies the archive logs to the location that is specified on the <command moreinfo="none">ARCDIR</command> statement in the <command moreinfo="none">db2.conf</command> file.</para>
					<para id="v15490560">The disk to which the archive logs are copied eventually fills with archived log files. Most users want to configure a user archive schedule so they can archive the entire <command moreinfo="none">ARCDIR</command> directory to &nbuProductName; volumes.</para>
					<para id="v15490561">This method requires some user intervention during the recovery. Specifically, you must restore these files before the roll-forward operation. Advanced users prefer this approach because of the performance and the flexibility benefits.</para>
					<para id="v15490562">For information about how to restore files to disk, see the <ulink url="http://www.veritas.com/docs/DOC5332">&nbuProductName; Administrator's Guide, Volume I</ulink>.</para>
				</listitem>
			</itemizedlist>
			<section id="v15491454" revision="09232024103157">
				<title id="v15491455">DB2 objects in the backup window</title>
				<para id="v15491456">
					<xref xreflabel="DB2 database objects in the backup window" linkend="id-SF0A0164786" role="link"/> explains the DB2 object types displayed.</para>
				<table tabstyle="complex" id="id-SF0A0164786">
					<title id="v15491459">DB2 database objects in the backup window</title>
					<tgroup cols="2" id="v15491460">
						<colspec colnum="1" colwidth="1in"/>
						<colspec colnum="2" colwidth="*"/>
						<thead id="v15491463">
							<row id="v15491464">
								<entry>
									<para>Object</para>
								</entry>
								<entry>
									<para>Description</para>
								</entry>
							</row>
						</thead>
						<tbody id="v15491465">
							<row id="v15491466">
								<entry>
									<para>DB2 resource</para>
								</entry>
								<entry>
									<para>If &nbuProductName; for DB2 is detected on the client, the browser window displays the DB2 resource. This resource is the top-level DB2 object in the browser. <command moreinfo="none">DB2</command> is the DB2 resource.</para>
								</entry>
							</row>
							<row id="v15491467">
								<entry>
									<para>Instance</para>
								</entry>
								<entry>
									<para>The second-level object is a DB2 instance. An instance represents a collection of DB2 databases.</para>
								</entry>
							</row>
							<row id="v15491468">
								<entry>
									<para>Database</para>
								</entry>
								<entry>
									<para>You cannot select a database for backup directly, but by selecting all partitions below it, you can effectively select the whole database. If you select the database for backup, you cannot select other databases. If you select objects within the database, you cannot select objects within other databases at the same time.</para>
								</entry>
							</row>
							<row id="v15491469">
								<entry>
									<para>Partition</para>
								</entry>
								<entry>
									<para>The partition is the highest selectable DB2 object. A partition represents a collection of storage within a database in which tablespaces are stored. Partitions contain tablespaces and log folders. Within a database, you can select one or more partitions.</para>
									<para>DB2 EEE/DPF environments generally consist of multiple partitions. Other DB2 UDB environments consist of a single partition, which is usually represented as partition zero (0).</para>
									<para>The display includes only partitions that reside on the same &nbuProductName; client. It does not display other partitions on remote hosts. For more information, see the Caution that follows this table.</para>
								</entry>
							</row>
							<row id="v15491470">
								<entry>
									<para>Tablespace</para>
								</entry>
								<entry>
									<para>A tablespace is a logical entity representing a collection of physical storage containers. Tablespaces are comprised of containers, which represent database storage units. A tablespace is the lowest-level DB2 object that you can select in the browser.</para>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>
			<section id="id-SF0A0192038" revision="09232024103157">
				<title id="v15490564">Configuring a policy to back up the archive logs</title>
				<para id="v15490565">This topic describes how to create a policy to back up the &nbuProductName; DB2 archive log files directly to tape. Follow these instructions if you want to use the user exit program with the <command moreinfo="none">ARCFUNC SAVE</command> command.</para>
				<para id="v15490566">You do not need to perform this procedure if you use the <command moreinfo="none">VENDOR</command> method to back up your archive log files.</para>
				<procedure id="v15490567">
					<title id="v15490568">To configure a policy to back up the archive logs</title>
					<step performance="required" id="v15490571">
						<para id="v15490572">Open the &nbuProductName; web UI.</para>
					</step>
					<step performance="required" id="v15490575">
						<para id="v15490576">Create a new MS-Windows (Windows) or Standard (UNIX) policy type.</para>
					</step>
					<step performance="required" id="v15490577">
						<para id="v15490578">Specify the attributes for the policy.</para>
					</step>
					<step performance="required" id="v15490579">
						<para id="v15490580">On the <guilabel>Schedules</guilabel> tab, create a <guimenuitem moreinfo="none">User backup</guimenuitem> schedule.</para>
						<para id="v15490581">This schedule must encompass all of the time periods during which DB2 can call the user exit program.</para>
						<para id="v15490582">No backup selections list is necessary for this policy because it has a User backup schedule. It is not an automatic schedule.</para>
					</step>
					<step performance="required" id="v15490583">
						<para id="v15490584">On the <guilabel>Clients</guilabel> tab, add the clients you want to back up.</para>
						<itemizedlist id="v15490585">
							<title id="v15490586">The clients must have the following installed:</title>
							<listitem id="v15490587">
								<para id="v15490588">DB2</para>
							</listitem>
							<listitem id="v15490589">
								<para id="v15490590">&nbuProductName; DB2</para>
							</listitem>
						</itemizedlist>
						<para id="v15490591">If the client is installed in a &db; cluster, add the virtual host name to the client list.</para>
						<note id="v127757372">
							<para id="v127757373">If you installed &nbuProductName; on more than one node in the &db; cluster, you must perform additional configuration. You must approve each valid auto-discovered mapping that &nbuProductName; discovers in your environment.</para>
							<para id="v127757374">
								<xref xreflabel="Reviewing the auto-discovered mappings" linkend="v127366162" role="linkseeheading"/>
							</para>
						</note>
					</step>
					<step performance="required" id="v15490592">
						<para id="v15490593">Note the name of this policy.</para>
					</step>
					<step performance="required" id="v15490594">
						<para id="v15490595">When you configure the <command>db2.conf</command> file, specify the name of the policy you created in this procedure.</para>
						<para id="v15490596">
							<xref xreflabel="Creating a db2.conf file for use with the user exit program" linkend="id-SF0A0157544" role="linkmoreinfo"/>
						</para>
					</step>
				</procedure>
			</section>
			<section id="id-SF0A0118459" revision="09232024101244">
				<title id="v15490599">Configuring a policy to archive the archive logs</title>
				<para id="v15490600">This topic describes how to create a policy to archive the &nbuProductName; DB2 archive log entries in the <command moreinfo="none">ARCDIR</command> directory. Follow these instructions if you want to use the user exit program with the <command moreinfo="none">ARCFUNC COPY</command> command.</para>
				<para id="v15490601">When &nbuProductName; performs an archive, it deletes the online files after they are backed up successfully.</para>
				<para id="v15490602">For more information on user archive schedules, see the <ulink url="http://www.veritas.com/docs/DOC5332">&nbuProductName; Administrator's Guide, Volume I</ulink>.</para>
				<para id="v15490603">You do not need to perform this procedure if you use the <command moreinfo="none">VENDOR</command> method to back up your archive log files.</para>
				<procedure id="v15490604">
					<title id="v15490605">To configure a policy to back up the archive logs</title>
					<step performance="required" id="v15490608">
						<para id="v15490609">Start the &nbuProductName; web UI.</para>
					</step>
					<step performance="required" id="v15490612">
						<para id="v15490613">Create a new MS-Windows (Windows) or Standard (UNIX) policy type.</para>
					</step>
					<step performance="required" id="v15490614">
						<para id="v15490615">Specify the attributes for the policy.</para>
					</step>
					<step performance="required" id="v15490616">
						<para id="v15490617">On the <guilabel>Schedules</guilabel> tab, create a <guimenuitem moreinfo="none">User archive</guimenuitem> schedule.</para>
						<para id="v15490618">This schedule must encompass all of the time periods during which DB2 can call the user exit program.</para>
						<para id="v15490619">No backup selections list is necessary for this policy because it has a User archive schedule. It is not an automatic schedule.</para>
					</step>
					<step performance="required" id="v15490620">
						<para id="v15490621">Specify the clients to be backed up.</para>
						<itemizedlist id="v15490622">
							<title id="v15490623">The clients must have the following installed:</title>
							<listitem id="v15490624">
								<para id="v15490625">DB2</para>
							</listitem>
							<listitem id="v15490626">
								<para id="v15490627">&nbuProductName; for DB2</para>
							</listitem>
						</itemizedlist>
						<para id="v15490628">If the client is installed in a &db; cluster, add the virtual host name to the client list.</para>
						<note id="v127757376">
							<para id="v127757377">If you installed &nbuProductName; on more than one node in the &db; cluster, you must perform additional configuration. You must approve each valid auto-discovered mapping that &nbuProductName; discovers in your environment.</para>
							<para id="v127757378">
								<xref xreflabel="Reviewing the auto-discovered mappings" linkend="v127366162" role="linkseeheading"/>
							</para>
						</note>
					</step>
				</procedure>
			</section>
		</section>
		<section id="id-SF0A0196418" revision="09232024103157" vendor="referenced">
			<title id="v15491310">Configuring the run-time environment</title>
			<para id="v15491311">Configuring the run-time environment consists of creating a <command moreinfo="none">db2.conf</command> file for a standard environment as well as a cluster environment. It also shows the environment variables that &nbuProductName; creates.</para>
			<para id="v59143137">
				<xref xreflabel="Creating a db2.conf file for use with the user exit program" linkend="id-SF0A0157544" role="linkmoreinfo"/>
			</para>
			<para id="v59143143">
				<xref xreflabel="Creating a db2.conf file (vendor method)" linkend="v15491397" role="linkmoreinfo"/>
			</para>
			<section id="id-SF0A0157544" revision="09232024103157">
				<title id="v15491313">Creating a db2.conf file for use with the user exit program</title>
				<para id="v15491314">The &nbuProductName; for DB2 configuration file <command moreinfo="none">db2.conf</command>, consists of a series of keywords and values. This file defines how to back up the database and the archive logs. It must be created on each &nbuProductName; for DB2 client.</para>
				<para id="v15491315">The installation package installed a file named <command moreinfo="none">db2.conf</command> that you can customize. The following procedures show you how to customize this file. Follow the instructions in this section if you use the user exit program to perform backups.</para>
				<procedure id="v15491316">
					<title id="v15491317">To create a db2.conf file for use with the user exit program</title>
					<step performance="required" id="v15491318">
						<para id="v15491319">Before you create the <command moreinfo="none">db2.conf</command> file, you need to create the policies to back up the archive logs and the configuration files.</para>
						<para id="v15491320">
							<xref xreflabel="Configuring a policy to back up the archive logs" linkend="id-SF0A0192038" role="linkmoreinfo"/>
						</para>
						<para id="v15491322">
							<xref xreflabel="Configuring a policy to archive the archive logs" linkend="id-SF0A0118459" role="linkmoreinfo"/>
						</para>
						<para id="v15491324">
							<xref xreflabel="Configuring a policy to back up the configuration files" linkend="id-SF0A0142613" role="linkmoreinfo"/>
						</para>
					</step>
					<step performance="required" id="v15491326">
						<para id="v15491327">Log on to a client computer.</para>
					</step>
					<step performance="required" id="v15491328">
						<para id="v15491329">Copy the sample <command moreinfo="none">db2.conf</command> file from its location in the sample directory to its active location.</para>
						<para id="v15491330">Its location in the sample directory is as follows:</para>
						<para id="v54271823">Windows: <command>
								<replaceable>install_path</replaceable>\NetBackup\dbext\db2\samples</command>
						</para>
						<para id="v54271822">UNIX: <command>/usr/openv/netbackup/ext/db_ext/db2/scripts</command>
						</para>
						<para id="v15491333">The active location for the <command moreinfo="none">db2.conf</command> file is as follows:</para>
						<para id="v54271825">Windows: <command>
								<replaceable>install_path</replaceable>\NetBackup\dbext\db2\db2.conf</command>
						</para>
						<para id="v54271824">UNIX: <command>$DB2_Instance_Home/db2.conf</command>
						</para>
					</step>
					<step performance="required" id="v15491336">
						<para id="v15491337">In the <command moreinfo="none">db2.conf</command> file, create an object identifier for backing up the database.</para>
						<para id="v15491338">This object identifier starts with the following keyword lines:</para>
						<programlisting format="linespecific" id="v15491339">DATABASE SAMPLE
OBJECTTYPE DATABASE
...</programlisting>
					</step>
					<step performance="required" id="v15491340">
						<para id="v15491341">In the <command moreinfo="none">db2.conf</command> file, create an object identifier for backing up the archive logs.</para>
						<itemizedlist id="v15491342">
							<title id="v15491343">The form depends on how the archive logs are backed up, as follows:</title>
							<listitem id="v15491344">
								<para id="v15491345">If you use <command moreinfo="none">ARCFUNC SAVE</command>:</para>
								<programlisting format="linespecific" id="v15491346">DATABASE SAMPLE
OBJECTTYPE ARCHIVE
</programlisting>
								<programlisting format="linespecific" id="v15491347">POLICY WIN_TYPE_POL_LOGPOL # an MS-Windows-NT type policy
</programlisting>
								<programlisting format="linespecific" id="v15491348">POLICY STD_TYPE_POL_LOGPOL # a standard UNIX type policy
</programlisting>
								<programlisting format="linespecific" id="v15491349">SCHEDULE USER_BACKUP_SCHED_LOGSCHED
</programlisting>
								<para id="v15491350">In the <command moreinfo="none">POLICY</command> line, specify the name of the MS-Windows or Standard policy for backing up the archive logs.</para>
								<para id="v15491351">In the <command moreinfo="none">SCHEDULE</command> line, specify the User Backup schedule that you created earlier for backing up the archive logs.</para>
								<para id="v15491367">
									<xref xreflabel="Example db2.conf file using ARCFUNC SAVE" linkend="id-SF0A0196693" role="linkmoreinfo"/>
								</para>
							</listitem>
							<listitem id="v15491352">
								<para id="v15491353">If you use <command moreinfo="none">ARCFUNC COPY</command>:</para>
								<programlisting format="linespecific" id="v15491354">DATABASE SAMPLE
OBJECTTYPE ARCHIVE</programlisting>
								<programlisting format="linespecific" id="v15491355">Windows: ARCDIR C:\MyLogs\arcdir\
RETDIR C:\MyLogs\arcdir\</programlisting>
								<programlisting format="linespecific" id="v15491356">UNIX: ARCDIR /home/db2inst1/arcdir
RETDIR /home/db2inst1/arcdir</programlisting>
								<remark id="v97212532">Is the "Windows:" or "UNIX:" needed to accomplish the command? We don&apos;t want the user to copy these items thinking it is part of the command. Suggest splitting into a Windows: and UNIX: example. It will make the manual 1 page longer but it will clean up the examples.</remark>
								<para id="v15491357">In the <command moreinfo="none">ARCDIR</command> line, specify the full path to the location of the archive logs.</para>
								<para id="v15491358">In the <command moreinfo="none">RETDIR</command> line, specify the full path to the location from which the archive logs are retrieved. Typically, the <command moreinfo="none">RETDIR</command> location is the same as the <command moreinfo="none">ARCDIR</command> location.</para>
							</listitem>
						</itemizedlist>
						<para id="v15491369">
							<xref xreflabel="Example db2.conf file using ARCFUNC COPY" linkend="id-SF0A0185477" role="linkmoreinfo"/>
						</para>
					</step>
					<step performance="required" id="v15491359">
						<para id="v15491360">You may need to add other entries to the <command moreinfo="none">db2.conf</command> file.</para>
						<para id="v15491361">
							<xref xreflabel="Keywords for the db2.conf file" linkend="id-SF0A0175998" role="linkmoreinfo"/>
						</para>
					</step>
					<step performance="required" id="v15491363">
						<para id="v15491364">Save and close the <command moreinfo="none">db2.conf</command> file.</para>
					</step>
					<step performance="required" id="v15491365">
						<para id="v15491366">Repeat this procedure on each client computer.</para>
					</step>
				</procedure>
				<section id="id-SF0A0196693" revision="09232024103157">
					<title id="v15491372">Example db2.conf file using ARCFUNC SAVE</title>
					<para id="v15491373">Assume that you need to back up a database named <command moreinfo="none">SAMPLE</command> and its archive logs. <command moreinfo="none">USEREXIT</command> is enabled for database <command moreinfo="none">SAMPLE</command>. The policies for the database <command moreinfo="none">SAMPLE</command> include the required schedules for the backups.</para>
					<itemizedlist id="v15491374">
						<title id="v15491375">The policies are as follows:</title>
						<listitem id="v15491376">
							<para id="v15491377">The <command moreinfo="none">DB2_DB_Policy</command> backs up the database. This policy has an application backup schedule and an automatic backup schedule. The first definition in the example <command moreinfo="none">db2.conf</command> file specifies this policy and its application backup schedule, which is named <command moreinfo="none">Default-Application-Backup</command>. The automatic backup schedule is not specified in <command moreinfo="none">db2.conf</command>.</para>
						</listitem>
						<listitem id="v15491378">
							<para id="v15491379">The <command moreinfo="none">DB2_Log_Policy</command> backs up the archive logs. This policy has a user backup schedule named <command moreinfo="none">User</command>. The second entry in the example file specifies this policy and its user backup schedule.</para>
							<programlisting id="v33751880">DATABASE SAMPLE
OBJECTTYPE DATABASE
POLICY DB2_DB_Policy
SCHEDULE Default-Application-Backup
ENDOPER

DATABASE SAMPLE
OBJECTTYPE ARCHIVE
POLICY DB2_Log_Policy
SCHEDULE User
ARCFUNC SAVE
#ARCFUNC COPY

#ARCDIR C:\MyLogs\arcdir\
#RETDIR C:\MyLogs\arcdir\

#ARCDIR /home/db2inst1/arcdir
#RETDIR /home/db2inst1/arcdir

ENDOPER</programlisting>
						</listitem>
					</itemizedlist>
				</section>
				<section id="id-SF0A0185477" revision="09232024103157">
					<title id="v15491385">Example db2.conf file using ARCFUNC COPY</title>
					<para id="v15491386">Assume that you need to back up a database named <command moreinfo="none">SAMPLE</command> and its archive logs. <command moreinfo="none">USEREXIT</command> is enabled for database <command moreinfo="none">SAMPLE</command>. The policies for the database <command moreinfo="none">SAMPLE</command> include the required schedules for the backups.</para>
					<itemizedlist id="v15491387">
						<title id="v15491388">The policies are as follows:</title>
						<listitem id="v15491389">
							<para id="v15491390">The <command moreinfo="none">DB2_DB_Policy</command> backs up the database. This policy has an application backup schedule and an automatic backup schedule. The first definition in the example <command moreinfo="none">db2.conf</command> file specifies this policy and its application backup schedule, which is named <command moreinfo="none">Default-Application-Backup</command>. The automatic backup schedule is not specified in <command moreinfo="none">db2.conf</command>.</para>
						</listitem>
						<listitem id="v15491391">
							<para id="v15491392">The <command moreinfo="none">ARCFUNC COPY</command> command copies the archive logs to the <command moreinfo="none">ARCDIR</command> directory.</para>
							<programlisting id="v33751881">DATABASE SAMPLE
OBJECTTYPE DATABASE
POLICY DB2_DB_Policy
SCHEDULE Default-Application-Backup
ENDOPER

DATABASE SAMPLE
OBJECTTYPE ARCHIVE
#POLICY DB2_Log_Policy
#SCHEDULE User
#ARCFUNC SAVE
ARCFUNC COPY

ARCDIR C:\MyLogs\arcdir\
RETDIR C:\MyLogs\arcdir\

ARCDIR /home/db2inst1/arcdir
RETDIR /home/db2inst1/arcdir

ENDOPER</programlisting>
						</listitem>
					</itemizedlist>
				</section>
			</section>
			<section id="v15491397" revision="09232024103157">
				<title id="v15491398">Creating a db2.conf file (vendor method)</title>
				<para id="v15491399">The &nbuProductName; for DB2 configuration file <command moreinfo="none">db2.conf</command> consists of a series of keywords and values. This file defines how to back up the database and the archive logs. It must be created on each &nbuProductName; for DB2 client.</para>
				<para id="v15491400">The installation package installed a file named <command moreinfo="none">db2.conf</command> that you can customize. The following procedures show you how to customize this file. Follow the instructions in this section if you use the vendor method to perform backups.</para>
				<procedure id="v15491401">
					<title id="v15491402">To create a db2.conf file for use with the vendor method</title>
					<step performance="required" id="v15491403">
						<para id="v15491404">Before you create the <filename>db2.conf</filename> file, you need to create the policies to back up the configuration files.</para>
						<para id="v15491405">
							<xref xreflabel="Configuring a policy to back up the configuration files" linkend="id-SF0A0142613" role="linkmoreinfo"/>
						</para>
					</step>
					<step performance="required" id="v15491407">
						<para id="v15491408">Log into a client computer.</para>
					</step>
					<step performance="required" id="v15491409">
						<para id="v15491410">Copy the sample <command moreinfo="none">db2.conf</command> file from its location in the sample directory to its active location.</para>
						<para id="v15491411">Its location in the sample directory is as follows:</para>
						<para id="v54271827">Windows: <command>
								<replaceable>install_path</replaceable>\NetBackup\dbext\db2\samples</command>
						</para>
						<para id="v54271826">UNIX: <command>/usr/openv/netbackup/ext/db_ext/db2/scripts</command>
						</para>
						<para id="v54271828">The active location for the <command moreinfo="none">db2.conf</command> file is as follows:</para>
						<para id="v54271830">Windows: <command>
								<replaceable>install_path</replaceable>\NetBackup\dbext\db2\db2.conf</command>
						</para>
						<para id="v54271829">UNIX: <command>$DB2_Instance_Home/db2.conf</command>
						</para>
					</step>
					<step performance="required" id="v15491417">
						<para id="v15491418">In the <command moreinfo="none">db2.conf</command> file, create an object identifier for backing up the database.</para>
						<para id="v15491419">This object identifier starts with the following keyword lines:</para>
						<programlisting format="linespecific" id="v15491420">DATABASE SAMPLE
OBJECTTYPE DATABASE
. . .</programlisting>
					</step>
					<step performance="required" id="v15491421">
						<para id="v15491422">In the <command moreinfo="none">db2.conf</command> file, create an object identifier for backing up the archive logs.</para>
						<programlisting format="linespecific" id="v15491423">DATABASE SAMPLE
OBJECTTYPE ARCHIVE
POLICY DB2_TYPE_POL_LOGPOL # a DB2 type policy
SCHEDULE DEFAULT-APPLICATION-BACKUP</programlisting>
						<para id="v15491424">In the <command moreinfo="none">POLICY</command> line, specify the name of a DB2 policy. This policy can be the same policy that you use to back up the database.</para>
						<para id="v15491425">In the <command moreinfo="none">SCHEDULE</command> line, specify a Default-Application-Backup schedule.</para>
					</step>
					<step performance="required" id="v15491426">
						<para id="v15491427">You may need to add other entries to the <command moreinfo="none">db2.conf</command> file.</para>
						<para id="v15491428">
							<xref xreflabel="Keywords for the db2.conf file" linkend="id-SF0A0175998" role="linkmoreinfo"/>
						</para>
					</step>
					<step performance="required" id="v15491430">
						<para id="v15491431">Save and close the <command moreinfo="none">db2.conf</command> file.</para>
					</step>
					<step performance="required" id="v15491432">
						<para id="v15491433">Repeat this procedure on each client computer.</para>
						<para id="v15491434">
							<xref xreflabel="Example db2.conf file (vendor method)" linkend="id-SF0A0198294" role="linkmoreinfo"/>
						</para>
					</step>
				</procedure>
				<section id="id-SF0A0198294" revision="09232024103157">
					<title id="v15491437">Example db2.conf file (vendor method)</title>
					<para id="v15491438">Assume that you need to back up a database named <command moreinfo="none">SAMPLE</command> and its archive logs. The <command moreinfo="none">VENDOR</command> method is enabled for database <command moreinfo="none">SAMPLE</command>. The policies for the database <command moreinfo="none">SAMPLE</command> specify the required schedules for the backups.</para>
					<itemizedlist id="v15491439">
						<title id="v15491440">The policies are as follows:</title>
						<listitem id="v15491441">
							<para id="v15491442">The <command moreinfo="none">DB2_DB_Policy</command> backs up the database. This policy has an application backup schedule and an automatic backup schedule. The first definition in the example <command moreinfo="none">db2.conf</command> file specifies this policy and its application backup schedule, which is named <command moreinfo="none">Default-Application-Backup</command>. The automatic backup schedule is not specified in <command moreinfo="none">db2.conf</command>.</para>
						</listitem>
						<listitem id="v15491443">
							<para id="v15491444">The <command moreinfo="none">DB2_ARCH_Policy</command> backs up the archive logs. This policy has an application backup schedule named <command moreinfo="none">Default-Application-Backup</command>. The third entry in the example file specifies this policy and its application backup schedule.</para>
						</listitem>
					</itemizedlist>
					<programlisting id="v15491445">DATABASE SAMPLE
OBJECTTYPE DATABASE
POLICY DB2_DB_Policy
SCHEDULE Default-Application-Backup
ENDOPER
 
#DATABASE SAMPLE
#OBJECTTYPE ARCHIVE
#POLICY DB2_Log_Policy
#SCHEDULE User
#ARCFUNC SAVE
#ARCFUNC COPY
#ARCDIR /home/db2inst1/arcdir
#RETDIR /home/db2inst1/arcdir
#ENDOPER

DATABASE SAMPLE
OBJECTTYPE ARCHIVE
POLICY DB2_ARCH_Policy
SCHEDULE Default-Application-Backup
ENDOPER
</programlisting>
				</section>
			</section>
			<section id="v15492032" revision="09232024103157">
				<title id="v15492033">Configuring bp.conf files in a cluster environment</title>
				<para id="v15492034">If you configure &nbuProductName; for DB2 in a cluster environment, you need to create the &nbuProductName; <command moreinfo="none">bp.conf</command> files in multiple places.</para>
				<itemizedlist id="v15492035">
					<title id="v15492036">Create the file in the following places:</title>
					<listitem id="v15492037">
						<para id="v15492038">In <command moreinfo="none">/usr/openv/netbackup/bp.conf</command> on the physical client host. This file is the primary <command moreinfo="none">bp.conf</command> configuration file.</para>
					</listitem>
					<listitem id="v15492039">
						<para id="v15492040">In the DB2 user's home directory on each virtual host.</para>
					</listitem>
				</itemizedlist>
				<para id="v15492041">&nbuProductName; searches for the <command moreinfo="none">bp.conf</command> file in the DB2 user's home directory first. Specifications in the user <command moreinfo="none">bp.conf</command> file override those in the primary <command moreinfo="none">bp.conf</command> file.</para>
				<section id="v15492042" revision="09232024103157">
					<title id="v15492043">Configuring a primary bp.conf file</title>
					<para id="v15492044">The following procedures explain how to create a primary <command moreinfo="none">bp.conf</command> file on the physical client host. This file allows other backups to be performed on the host.</para>
					<procedure id="v15492045">
						<title id="v15492046">To create a system-wide primary bp.conf file</title>
						<step performance="required" id="v15492047">
							<para id="v15492048">Log on to the physical host.</para>
						</step>
						<step performance="required" id="v15492049">
							<para id="v15492050">Open the <command moreinfo="none">bp.conf</command> file in the <command moreinfo="none">/usr/openv/netbackup</command> directory.</para>
						</step>
						<step performance="required" id="v15492051">
							<para id="v15492052">Set the <command moreinfo="none">CLIENT_NAME</command> entry to the physical host name of the &ProductName; for DB2 client. This action allows other backups to be performed on the host.</para>
							<para id="v15492053">For example:</para>
							<programlisting format="linespecific" id="v15492054">CLIENT_NAME=<replaceable>client_name</replaceable>
							</programlisting>
						</step>
						<step performance="required" id="v15492055">
							<para id="v15492056">Save and close the <command moreinfo="none">bp.conf</command> file.</para>
						</step>
					</procedure>
					<para id="v55142873">
						<xref xreflabel="Configuring bp.conf files in a cluster environment" linkend="v15492032" role="linkmoreinfo"/>
					</para>
				</section>
				<section id="v15492057" revision="09232024103157">
					<title id="v15492058">Configuring a user bp.conf file</title>
					<para id="v15492059">&nbuProductName; options in the <command moreinfo="none">bp.conf</command> file of the home directory of the DB2 instance owner take precedence over the same options in the primary <command moreinfo="none">bp.conf</command> file. The following procedure explains how to create a <command moreinfo="none">bp.conf</command> file on the virtual machine that owns the DB2 instance.</para>
					<procedure id="v15492060">
						<title id="v15492061">To create a system bp.conf file on the virtual host</title>
						<step performance="required" id="v15492062">
							<para id="v15492063">Log on to the computer that owns the DB2 instance.</para>
						</step>
						<step performance="required" id="v15492064">
							<para id="v15492065">Open the file <command moreinfo="none">$DB2_INSTANCE_HOME/bp.conf</command>.</para>
						</step>
						<step performance="required" id="v15492066">
							<para id="v15492067">Add a line that sets the <command moreinfo="none">CLIENT_NAME</command> entry to the virtual name of the DB2 instance.</para>
							<para id="v15492068">For example:</para>
							<programlisting format="linespecific" id="v15492069">CLIENT_NAME=<replaceable>client_name</replaceable>
							</programlisting>
						</step>
						<step performance="required" id="v15492070">
							<para id="v15492071">Save and close the <command moreinfo="none">bp.conf</command> file.</para>
						</step>
					</procedure>
					<para id="v55142879">
						<xref xreflabel="Configuring bp.conf files in a cluster environment" linkend="v15492032" role="linkmoreinfo"/>
					</para>
				</section>
			</section>
			<section id="id-SF0A0175998" revision="09232024103157">
				<title id="v15491610">Keywords for the db2.conf file</title>
				<para id="v15491611">The <command moreinfo="none">db2.conf</command> file provides definitions &ProductName; uses to perform DB2 backup and restore operations.</para>
				<itemizedlist id="v104991811">
					<listitem id="v104991812">
						<para id="v104991813">Each definition is a grouping of keyword value pairs.</para>
					</listitem>
					<listitem id="v104991814">
						<para id="v104991815">Each definition contains an <command>OBJECTTYPE</command> keyword and value.</para>
					</listitem>
					<listitem id="v104991816">
						<para id="v104991817">Each definition ends with the <command>ENDOPER</command> keyword.</para>
					</listitem>
					<listitem id="v104991818">
						<para id="v104991819">All other keyword value pairs are optional, depending on the <command>OBJECTTYPE</command>.</para>
					</listitem>
					<listitem id="v104991820">
						<para id="v104991821">Within a definition, the <replaceable>keyword value</replaceable> pairs can appear in any order.</para>
					</listitem>
					<listitem id="v104991822">
						<para id="v104991823">The keywords are not case-sensitive, but the values are case-sensitive.</para>
					</listitem>
					<listitem id="v104991824">
						<para id="v104991825">When a pound character (#) appears in the first column, the line is treated as a comment.</para>
					</listitem>
					<listitem id="v104991826">
						<para id="v104991827">Backup and restore operations have two definitions, one for <command>OBJECTTYPE DATABASE</command> or <command>TABLESPACE</command> and one for <command>OBJECTTYPE ARCHIVE</command>.</para>
					</listitem>
					<listitem id="v104991828">
						<para id="v104991829">Restore operations to a different instance or database (not the original) must also have a definition for <command>OBJECTTYPE ALTERNATE</command>.</para>
					</listitem>
					<listitem id="v104991830">
						<para id="v104991831">&ProductName; searches the file from top to bottom and uses the first definition that is found for the operation being performed. Later definitions for the same operation are ignored.</para>
					</listitem>
					<listitem id="v104991832">
						<para id="v104991833">&ProductName; searches each definition from top to bottom and uses the first <replaceable>value</replaceable> specified for each <replaceable>keyword</replaceable> found. Later definitions for the same <replaceable>keyword</replaceable> are ignored.</para>
					</listitem>
				</itemizedlist>
				<para id="v15491641">The <command moreinfo="none">db2.conf</command> file specifies the keywords that are described in this topic. If <command moreinfo="none">LOGARCHMETH1 VENDOR</command> is configured in your DB2 environment, &ProductName; for DB2 ignores the following keywords.</para>
				<itemizedlist id="v15491642">
					<title id="v15491643">The following keywords:</title>
					<listitem id="v15491644">
						<para id="v15491645">
							<command moreinfo="none">ARCDIR</command>
						</para>
					</listitem>
					<listitem id="v15491646">
						<para id="v15491647">
							<command moreinfo="none">ARCFUNC SAVE</command>
						</para>
					</listitem>
					<listitem id="v15491648">
						<para id="v15491649">
							<command moreinfo="none">ARCFUNC COPY</command>
						</para>
					</listitem>
					<listitem id="v15491650">
						<para id="v15491651">
							<command moreinfo="none">PARTITIONTYPE RAW</command>
						</para>
					</listitem>
					<listitem id="v15491652">
						<para id="v15491653">
							<command moreinfo="none">RETDIR</command>
						</para>
					</listitem>
				</itemizedlist>
				<para id="v15491654">
					<xref xreflabel="Keyword value pairs for the db2.conf file" linkend="id-SF0A0120826" role="link"/> describes the keywords and values that are used.</para>
				<table tabstyle="complex" id="id-SF0A0120826">
					<title id="v15491657">Keyword value pairs for the db2.conf file</title>
					<tgroup cols="2" id="v15491658">
						<colspec colname="col0" colnum="1" colwidth="1.5in"/>
						<colspec colname="col1" colnum="2" colwidth="*"/>
						<thead id="v15491661">
							<row id="v15491662">
								<entry>
									<para>Keyword value</para>
								</entry>
								<entry>
									<para>Description</para>
								</entry>
							</row>
						</thead>
						<tbody id="v15491663">
							<row id="v15491664">
								<entry>
									<programlisting format="linespecific">
ARCDIR <replaceable>dir</replaceable>
									</programlisting>
								</entry>
								<entry>
									<para>Full path to the location of the archive logs. No default.</para>
									<para>Required if <command moreinfo="none">ARCFUNC COPY</command> is also specified.</para>
									<note>
										<para>Ignored for <command>LOGARCHMETH1 VENDOR</command>.</para>
									</note>
								</entry>
							</row>
							<row id="v15491665">
								<entry>
									<programlisting format="linespecific">
ARCFUNC SAVE
ARCFUNC COPY
</programlisting>
								</entry>
								<entry>
									<para>
										<command moreinfo="none">ARCFUNC SAVE</command> saves archive logs to/from &nbuProductName;.</para>
									<para>
										<command moreinfo="none">ARCFUNC COPY</command> copies archive logs to/from <command moreinfo="none">ARCDIR/RETDIR</command> directories.</para>
									<para>You must specify either <command moreinfo="none">ARCFUNC SAVE</command> or <command moreinfo="none">ARCFUNC COPY</command> if <command moreinfo="none">OBJECTTYPE ARCHIVE</command> is also specified.</para>
									<note>
										<para>Ignored for <command>LOGARCHMETH1 VENDOR</command>.</para>
									</note>
								</entry>
							</row>
							<row id="v147321460">
								<entry>
									<programlisting>CATALOG_HOST</programlisting>
								</entry>
								<entry>
									<para>The catalog name under which backup images are cataloged. </para>
								</entry>
							</row>
							<row id="v105191303">
								<entry>
									<para>For UNIX: <command>BKUP_IMAGE_PERM</command>
									</para>
								</entry>
								<entry>
									<para>Lets you set the permissions on a backup image at backup time. Possible values are the following:</para>
									<itemizedlist>
										<listitem>
											<para>
												<command>USER</command> - set the permissions to 600. Only the original user who backed up the data has access to the backup images. </para>
										</listitem>
										<listitem>
											<para>
												<command>GROUP</command> - set the permissions to 660. Anyone from the same group as the original user who backed up the data has access to the backup images. </para>
										</listitem>
										<listitem>
											<para>
												<command>ANY</command> - set the permissions to 664. Anyone has access to the backup images. </para>
										</listitem>
									</itemizedlist>
									<para>If this variable is not specified, the permissions default to 660.</para>
									<para>Does not apply to backups by the user exit program, normal file system permissions are used. If you use <command>LOGARCHMETH1 VENDOR</command>, you can use the new keyword in the <filename>db2.conf</filename> or specify the keyword in the <command>LOGARCHOPT1</command> parameter in the database configuration.</para>
								</entry>
							</row>
							<row id="v26803506">
								<entry>
									<programlisting>CLIENT_NAME<replaceable>client_name</replaceable>
									</programlisting>
								</entry>
								<entry>
									<para>An alternate client name. Most commonly used to specify a different source client to use for alternate restores. May also be used on multi-homed client hosts to specify a host name that is associated with a specific local network interface. This host name can be different from the host name that is used for file system backups.</para>
								</entry>
							</row>
							<row id="v15491666">
								<entry>
									<para>
										<command moreinfo="none">DATABASE <replaceable>db_name</replaceable>
										</command>
									</para>
								</entry>
								<entry>
									<para>DB2 database name. No default. Required for all definitions except <command>OBJECTTYPE ALTERNATE</command>.</para>
								</entry>
							</row>
							<row id="v105191361">
								<entry colname="col0">
									<para>
										<command>DB2_COPY_NUMBER</command>
									</para>
								</entry>
								<entry colname="col1">
									<para>Allows the user to explicitly specify the copy number to be used to perform restores.</para>
								</entry>
							</row>
							<row id="v105191362">
								<entry>
									<para>
										<command>DB2_MEDIA_SERVER</command>
									</para>
								</entry>
								<entry>
									<para>Allows the user to explicitly specify the media server to be used to perform restores. The media server must have access to the copy of the image from which the restore occurs.</para>
								</entry>
							</row>
							<row id="v15491667">
								<entry>
									<programlisting format="linespecific">
DESTALIAS <replaceable>db_name</replaceable>
DESTINST <replaceable>inst_name</replaceable>
									</programlisting>
								</entry>
								<entry>
									<para>
										<command moreinfo="none">DESTALIAS</command> specifies the database alias name of the destination database for an alternate restore.</para>
									<para>
										<command moreinfo="none">DESTINST</command> specifies the instance name of the destination instance for an alternate restore.</para>
									<para>No default. Required for <command>OBJECTTYPE ALTERNATE</command>.</para>
								</entry>
							</row>
							<row id="v15491668">
								<entry>
									<para>
										<command moreinfo="none">ENDOPER</command>
									</para>
								</entry>
								<entry>
									<para>Signals the end of a definition. Required at the end of each definition.</para>
								</entry>
							</row>
							<row id="v122274992">
								<entry>
									<para>
										<command>FORCE_BACKUP_CLIENT</command>
									</para>
								</entry>
								<entry>
									<para>The local client name. The client name is needed when DB2 performs an archive backup immediately following an alternate restore from another client. This client name allows the backup to be taken using the correct client name for the local host. The <command>CLIENT_NAME</command> still references the source client that is used to select the backup images that the restore needs.</para>
								</entry>
							</row>
							<row id="v15491669">
								<entry>
									<para>
										<command moreinfo="none">NODE <replaceable>number</replaceable>
										</command>
									</para>
								</entry>
								<entry>
									<para>Specifies the DB2 node number that must match the local node in order for the other keywords and values to be used. Do not specify this keyword unless you operate within a DB2 Enterprise Extended Edition (EEE) environment. Not required. No default.</para>
								</entry>
							</row>
							<row id="v15491670">
								<entry>
									<programlisting format="linespecific">
OBJECTTYPE ALTERNATE
OBJECTTYPE ARCHIVE
OBJECTTYPE DATABASE
OBJECTTYPE TABLESPACE
</programlisting>
								</entry>
								<entry>
									<para>Specify <command moreinfo="none">OBJECTTYPE ALTERNATE</command> to indicate that the definition pertains to performing a restore from an alternate instance or alternate database.</para>
									<para>Specify <command moreinfo="none">OBJECTTYPE DATABASE</command> or <command moreinfo="none">OBJECTTYPE TABLESPACE</command> for database container backup or restore. Specify <command moreinfo="none">OBJECTTYPE ARCHIVE</command> for archive log backup or restore.</para>
									<para>One of <command moreinfo="none">OBJECTTYPE ALTERNATE</command>, <command moreinfo="none">OBJECTTYPE ARCHIVE</command>, <command moreinfo="none">OBJECTTYPE DATABASE</command>, or <command moreinfo="none">OBJECTTYPE TABLESPACE</command> is required in all <command moreinfo="none">db2.conf</command> files. <command moreinfo="none">OBJECTTYPE ALTERNATE</command> is required only if you want to perform an alternate restore.</para>
								</entry>
							</row>
							<row id="v15491671">
								<entry>
									<para>
										<command moreinfo="none">PARTITIONTYPE RAW</command>
									</para>
								</entry>
								<entry>
									<para>Specifies the &ProductName; search for the archive log files that are backed up from a raw partition during a restore. Not Required. For the <command moreinfo="none">POLICY</command>, specify the name of a DB2 policy. This policy can be the same as the one that you use to back up the database. In the <command moreinfo="none">SCHEDULE</command> line, specify an Application Backup schedule.</para>
								</entry>
							</row>
							<row id="v15491672">
								<entry>
									<para>
										<command moreinfo="none">POLICY <replaceable>pol_name</replaceable>
										</command>
									</para>
								</entry>
								<entry>
									<para>The name of a &ProductName; policy. If not specified, &nbuProductName; uses the first policy of the correct type that is found in the configuration on the &nbuProductName; primary server.</para>
									<para>The policy should be of type DB2 unless the definition is <command moreinfo="none">OBJECTTYPE ARCHIVE</command> for use with the user exit program and <command moreinfo="none">ARCFUNC SAVE</command>. In that case it should be of type MS-Windows or Standard.</para>
									<para>Does not apply to <command>OBJECTTYPE ALTERNATE</command>. Should be specified for all other definitions.</para>
								</entry>
							</row>
							<row id="v105191363">
								<entry>
									<para>
										<command>RESTORE_PRIORITY</command>
									</para>
								</entry>
								<entry>
									<para>Specifies the restore priority in &nbuProductName;.</para>
								</entry>
							</row>
							<row id="v15491673">
								<entry>
									<para>
										<command>RETDIR <replaceable>dir</replaceable>
										</command>
									</para>
								</entry>
								<entry>
									<para>Full path to the location from which the archive logs are retrieved. No default.</para>
									<para>Required if <command moreinfo="none">ARCFUNC COPY</command> is also specified.</para>
								</entry>
							</row>
							<row id="v15491674">
								<entry>
									<para>
										<command moreinfo="none">SCHEDULE <replaceable>sched_name</replaceable>
										</command>
									</para>
								</entry>
								<entry>
									<para>&ProductName; schedule name in the policy. The default is the first schedule of the correct type in the policy.</para>
									<para>The schedule should be of type Application Backup unless the definition is <command>OBJECTTYPE ARCHIVE</command> for use with the user exit program and <command>ARCFUNC SAVE</command>. In that case it should be of type User Backup.</para>
									<para>Does not apply to <command>OBJECTTYPE ALTERNATE</command>.</para>
								</entry>
							</row>
							<row id="v105191364">
								<entry>
									<para>
										<command>SERVER</command>
									</para>
								</entry>
								<entry>
									<para>Name of the &ProductName; primary server.</para>
								</entry>
							</row>
							<row id="v15491675">
								<entry>
									<programlisting format="linespecific">
SRCALIAS <replaceable>src_db_name</replaceable>
SRCINST <replaceable>src_inst_name</replaceable>
									</programlisting>
								</entry>
								<entry>
									<para>
										<command moreinfo="none">SRCALIAS</command> specifies the database alias name of the source database for an alternate restore.</para>
									<para>
										<command moreinfo="none">SRCINST</command> specifies the instance name of the source instance for an alternate restore.</para>
									<para>No defaults. Required for <command>OBJECTTYPE ALTERNATE</command>.</para>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>
			<section id="v15491561" revision="09232024103157">
				<title id="v15491562">&nbuProductName; for DB2 environment variables</title>
				<para id="v15491563">The &ProductName; automatic scheduler creates the environment variables in the following table when it runs a &ProductName; for DB2 backup or restore script. You can use the <command moreinfo="none">DB2_FULL</command>, <command moreinfo="none">DB2_INCR</command>, or <command moreinfo="none">DB2_CINC</command> variables within a script to specify a backup type.</para>
				<note id="v15491564">
					<para id="v15491565">Only the &ProductName; backup and restore scripts use the environment variables in the following table. These variables are unknown to the DB2 backup and restore commands. For example, the backup command and the restore command do not process the <command moreinfo="none">DB2_POLICY</command> variable. Instead, the scripts use the <command moreinfo="none">POLICY</command> name. This policy is defined in the <command moreinfo="none">$DB2_INSTANCE_HOME/db2.conf</command> file (UNIX) or the <command moreinfo="none">
							<replaceable>install_path</replaceable>\NetBackup\dbext\db2\db2.conf</command> file (Windows).</para>
				</note>
				<para id="v15491568">
					<xref xreflabel="DB2 environment variables" linkend="id-SF0A0149506" role="link"/> describes the DB2 environment variables.</para>
				<table tabstyle="complex" pgwide="1" id="id-SF0A0149506">
					<title id="v15491571">DB2 environment variables</title>
					<tgroup cols="2" id="v15491572">
						<colspec colname="col0" colnum="1" colwidth="1.5in"/>
						<colspec colname="col1" colnum="2" colwidth="*"/>
						<thead id="v15491575">
							<row id="v15491576">
								<entry>
									<para>Environment variable</para>
								</entry>
								<entry>
									<para>Purpose</para>
								</entry>
							</row>
						</thead>
						<tbody id="v15491577">
							<row id="v15491578">
								<entry>
									<para>
										<command moreinfo="none">DB2_POLICY</command>
									</para>
								</entry>
								<entry>
									<para>Name of the &ProductName; for DB2 policy from which the Automatic Backup was started. This policy name is not necessarily the same policy name that is in the <command moreinfo="none">db2.conf</command> file. This variable is set only if the backup is initiated from the server, either automatically by the &ProductName; scheduler or manually through the administrator interface.</para>
								</entry>
							</row>
							<row id="v15491579">
								<entry>
									<para>
										<command moreinfo="none">DB2_SERVER</command>
									</para>
								</entry>
								<entry>
									<para>Name of the &ProductName; server.</para>
								</entry>
							</row>
							<row id="v125212130">
								<entry>
									<para>
										<command>DB2_CLIENT </command>
									</para>
								</entry>
								<entry>
									<para>Name of DB2 client.</para>
								</entry>
							</row>
							<row id="v15491580">
								<entry>
									<para>
										<command moreinfo="none">DB2_SCHED</command>
									</para>
								</entry>
								<entry>
									<para>Name of the &ProductName; schedule. Enabled only if the backup is initiated from the server, either automatically by the &ProductName; scheduler or manually through the administrator interface.</para>
								</entry>
							</row>
							<row id="v15491581">
								<entry>
									<para>
										<command moreinfo="none">DB2_SCHEDULED</command>
									</para>
								</entry>
								<entry>
									<para>Set to 1 if this backup is a scheduled backup type (Automatic Backup).</para>
								</entry>
							</row>
							<row id="v15491582">
								<entry>
									<para>
										<command moreinfo="none">DB2_USER_INITIATED</command>
									</para>
								</entry>
								<entry>
									<para>Set to 1 if this backup is a user-initiated backup type (Application Backup backup).</para>
								</entry>
							</row>
							<row id="v15491583">
								<entry>
									<para>
										<command moreinfo="none">DB2_FULL</command>
									</para>
								</entry>
								<entry>
									<para>Set to 1 for an Automatic full backup.</para>
								</entry>
							</row>
							<row id="v15491584">
								<entry>
									<para>
										<command moreinfo="none">DB2_INCR</command>
									</para>
								</entry>
								<entry>
									<para>Set to 1 for an Automatic Differential incremental backup.</para>
								</entry>
							</row>
							<row id="v15491585">
								<entry>
									<para>
										<command moreinfo="none">DB2_CINC</command>
									</para>
								</entry>
								<entry>
									<para>Set to 1 for an Automatic Cumulative incremental backup.</para>
								</entry>
							</row>
							<row id="v147321468">
								<entry>
									<para>
										<command>DB2_CATALOG_HOST</command>
									</para>
								</entry>
								<entry>
									<para>The catalog name under which backup images are cataloged.</para>
								</entry>
							</row>
							<row id="v160059286">
								<entry>
									<para>
										<command>DB2_PARENT_JOBID</command>
									</para>
								</entry>
								<entry>
									<para>Parent job ID of the current backup job.</para>
									<note>
										<para>
											<command>DB2_PARENT_JOBID</command> parameter must be specified as <command>OPTIONS</command> for every DB2 backup command in the script.</para>
									</note>
									<para>For Windows, the command is used as follows:</para>
									<para>
										<command>BACKUP DATABASE %db2_name% %db2_action% LOAD %db2_nblib% %db2_sessions% OPTIONS "DB2_PARENT_JOBID = %DB2_PARENT_JOBID%"</command>
									</para>
									<para>For UNIX/Linux, the command is used as follows:</para>
									<para>
										<command>db2 BACKUP DATABASE $MY_DB2 $MY_SCHED LOAD $MY_LIB OPEN 4 SESSIONS OPTIONS "DB2_PARENT_JOBID=$DB2_PARENT_JOBID" BUFFER 1024</command>
									</para>
									<para>For more information about the syntax, refer to the sample DB2 backup scripts that are installed on the client.</para>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>
			<section id="v14710241" revision="02092024112010">
				<title id="v14710246">Configuring the logon account for the &ProductName; Client Service for &DatabaseAgent; </title>
				<para id="v80145522"/>
				<para id="v17385411" condition="db2;ora;sap_win;syb">Because the &ProductName; Client Service is started by default under the <command moreinfo="none">SYSTEM</command> account, you also must give special attention to database user authentication. The <command moreinfo="none">SYSTEM</command> account does not have permission to connect to the target database if you use OS authentication instead of passwords.</para>
				<para id="v17385414" condition="db2">If you use OS authentication, run the &ProductName; Client Service under an account that has SYSADM, SYSCTRL, or SYSMAINT privileges for DB2. The account name must comply with the DB2 naming rules.</para>
				<para id="v17385415" condition="db2">For more information on naming rules and authentication, see your &db; documentation.</para>
				<procedure id="v14710248">
					<title id="v14710249">To configure the logon account for the &ProductName; Client Service for &DatabaseAgent;</title>
					<step performance="required" id="v14710250">
						<para id="v14710251">In the Windows Services application, open the <guimenuitem moreinfo="none">&ProductName; Client Service</guimenuitem> entry.</para>
					</step>
					<step performance="required" id="v14710254">
						<para id="v14710255">On the <guilabel>Log On</guilabel> tab, provide the following:</para>
						<itemizedlist id="v149896213">
							<listitem id="v149896218" condition="db2">
								<para id="v17385429">Provide the account name that has SYSADM, SYSCTRL, or SYSMAINT privileges.</para>
							</listitem>
							<listitem id="v149896220">
								<para id="v17385431">Type the password.</para>
							</listitem>
						</itemizedlist>
					</step>
					<step performance="required" id="v14710262">
						<para id="v14710263">Stop and start the &ProductName; Client Service.</para>
					</step>
				</procedure>
			</section>
		</section>
		<section id="v15491534" revision="09232024103157" vendor="referenced">
			<title id="v15491535">About &ProductName; for DB2 shell scripts</title>
			<para id="v15491536">To perform a scheduled &ProductName; for DB2 backup, you must create a shell script. The shell script controls the backup job on the &ProductName; for DB2 client. You add this shell script to the <guimenuitem>Backup selections</guimenuitem> list in the &ProductName; for DB2 policy on the primary server. You can also use the shell script to manually start a backup on the client.</para>
			<para id="v151874729">The following describes shell scripts.</para>
			<informaltable id="v55143004">
				<tgroup cols="2" id="v55143005">
					<colspec colname="col1" colnum="1" colwidth="1in"/>
					<colspec colname="col2" colnum="2" colwidth="*"/>
					<tbody id="v55143008">
						<row id="v55143011">
							<entry colname="col1">
								<para>Shell scripts</para>
							</entry>
							<entry colname="col2">
								<para id="v15491548">Sample backup and recovery shell scripts are installed on the client with the &ProductName; for DB2 agent. Modify these scripts to meet your individual requirements.</para>
								<para id="v15491549">Shell scripts the user writes must conform to DB2 syntax. On UNIX, they must conform to the UNIX shell syntax.</para>
								<note>
									<para>Be aware of what may happen if an automatic schedule invokes a script that a user authored. &ProductName; does not provide safeguards to prevent an automatic backup schedule from running a restore or a recovery script.</para>
								</note>
								<para id="v15491551">
									<xref role="linkmoreinfo" xreflabel="Creating DB2 scripts manually" linkend="id-SF0A0148251"/>
								</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
			<section id="id-SF0A0148251" revision="09232024103157">
				<title id="v15491257">Creating DB2 scripts manually</title>
				<itemizedlist id="v54284728">
					<title id="v97264985">On Windows, the &nbuProductName; for DB2 installation software includes the following scripts:</title>
					<listitem id="v15491260">
						<para id="v15491261">
							<command moreinfo="none">db2_backup_db_offline.cmd</command>
						</para>
					</listitem>
					<listitem id="v15491262">
						<para id="v15491263">
							<command moreinfo="none">db2_backup_db_online.cmd</command>
						</para>
					</listitem>
					<listitem id="v15491264">
						<para id="v15491265">
							<command moreinfo="none">db2_restore_db.cmd</command>
						</para>
					</listitem>
					<listitem id="v15491266">
						<para id="v15491267">
							<command moreinfo="none">db2_mpp_backup_offline.cmd</command>
						</para>
					</listitem>
					<listitem id="v15491268">
						<para id="v15491269">
							<command moreinfo="none">db2_mpp_restore_db.cmd</command>
						</para>
					</listitem>
				</itemizedlist>
				<itemizedlist id="v15491258">
					<title id="v15491259">On UNIX, the &nbuProductName; for DB2 installation software includes the following scripts:</title>
					<listitem id="v15491270">
						<para id="v15491271">
							<command moreinfo="none">db2_backup</command>
						</para>
					</listitem>
					<listitem id="v15491272">
						<para id="v15491273">
							<command moreinfo="none">db2_restore</command>
						</para>
					</listitem>
					<listitem id="v15491274">
						<para id="v15491275">
							<command moreinfo="none">db2_all_backup_mpp</command>
						</para>
					</listitem>
					<listitem id="v15491276">
						<para id="v15491277">
							<command moreinfo="none">db2_all_restore_mpp</command>
						</para>
					</listitem>
				</itemizedlist>
				<para id="v15491278">After installation, the scripts reside in the following location:</para>
				<para id="v54284740">On Windows: <command>
						<replaceable>install_path</replaceable>\NetBackup\dbext\db2\samples\</command>
				</para>
				<para id="v54284739">On UNIX: <command>/usr/openv/netbackup/ext/db_ext/db2/scripts</command>
				</para>
				<para id="v15491283">Modify these scripts for your environment. Do not store your scripts in the sample directory because they are lost if you upgrade or reinstall. Always relocate your scripts to a safe location. For clustered environments, this location must be available after a failover.</para>
				<para id="v15491284">Although each script can have multiple DB2 commands operations, a separate script is required for each type of operation. For example, you need separate scripts for backups and restore.</para>
				<note id="v31642553">
					<para id="v31642554">Always specify the correct script when configuring automatic backups or when starting operations through &nbuProductName;. &nbuProductName; for DB2 does not generate an error if a restore script is used for a backup operation or a backup script is used for a restore operation.</para>
				</note>
				<section id="v15491684" revision="09232024103157">
					<title id="v15491685">Modifying DB2 backup and install scripts</title>
					<para id="v15491686">The following procedure describes how to modify scripts. Special configuration is required for a DB2 EEE (DPF) environment.</para>
					<para id="v15491687">
						<xref xreflabel="Overview of installation and configuration for a DB2 EEE (DPF) environment" linkend="id-SF0A0150467" role="linkmoreinfo"/>
					</para>
					<procedure id="v15491689">
						<title id="v15491690">To modify the DB2 backup and install scripts</title>
						<step performance="required" id="v15491691">
							<para id="v15491692">Copy the example scripts to a different directory on your client in a safe location. In clustered environments, this location should be available after a failover.</para>
						</step>
						<step performance="required" id="v15491693">
							<para id="v15491694">On UNIX, set the access permissions of these scripts to 775.</para>
							<programlisting format="linespecific" id="v15491695">chmod 775 <replaceable>script_name</replaceable>
							</programlisting>
						</step>
						<step performance="required" id="v15491696">
							<para id="v15491697">Use a text editor to open the script. </para>
						</step>
						<step performance="required" id="v15491700">
							<para id="v15491701">Follow the instructions in the script.</para>
						</step>
						<step performance="required" id="v15491702">
							<para id="v15491703">On UNIX, include an <command moreinfo="none">su - user</command> line (<command moreinfo="none">user</command> is the &db; instance account) in your scripts. Otherwise, the scripts do not run with the proper permissions and environment variables.</para>
						</step>
						<step performance="required" id="v15491704">
							<para id="v15491705">Test the scripts that you created by starting a manual backup of this policy.</para>
							<para id="v15491706">
								<xref xreflabel="Perform a manual backup" linkend="v14759502" role="linkseeheading"/>
							</para>
						</step>
					</procedure>
				</section>
				<section id="v15492478" revision="09232024103157">
					<title id="v15492479">Script parameters</title>
					<para id="v15492480">The &ProductName; for DB2 scripts read parameters from the environment when they perform backup and restore operations.</para>
					<itemizedlist id="v15492481">
						<title id="v15492482">The parameters can come from the following sources:</title>
						<listitem id="v15492483">
							<para id="v15492484">Environment variables</para>
						</listitem>
						<listitem id="v15492485">
							<para id="v15492486">UNIX: &ProductName; <command moreinfo="none">bp.conf</command>
							</para>
						</listitem>
						<listitem id="v15492487">
							<para id="v15492488">&ProductName; <command moreinfo="none">db2.conf</command>
							</para>
						</listitem>
					</itemizedlist>
					<para id="v15492489">Parameters from these sources can be evaluated within the scripts. For example, the <command moreinfo="none">DB2_POLICY</command> value is the name of the policy that is used to perform the backup.</para>
					<para id="v55145256">
						<xref xreflabel="Creating a db2.conf file for use with the user exit program" linkend="id-SF0A0157544" role="linkmoreinfo"/>
					</para>
				</section>
			</section>
			<section id="id-SF0A0161727" revision="02082024125516">
				<title id="v15492550">About &ProductName; shell script storage</title>
				<para id="v90347317">&ProductName; stores shell scripts in the following ways:</para>
				<informaltable id="v58346382">
					<tgroup cols="2" id="v58346383">
						<colspec colname="col1" colnum="1" colwidth="1.2in"/>
						<colspec colname="col2" colnum="2" colwidth="*"/>
						<tbody id="v58346386">
							<row id="v58346391">
								<entry colname="col1">
									<para>Shell script storage</para>
								</entry>
								<entry colname="col2">
									<para id="v15492558">DB2 scripts must reside on the &ProductName; client. Backup scripts are associated with a policy by specifying the file name (including path) in the policy file or script list. For server-directed or scheduled backups, each client in the policy's client list must have a copy of the script with the same name in the same location.</para>
									<para id="v15492559">
										<xref role="linkmoreinfo" xreflabel="Adding backup selections" linkend="id-SF930146675"/>
									</para>
									<para id="v15492561">The backup processes and recovery processes sometimes require passwords for DB2 database access and system user accounts.</para>
								</entry>
							</row>
							<row id="v58346395">
								<entry colname="col1">
									<para>Shell script storage in a &ProductName; cluster</para>
								</entry>
								<entry colname="col2">
									<para id="v15492564">The shell scripts pertain to &ProductName; for DB2 environments that are not installed in a cluster.</para>
									<para id="v15492569">If you operate within a &ProductName; cluster, make sure that the restore shell scripts reside in a file system that is shared between all nodes in the cluster.</para>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</informaltable>
				<para id="v55194254">
					<xref xreflabel="About backup schedules and scripts" linkend="v14761509" role="linkmoreinfo"/>
				</para>
			</section>
		</section>
		<section condition="uma" id="v166172119" revision="06272024102315" vendor="referenced">
			<title id="v166172142">RBAC role for the DB2 administrator</title>
			<para id="v166172143">
				<remark>Reviewer: Blue Team. NBU-199376. New topic. 06/27/24 </remark>The RBAC role named Default DB2 Administrator provides the permissions for a DB2 administrator to view and restore DB2 backups with the command <command>nbdb2adutl</command>. For details on RBAC, see the <ulink url="https://www.veritas.com/docs/DOC5332">&nbuProductName; Web UI Administrator&apos;s Guide</ulink>.</para>
			<itemizedlist id="v166172144">
				<title id="v166172210">Note the following limitations for this role:</title>
				<listitem id="v166172145">
					<para id="v166172146">This role only provides the ability to list, query, and restore DB2 backup images and to view and manage DB2 jobs. This role cannot manage policies or the protection of DB2 assets. </para>
				</listitem>
				<listitem id="v166172147">
					<para id="v166172148">This role does not provide asset-level or granular permissions on DB2 assets.</para>
				</listitem>
			</itemizedlist>
			<para id="v166172153">To add users to this RBAC role, you must have the RBAC Administrator role or the permissions to add users to roles. Contact your &nbuProductName; administrator for assistance with creating roles and adding users to roles.</para>
			<para id="v166172154">For information on the RBAC permissions and default roles, see the &nbuProductName; API documentation at <ulink url="http://sort.veritas.com/">http://sort.veritas.com/</ulink>.</para>
		</section>
	</chapter>
	<chapter id="v23549969">
		<title id="v16588331">Performing backups and restores of DB2</title>
		<section id="v15492663" revision="09232024104513" vendor="referenced">
			<title id="v15492664">&nbuProductName; for DB2 backup overview</title>
			<para id="v59081748">After you have completed installing and configuring &ProductName; for DB2, you can start DB2 backups and restores through &nbuProductName;. You can also run DB2 commands directly.</para>
			<note id="v54290550">
				<para id="v15492662">Always specify the correct DB2 script when you configure automatic backups or when operations start through &ProductName;. &ProductName; for DB2 does not generate an error if a restore DB2 script file is used for a backup operation. Also, &ProductName; for DB2 does not generate an error when a backup DB2 script is used for a restore operation.</para>
			</note>
			<itemizedlist id="v15492666">
				<title id="v15492667">&nbuProductName; for DB2 provides the following ways to perform a backup:</title>
				<listitem id="v15492668">
					<para id="v15492669">Issue a DB2 command from the DB2 control center or command-line processor. The DB2 <command moreinfo="none">BACKUP</command> and <command moreinfo="none">RESTORE</command> commands use the policies, schedules, and settings that are specified in the following sources:</para>
					<itemizedlist id="v15492670">
						<listitem id="v15492671">
							<para id="v15492672">The &nbuProductName; for DB2 vendor I/O library.<indexterm>
									<primary>NBDB2 vendor I/O library</primary>
									<secondary>settings</secondary>
								</indexterm>
							</para>
							<para id="v15492674">On UNIX, this library is named <command moreinfo="none">nbdb2.<replaceable>ext</replaceable>
								</command>, where <replaceable>ext</replaceable> differs depending on your platform.</para>
							<para id="v15492673">On Windows, this library is named <command moreinfo="none">nbdb2.dll</command>.</para>
						</listitem>
						<listitem id="v15492675">
							<para id="v15492676">The &ProductName; for DB2 configuration file. This file is named <command moreinfo="none">db2.conf</command>.</para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem id="v15492677">
					<para id="v15492678">Run a script from the operating system command line. You can create these scripts manually.</para>
				</listitem>
				<listitem id="v15492681">
					<para id="v15492682">Use the scripts that are specified in policies. When you back up a &ProductName; policy, it uses the scripts that are specified in the policy.</para>
				</listitem>
				<listitem id="v147321706">
					<para id="v147321707">You can specify a catalog name during a database copy backup and an archive log backup.</para>
				</listitem>
			</itemizedlist>
			<para id="v59081751">The main types of DB2 backups are as follows:</para>
			<informaltable id="v59081752">
				<tgroup cols="2" id="v59081753">
					<colspec colname="col1" colnum="1" colwidth="1.5in"/>
					<colspec colname="col2" colnum="2" colwidth="*"/>
					<tbody id="v59081756">
						<row id="v59081757">
							<entry colname="col1">
								<para>database backup</para>
								<para>database copy</para>
							</entry>
							<entry colname="col2">
								<para id="v15492686">A copy of the entire DB2 database or tablespace. This backup is accomplished by issuing a DB2 <command moreinfo="none">BACKUP DATABASE</command> command. A database backup can be initiated through &ProductName; by an automatic backup of a &db; policy, manual backup of a &db; policy, or user-directed backup.</para>
								<para>You can specify the <command>CATALOG_HOST</command> in the <filename>db2.conf</filename> or the <command>DB2_CATALOG_HOST</command> in the <command>VENDOROPT</command> of the &db; database configuration parameters or in the <command>OPTIONS</command> on the command line.</para>
								<para id="v55195191">
									<xref role="linkseeheading" xreflabel="About backups from the &ProductName; primary server" linkend="v15492697"/>
								</para>
								<para id="v55195193">
									<xref role="linkseeheading" xreflabel="About user-directed backups" linkend="id-SF0A0157989"/>
								</para>
							</entry>
						</row>
						<row id="v59081761">
							<entry colname="col1">
								<para>archive log backup</para>
							</entry>
							<entry colname="col2">
								<para id="v15492688">An archive log backup is a backup of an archive log file for DB2. If <command moreinfo="none">VENDOR</command> is enabled in the DB2 configuration files, &ProductName; for DB2 backs up the archive logs along with the database files. If the user exit program is enabled in the DB2 configuration file, you need a separate policy and schedule to back up the archive logs.</para>
								<para> If you specify <command>LOGARCHMETH1</command> and or <command>LOGARCHMETH2</command> equal to <command>VENDOR</command>, you can specify the <command>CATALOG_HOST</command> in the <filename>db2.conf</filename> or specify the <command>DB2_CATALOG_HOST</command> in the <command>LOGARCHOPT1</command> and or <command>LOGARCHOPT2</command> respectively.</para>
								<para>These <command>CATALOG_HOST</command> and <command>DB2_CATALOG_HOST</command> keywords do not apply to the archive log backups that use the user exit program. </para>
							</entry>
						</row>
						<row id="v59081762">
							<entry colname="col1">
								<para>configuration file backup</para>
							</entry>
							<entry colname="col2">
								<para id="v15492690">A configuration file backup is a backup of the DB2 configuration files that you need to recover the database in the case of a disaster.</para>
								<para id="v15492691">You can use a Standard policy (UNIX) or MS-Windows policy with a User Backup schedule to back up the files.</para>
								<para id="v15492693">For information on which files to back up, see your IBM DB2 documentation.</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</section>
		<section id="v15492697" revision="09232024104513" vendor="referenced">
			<title id="v15492698">About backups from the &ProductName; primary server</title>
			<para id="v15492722">You can back up a DB2 policy manually or automatically. To back up manually, the administrator on the primary server uses the &ProductName; administrator's interface to run an Automatic backup schedule for a DB2 policy.</para>
			<para id="v15492699">The most convenient way to back up a DB2 policy is to set up schedules for automatic backups. When the &ProductName; scheduler invokes a schedule for an automatic backup, the DB2 scripts are run in the same order as they appear in the file lists. Also, the scripts run on all clients that are listed in the client list.</para>
			<para id="v15492706">The DB2 scripts initiate the database backup.</para>
			<para id="v15492707">Further information is available on how to add a new schedule or change an existing schedule for automatic backups.</para>
			<para id="v15492708">
				<xref xreflabel="Configure automatic backup schedules" linkend="id-SF930115156" role="linkseeheading"/>
			</para>
			<itemizedlist id="v15492711">
				<title id="v15492712">The following information applies only if you use the user exit program to back up the archive logs:</title>
				<listitem id="v15492713">
					<para id="v15492714">If an online backup of a partition is requested, the user exit program must be enabled. If not, an offline partition backup is attempted. An offline backup is also attempted if the database is in a backup-pending mode.</para>
				</listitem>
			</itemizedlist>
		</section>
		<section id="id-SF0A0157989" revision="09232024103437" vendor="referenced">
			<title id="v15492729">About user-directed backups</title>
			<itemizedlist id="v66246724">
				<title id="v167207052">You can run a user-directed backup in the following ways:</title>
				<listitem id="v66246725">
					<para id="v66246726">You can run a user-directed backup using the DB2 command-line or DB2 script.</para>
				</listitem>
				<listitem id="v66246729">
					<para id="v66246730">Using DB2</para>
				</listitem>
			</itemizedlist>
			<para id="v15492740">Users must have sufficient DB2 permissions to perform backup, restore, and roll-forward operations. The user account must have <command>SYSADM</command>, <command>SYSCTRL</command>, or <command>SYSMAINT</command> privileges for DB2.</para>
			<para id="v55196416">
				<xref xreflabel="BACKUP DATABASE command options" linkend="v15492815" role="linkmoreinfo"/>
			</para>
			<section id="v15492792" revision="09232024104513">
				<title id="v15492793">Using DB2 to run a user-directed backup</title>
				<para id="v15492794">To start a user-directed backup, run the DB2 <command moreinfo="none">BACKUP DATABASE</command> command.</para>
				<para id="v15492795">You can run this command from the DB2 command line on the client (UNIX) or from the DB2 command window on the client.</para>
				<para id="v15492797">Depending on the release of DB2 that you use, issue the <command moreinfo="none">BACKUP DATABASE</command> command in one of the following formats to perform a backup.</para>
				<table id="v55194791">
					<title id="v55194792">BACKUP DATABASE command formats</title>
					<tgroup cols="2" id="v55194793">
						<colspec colname="col1" colnum="1" colwidth="1.2in"/>
						<colspec colname="col2" colnum="2" colwidth="*"/>
						<thead id="v55194796">
							<row id="v55194797">
								<entry colname="col1">
									<para>Format</para>
								</entry>
								<entry colname="col2">
									<para>Description</para>
								</entry>
							</row>
						</thead>
						<tbody id="v55194798">
							<row id="v55194799">
								<entry colname="col1">
									<para>Offline backup</para>
								</entry>
								<entry colname="col2">
									<para id="v15492800">Issue the command in the following format:</para>
									<para id="v54290553">Windows: <command>db2 backup db sample load <replaceable>install_path</replaceable>\NetBackup\bin\nbdb2.dll</command>
									</para>
									<para>UNIX: <command>db2 backup db sample load \ /usr/openv/netbackup/bin/<replaceable>lib</replaceable>
										</command>
									</para>
									<para id="v15492805">The specification for <replaceable>lib</replaceable> differs depending on your platform.</para>
								</entry>
							</row>
							<row id="v55194801">
								<entry colname="col1">
									<para>Online backup</para>
								</entry>
								<entry colname="col2">
									<para>Issue the command in the following format:</para>
									<para id="v54290557">Windows: <command>db2 backup db sample online load <replaceable>install_path</replaceable>\NetBackup\bin\nbdb2.dll</command>
									</para>
									<para id="v54290556">UNIX: <command>db2 backup db sample online load /usr/openv/netbackup/bin/<replaceable>lib</replaceable>
										</command>
									</para>
									<para id="v15492813">For <replaceable>lib</replaceable>, specify the same path as shown for the preceding format (Format 1).</para>
									<para id="v26803648">For more information on the DB2 <command moreinfo="none">BACKUP DATABASE</command> command, see your DB2 documentation.</para>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>
			<section id="v15492815" revision="09232024104513">
				<title id="v15492816">BACKUP DATABASE command options</title>
				<para id="v15492817">You can back up a DB2 database to &nbuProductName; with either the DB2 <command moreinfo="none">BACKUP DATABASE</command> command or with its alternative syntax, <command moreinfo="none">BACKUP DB</command>.</para>
				<para id="v15492818">
					<xref xreflabel="DB2  command options" linkend="id-SF0A0116131" role="link"/> lists the command options when used in a &nbuProductName; for DB2 environment.</para>
				<table tabstyle="complex" id="id-SF0A0116131">
					<title id="v15492821">DB2 <command>BACKUP</command> command options</title>
					<tgroup cols="2" id="v15492822">
						<colspec colnum="1" colwidth="1.7in"/>
						<colspec colnum="2" colwidth="*"/>
						<thead id="v15492825">
							<row id="v15492826">
								<entry>
									<para>Option</para>
								</entry>
								<entry>
									<para>Purpose</para>
								</entry>
							</row>
						</thead>
						<tbody id="v15492827">
							<row id="v15492828">
								<entry>
									<para>
										<command moreinfo="none">LOAD <replaceable>NBDB2_library_path</replaceable>
										</command>
									</para>
								</entry>
								<entry>
									<para>Instructs DB2 to use the NBDB2 vendor library when it performs the backup.</para>
								</entry>
							</row>
							<row id="v15492829">
								<entry>
									<para>
										<command moreinfo="none">OPEN <replaceable>number</replaceable> SESSIONS</command>
									</para>
								</entry>
								<entry>
									<para>Specifies the number of concurrent data streams used for writing data. Use this option if you have multiple backup devices available, or you have multiplexing enabled in &nbuProductName;.</para>
								</entry>
							</row>
							<row id="v15492830">
								<entry>
									<para>
										<command moreinfo="none">WITH <replaceable>number</replaceable> BUFFERS</command>
									</para>
								</entry>
								<entry>
									<para>Use this option when opening multiple sessions. See <command moreinfo="none">OPEN <replaceable>number</replaceable> SESSIONS</command>. The number of buffers must be twice the number of sessions.</para>
								</entry>
							</row>
							<row id="v15492831">
								<entry>
									<para>
										<command moreinfo="none">BUFFER <replaceable>size</replaceable>
										</command>
									</para>
								</entry>
								<entry>
									<para>Use this option to increase or decrease the buffer size, if necessary. Increased size can benefit performance, but decreased size might be necessary if using numerous buffers. DB2 recommends that the size be a multiple of the extent size. The DB2 <command moreinfo="none">DFT_EXTENT_SZ</command> setting defines the default extent size.</para>
								</entry>
							</row>
							<row id="v15492832">
								<entry>
									<para>
										<command moreinfo="none">WITHOUT PROMPTING</command>
									</para>
								</entry>
								<entry>
									<para>This option is required for unattended backups. It must be specified in the backup scripts that &nbuProductName; runs.</para>
								</entry>
							</row>
							<row id="v15492833">
								<entry>
									<para>
										<command moreinfo="none">INCREMENTAL</command>
									</para>
								</entry>
								<entry>
									<para>Use this option to perform a cumulative backup.</para>
								</entry>
							</row>
							<row id="v15492834">
								<entry>
									<para>
										<command moreinfo="none">INCREMENTAL DELTA</command>
									</para>
								</entry>
								<entry>
									<para>Use this option to perform a differential backup.</para>
								</entry>
							</row>
							<row id="v15492835">
								<entry>
									<para>
										<command moreinfo="none">ONLINE</command>
									</para>
								</entry>
								<entry>
									<para>Use this option to back up hot, or active, databases.</para>
								</entry>
							</row>
							<row id="v15492836">
								<entry>
									<para>
										<command moreinfo="none">OPTIONS &quot;<replaceable>options-string</replaceable>&quot;</command>
									</para>
								</entry>
								<entry>
									<para>Specifies the options that are to be used for the backup operation. The string passes to the vendor support library, for example <filename>nbdb.so</filename>, exactly as it was entered, without the quotes.</para>
									<para>When the options DB2_POLICY, DB2_SCHED, DB2_SERVER, DB2_CLIENT, or BKUP_IMAGE_PERM are specified, the corresponding environment variables and <filename>db2.conf</filename> keywords are overridden.</para>
									<para>For more details about these options:</para>
									<para>
										<xref role="linkmoreinfo" xreflabel="Keywords for the db2.conf file" linkend="id-SF0A0175998"/>
									</para>
									<para>
										<xref role="linkmoreinfo" xreflabel="&nbuProductName;  for DB2 environment variables" linkend="v15491561"/>
									</para>
									<para>If multiple <command>key=value pairs</command> are specified, they are colon delimited. The following example shows colon-delimited <command>key=value pairs</command>:</para>
									<para>
										<command>DB2 BACKUP ... OPTIONS "DB2_POLICY=policy3:DB2_SCHED=sched4"</command>
									</para>
									<note>
										<para>Specifying this option overrides the value that the VENDOROPT database configuration parameter specifies.</para>
									</note>
								</entry>
							</row>
							<row id="v15492837">
								<entry>
									<para>
										<command moreinfo="none">PARALLELISM <replaceable>n</replaceable>
										</command>
									</para>
								</entry>
								<entry>
									<para>Determines the number of tablespaces which can be read in parallel by the backup utility. DB2 automatically chooses an optimal value for this parameter unless you explicitly enter a value.</para>
								</entry>
							</row>
							<row id="v147321563">
								<entry>
									<para>
										<command>DB2_CATALOG_HOST</command>
									</para>
								</entry>
								<entry>
									<para>The catalog name under which backup images are cataloged.</para>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>
		</section>
		<section id="v16233239" revision="09232024104513" vendor="referenced">
			<title id="v15491142">About browsing DB2 backup images with bplist</title>
			<para id="v55196183">You can use the <command>bplist</command> command to search DB2 backup images. The output from <command>bplist</command> differs depending on how you manage your archive log files.</para>
			<table pgwide="1" id="v59138571">
				<title id="v59138573">bplist output</title>
				<tgroup cols="2" id="v59138574">
					<colspec colname="col1" colnum="1" colwidth="1in"/>
					<colspec colname="col2" colnum="2" colwidth="*"/>
					<thead id="v59138577">
						<row id="v59138578">
							<entry colname="col1">
								<para>bplist option</para>
							</entry>
							<entry colname="col2">
								<para>Description</para>
							</entry>
						</row>
					</thead>
					<tbody id="v59138579">
						<row id="v59138580">
							<entry colname="col1">
								<para>
									<command>-t 18</command>
								</para>
							</entry>
							<entry colname="col2">
								<para id="v55196191">This example searches all DB2 backup images for a client named <command>camel</command>, which is also the primary server. The information comes from the &nbuProductName; catalog on the primary server. The user exit program backs up the archive files.</para>
								<para id="v54290563">The <command moreinfo="none">bplist -t 18</command> option specifies the DB2 backup type. The <command moreinfo="none">bplist</command> output shows the DB2 database backup images that are stored in the &nbuProductName; database. </para>
								<para id="v54290564">Windows:</para>
								<programlisting format="linespecific" id="v15491152">
									<replaceable>install_path</replaceable>\NetBackup\bin\bplist -C camel -S camel -t 18 -R /
DB2:\SAMP\node0000\2009120210515\SAMP.0.DB2.node0000.0.2009120210515.1
DB2:\SAMP\node0000\2009120210473\SAMP.0.DB2.node0000.0.2009120210473.1
DB2:\SAMP\node0000\2009112915411\SAMP.3.DB2.node0000.4.2009112915411.1</programlisting>
								<para>UNIX:</para>
								<programlisting format="linespecific" id="v15491151">/usr/openv/netbackup/bin/bplist -C camel -S camel -t 18 -R / 
/DB2/SAMP/node0000/2009120210515/SAMP.0.DB2.node0000.0.2009120210515.1
/DB2/SAMP/node0000/2009120210473/SAMP.0.DB2.node0000.0.2009120210473.1
/DB2/SAMP/node0000/2009112915411/SAMP.3.DB2.node0000.4.2009112915411.1</programlisting>
								<para>Where: </para>
								<para>
									<command moreinfo="none">DB2</command> is the directory name for all DB2 backups.</para>
								<para>
									<command>SAMP</command> is the name of the database (both occurrences).</para>
								<para>
									<command>node0000</command> is the node name.</para>
								<para>
									<command>20091202105150</command> is the time that the backup occurred.</para>
								<para>
									<command>0</command> is the type of backup taken. Zero (0) indicates a full database backup. Three (3) indicates a tablespace backup.</para>
								<para>
									<command>DB2</command> is the database instance name. It is one to eight characters in length.</para>
								<para>
									<command>node0000</command> is the node number. In non-partitioned database systems, the node number is always zero (node0000). In partitioned database systems, the number is nodexxxx, where xxxx is the number assigned to the node in the <filename>db2nodes.cfg</filename> file.</para>
								<para>
									<command>0</command> is the last archive log number.</para>
								<para>
									<command moreinfo="none">20091202105150</command> is the timestamp, which includes the date (year, month, day) and time (hour, minute, second).</para>
								<para>
									<command>1</command> is the session number. This file extension identifies the session number that was specified on the DB2 <command>BACKUP</command> command.</para>
							</entry>
						</row>
						<row id="v59138581">
							<entry colname="col1">
								<para>
									<command>-k DB2_Log_Policy</command>
								</para>
							</entry>
							<entry colname="col2">
								<para id="v55196198">This example searches all DB2 backup images for a client named <command>cow</command>, which is also the primary server. The information comes from the &nbuProductName; catalog on the primary server. This example assumes that the user exit program is used to back up the archive files.</para>
								<para id="v15491177">The <command moreinfo="none">-k DB2_Log_Policy</command> option specifies the files that are backed up with this policy. The policy name originates from the settings in the <command moreinfo="none">db2.conf</command> file for archive log files. The <command moreinfo="none">bplist</command> output shows the list of DB2 archive log files that are stored in &nbuProductName;.</para>
								<para id="v54290566">Windows:</para>
								<programlisting format="linespecific" id="v15491178">
									<replaceable>install_path</replaceable>\NetBackup\bin\bplist -k DB2_Log_Policy -C cow -S cow -R /
C:\DB2\NODE0000\SQL00001\SQLOGDIR\S0000026.LOG
C:\DB2\NODE0000\SQL00001\SQLOGDIR\S0000025.LOG
C:\DB2\NODE0000\SQL00001\SQLOGDIR\S0000024.LOG
</programlisting>
								<para id="v54290565">UNIX:</para>
								<programlisting format="linespecific" id="v15491179">/usr/openv/netbackup/bin/bplist -k DB2_Log_Policy -C cow -S cow -R /
/home/db2inst/NODE0000/SQL00001/SQLOGDIR/S0000026.LOG
/home/db2inst/NODE0000/SQL00001/SQLOGDIR/S0000025.LOG
/home/db2inst/NODE0000/SQL00001/SQLOGDIR/S0000024.LOG</programlisting>
							</entry>
						</row>
						<row id="v59138582">
							<entry colname="col1">
								<para>
									<command>-k log_policy</command>
								</para>
							</entry>
							<entry colname="col2">
								<para id="v15491182">This example uses <command moreinfo="none">bplist</command> to search the DB2 archive log files for a client named <command>cow</command>. The <command moreinfo="none">-k log_policy</command> option specifies the files that are backed up with this policy. The <command>VENDOR</command> is set and the user exit program is not used to back up the archive logs:</para>
								<para id="v54290568">Windows: <command>
										<replaceable>install_path</replaceable>\NetBackup\bin\bplist -C cow -S cow -k log_policy -R / </command>
								</para>
								<para>Example location:<command>C:\DB2\SAMPLE\LOGFILE\node0000\db2v864d\C0000000_S0000000.LOG</command>
								</para>
								<para id="v54290567">UNIX: <command>/usr/openv/netbackup/bin/bplist -C cow -S cow -k log_policy -R / </command>
								</para>
								<para>Example location:<command>/DB2/SAMPLE/LOGFILE/node0000/db2v864d/C0000000_S0000000.LOG</command>
								</para>
								<para>Where: </para>
								<para>
									<command moreinfo="none">DB2</command> is the directory name for all DB2 backups.</para>
								<para>
									<command>SAMPLE</command> is the name of the database.</para>
								<para>
									<command>LOGFILE</command> identifies the entry as a log file.</para>
								<para>
									<command>node0000</command> is the node name.</para>
								<para>
									<command moreinfo="none">db2v864d</command> is the name of the DB2 instance.</para>
								<para>
									<command moreinfo="none">C0000000_S0000000.LOG</command> is the name of the log file that DB2 provides.</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
			<para id="v59143136">You can find more information on the <command>bplist</command> command in the <ulink url="http://www.veritas.com/docs/DOC5332">&nbuProductName; Commands Reference Guide</ulink>.</para>
		</section>
		<section id="v15492340" revision="09232024104513" vendor="referenced">
			<title id="v15492341">Performing a database restore</title>
			<para id="v15492342">As the DB2 user on UNIX, you can initiate a database restore with the DB2 Control Center or command-line processor.</para>
			<para id="v15492343">On UNIX, a &ProductName; task can run a restore script containing the necessary DB2 commands to perform the restore. You can write the scripts that contain the commands to perform a restore.</para>
			<para id="v55196435">
				<xref xreflabel="Using DB2 to perform a restore" linkend="v15492177" role="linkmoreinfo"/>
			</para>
			<section id="v15492177" revision="09232024104513">
				<title id="v15492178">Using DB2 to perform a restore</title>
				<para id="v15492179">The exact process for recovering a DB2 database differs from site to site depending on the following: the methods that are used for backing up the archive logs, the settings that are used in the &nbuProductName; for DB2 configuration file, <command moreinfo="none">db2.conf</command>, and the location of the archive logs.</para>
				<itemizedlist id="v15492180">
					<title id="v15492181">The following procedures show how to restore an example database to the level of a recent database backup plus archive logs:</title>
					<listitem id="v15492182">
						<para id="v15492183">
							<xref xreflabel="Recovering a DB2 database - Simplest case" linkend="id-SF0A0112096" role="linkseeheading"/>
						</para>
						<para id="v15492185">Use this procedure if the archive logs are in an accessible location and they were all created with the same parameters in <command moreinfo="none">db2.conf</command>.</para>
					</listitem>
					<listitem id="v15492186">
						<para id="v15492187">
							<xref xreflabel="Recovering a DB2 database - Restoring archive logs" linkend="id-SF0A0191135" role="linkseeheading"/>
						</para>
						<para id="v15492189">This case is more complex. Use this procedure if you have to browse for archive logs and restore them from secondary storage.</para>
					</listitem>
				</itemizedlist>
				<para id="v15492190">For more information on how to recover a DB2 database, see your DB2 documentation.</para>
				<section id="v147321574" revision="09232024104513">
					<title id="v147321639">Restoring and recovering a DB2 database - with a catalog name that has been specified</title>
					<para id="v147321641">A catalog name can be specified for a database backup and an archive log backup. If a user specified a catalog name during a backup, there are certain setup actions you must follow during restore operations. Follow the following options for use in a Windows and UNIX environment.</para>
					<para id="v152586310">If you use a non-root service user account, specific access must be allowed for that user when you add files to the <filename>/usr/openv/netbackup/db/altnames</filename> directory. The service user account must have full access to these files through the ownership or group and the permissions. For example, if the service user is <filename>svcname</filename> and its group is <filename>srvgrp</filename>, the file can have permissions of <filename>400</filename>. If the file owner is for a different user and group, the file permissions must allow access to the service user. For example, <filename>777</filename>. Equivalent permission settings must be used in a Windows environment.</para>
					<itemizedlist id="v147321642">
						<title id="v147321643">Windows:</title>
						<listitem id="v147321644">
							<para id="v147321645">If the catalog name is equal to the name of the client performing the restore, no special setup is needed.</para>
						</listitem>
						<listitem id="v147321646">
							<para id="v147321647">If the primary and the client are the same server and if the catalog name does not equal the name of the client performing the restore, update the <filename>db2.conf</filename> as follows:</para>
							<itemizedlist id="v147321648">
								<listitem id="v147321649">
									<para id="v147321650">
										<command>DATABASE</command> and <command>ARCHIVE</command> stanzas:</para>
									<itemizedlist id="v147321651">
										<listitem id="v147321652">
											<para id="v147321653">
												<command>CLIENT &lt;<userinput>catalog name</userinput>&gt;</command>
											</para>
										</listitem>
									</itemizedlist>
								</listitem>
								<listitem id="v147321654">
									<para id="v147321655">
										<command>ARCHIVE</command> stanza only:</para>
									<itemizedlist id="v147321656">
										<listitem id="v147321657">
											<para id="v147321658">
												<command>FORCE_BACKUP_CLIENT &lt;<userinput>name of the host performing the restore</userinput>&gt;</command>
											</para>
											<para id="v147321659">The newer releases of the DB2 database want to perform a backup of the archive logs after a restore.</para>
										</listitem>
									</itemizedlist>
								</listitem>
							</itemizedlist>
						</listitem>
						<listitem id="v147321660">
							<para id="v147321661">If the client is a different server than where the backup has occurred and if the catalog name does not equal the name of the client performing the restore:</para>
							<itemizedlist id="v147321662">
								<listitem id="v147321663">
									<para id="v147321664">
										<filename>db2.conf</filename>
									</para>
									<itemizedlist id="v147321665">
										<listitem id="v147321666">
											<para id="v147321667">
												<command>DATABASE</command> and <command>ARCHIVE</command> stanzas:</para>
											<itemizedlist id="v147321668">
												<listitem id="v147321669">
													<para id="v147321670">
														<command>CLIENT &lt;<userinput>catalog name</userinput>&gt;</command>
													</para>
												</listitem>
											</itemizedlist>
										</listitem>
										<listitem id="v147321671">
											<para id="v147321672">
												<command>ARCHIVE</command> stanza only:</para>
											<itemizedlist id="v147321673">
												<listitem id="v147321674">
													<para id="v147321675">
														<command>FORCE_BACKUP_CLIENT &lt;<userinput>name of the host performing the restore</userinput>&gt;</command>
													</para>
													<para id="v147321676">The newer releases of the DB2 database want to perform a backup of the archive logs after a restore.</para>
												</listitem>
											</itemizedlist>
										</listitem>
									</itemizedlist>
								</listitem>
								<listitem id="v147321677">
									<para id="v147321678">The <filename>altnames</filename> directory must be set up: <filename>
											<replaceable>install_path</replaceable>\netbackup\db\altnames</filename>
									</para>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
					<itemizedlist id="v147321679">
						<title id="v147321680">UNIX:</title>
						<listitem id="v147321681">
							<para id="v147321682">If the catalog name is equal to the name of the client performing the restore, no special setup is needed.</para>
						</listitem>
						<listitem id="v147321683">
							<para id="v147321684">If the catalog name does not equal the client name performing the restore, update the <filename>db2.conf</filename> as follows:</para>
							<itemizedlist id="v147321685">
								<listitem id="v147321686">
									<para id="v147321687">
										<filename>db2.conf</filename>
									</para>
									<itemizedlist id="v147321688">
										<listitem id="v147321689">
											<para id="v147321690">
												<command>DATABASE</command> and <command>ARCHIVE</command> stanzas:</para>
											<itemizedlist id="v147321691">
												<listitem id="v147321692">
													<para id="v147321693">
														<command>CLIENT &lt;<userinput>catalog name</userinput>&gt;</command>
													</para>
												</listitem>
											</itemizedlist>
										</listitem>
										<listitem id="v147321694">
											<para id="v147321695">
												<command>ARCHIVE</command> stanza only:</para>
											<itemizedlist id="v147321696">
												<listitem id="v147321697">
													<para id="v147321698">
														<command>FORCE_BACKUP_CLIENT &lt;<userinput>name of the host performing the restore</userinput>&gt;</command>
													</para>
													<para id="v155106256">The newer releases of &db; want to perform a backup of the archive logs after a restore.</para>
												</listitem>
											</itemizedlist>
										</listitem>
									</itemizedlist>
								</listitem>
								<listitem id="v147321699">
									<para id="v147321700">The <filename>altnames</filename> directory must be set up:<filename>/usr/openv/netbackup/db/altnames</filename>
									</para>
								</listitem>
							</itemizedlist>
						</listitem>
					</itemizedlist>
					<para id="v147321701">
						<xref xreflabel="&nbuProductName; for DB2 backup overview" linkend="v15492663" role="linkmoreinfo"/>
					</para>
				</section>
				<section id="id-SF0A0112096" revision="09232024104513">
					<title id="v15492192">Recovering a DB2 database - Simplest case</title>
					<para id="v15492193">The DB2 commands for recovering a database differ from release to release. Use these commands to restore a database if the archive logs are in a location that is known and accessible to DB2 and &ProductName;. The recovery commands you use depend on the release version of the DB2 database.</para>
					<itemizedlist id="v15492194">
						<title id="v15492195">For example, you can probably use the recovery commands in this section if the following are true:</title>
						<listitem id="v15492196">
							<para id="v15492197">If <command moreinfo="none">ARCFUNC SAVE</command> was in effect in the <command moreinfo="none">db2.conf</command> file when all archive logs were backed up.</para>
						</listitem>
						<listitem id="v15492198">
							<para id="v15492199">If <command moreinfo="none">ARCFUNC COPY</command> was in effect in the <command moreinfo="none">db2.conf</command> file when all archive logs were backed up and the logs were not moved from the <command moreinfo="none">ARCDIR</command> and <command moreinfo="none">RETDIR</command> directories.</para>
						</listitem>
						<listitem id="v15492200">
							<para id="v15492201">If <command moreinfo="none">VENDOR</command> was in effect in DB2 at the time all the archive logs were created.</para>
						</listitem>
					</itemizedlist>
					<itemizedlist id="v95108566">
						<title id="v95108567">When the DB2 database archive logs are accessible to DB2 and &ProductName;, use the following commands:</title>
						<listitem id="v151897141">
							<para id="v151897142">Windows: <command>db2 restore db <replaceable>db_name</replaceable> load <replaceable>install_path</replaceable>\NetBackup\bin\nbdb2.dll db2 rollforward db <replaceable>db_name</replaceable> to end of logs and stop</command>
							</para>
							<para id="v151897143">Where <replaceable>db_name</replaceable> is the name of the DB2 database you want to restore.</para>
						</listitem>
						<listitem id="v151897144">
							<para id="v151897145">UNIX: <command>db2 restore db <replaceable>db_name</replaceable> load /usr/openv/netbackup/bin/<replaceable>lib</replaceable>db2 rollforward db <replaceable>db_name</replaceable> to end of logs and stop</command>
							</para>
							<para id="v151897146">Where:</para>
							<informaltable id="v15492217" tabstyle="simple">
								<tgroup cols="2" id="v15492218">
									<colspec colnum="1" colwidth="1in"/>
									<colspec colnum="2" colwidth="*"/>
									<tbody id="v15492221">
										<row id="v15492222">
											<entry>
												<para>
													<replaceable>db_name</replaceable>
												</para>
											</entry>
											<entry>
												<para>Name of the DB2 database.</para>
											</entry>
										</row>
										<row id="v15492223">
											<entry>
												<para>
													<replaceable>lib</replaceable>
												</para>
											</entry>
											<entry>
												<para>Full path to the NBDB2 library.</para>
												<para>
													<xref role="linkmoreinfo" xreflabel="About the NetBackup for DB2 components" linkend="v15491721"/>
												</para>
											</entry>
										</row>
									</tbody>
								</tgroup>
							</informaltable>
						</listitem>
					</itemizedlist>
				</section>
				<section id="id-SF0A0191135" revision="09232024104513">
					<title id="v15492226">Recovering a DB2 database - Restoring archive logs</title>
					<para id="v15492227">You can use the procedure in this section if you need to restore the archive logs before you perform the roll-forward.</para>
					<itemizedlist id="v15492228">
						<title id="v15492229">Use the procedure in this section to restore the archive logs manually if the following situations exist:</title>
						<listitem id="v15492230">
							<para id="v15492231">If the archive logs are not in the standard locations. When this situation exists, &ProductName; cannot perform a seamless restore of DB2. You may have moved one or more of the needed archive logs to secondary storage such as tape, network storage, or some other location. For example, if <command moreinfo="none">ARCFUNC COPY</command> is in effect and the old archive logs were moved to tape, perform the procedure in this section.</para>
						</listitem>
						<listitem id="v15492232">
							<para id="v15492233">If <command moreinfo="none">ARCFUNC COPY</command> was in effect in the <command moreinfo="none">db2.conf</command> file at the time the archive logs were backed up and the <command moreinfo="none">ARCDIR</command> and <command moreinfo="none">RETDIR</command> parameters specify two different locations.</para>
						</listitem>
						<listitem id="v15492234">
							<para id="v15492235">If <command moreinfo="none">PARTITIONTYPE RAW</command> was in effect in the <command moreinfo="none">db2.conf</command> file for some (not all) of the archive log backups.</para>
						</listitem>
					</itemizedlist>
					<para id="v15492236">For more information about the DB2 commands, see your DB2 documentation.</para>
					<procedure id="v15492237">
						<title id="v15492238">To restore a DB2 database when the archive logs are in a non-standard location</title>
						<step performance="required" id="v15492239">
							<para id="v15492240">Restore the database.</para>
							<para id="v15492241">Issue the DB2 <command moreinfo="none">RESTORE DATABASE</command> command to restore the database itself. For example:</para>
							<para id="v54309979">Windows: <command>db2 restore db <replaceable>db_name</replaceable> load <replaceable>install_path</replaceable>\NetBackup\bin\nbdb2.dll</command>
							</para>
							<para id="v15492244">Where <replaceable>db_name</replaceable> is the name of the DB2 database you are to restore.</para>
							<para id="v54309980">UNIX: <command>db2 restore db <replaceable>db_name</replaceable> load /usr/openv/netbackup/bin/<replaceable>lib</replaceable>
								</command>
							</para>
							<para id="v15492245">Where:</para>
							<informaltable id="v15492246" tabstyle="simple">
								<tgroup cols="2" id="v15492247">
									<colspec colnum="1" colwidth="1in"/>
									<colspec colnum="2" colwidth="*"/>
									<tbody id="v15492250">
										<row id="v15492251">
											<entry>
												<para>
													<replaceable>db_name</replaceable>
												</para>
											</entry>
											<entry>
												<para>Name of the DB2 database.</para>
											</entry>
										</row>
										<row id="v15492252">
											<entry>
												<para>
													<replaceable>lib</replaceable>
												</para>
											</entry>
											<entry>
												<para>Full path to the NBDB2 library.</para>
												<para>
													<xref role="linkmoreinfo" xreflabel="About the NetBackup for DB2 components" linkend="v15491721"/>
												</para>
											</entry>
										</row>
									</tbody>
								</tgroup>
							</informaltable>
						</step>
						<step performance="required" id="v15492254">
							<para id="v15492255">Use &ProductName; to browse the archive logs.</para>
							<para id="v15492256">If a restore requires any log files that are backed up from a file system and a raw device, retrieve the logs from the file system manually.</para>
							<para id="v15492257">You can use the <command moreinfo="none">bplist</command> command to browse the archive logs and find those missing from the restore directories.</para>
							<para id="v15492258">If <command moreinfo="none">PARTITIONTYPE RAW</command> is specified in the <command moreinfo="none">db2.conf</command> file, the user exit program looks for only those logs when you perform the restore. The missing logs are those that were written when <command moreinfo="none">PARTITIONTYPE RAW</command> was not in effect.</para>
						</step>
						<step performance="required" id="v15492261">
							<para id="v15492262">Use operating system commands to copy the missing archive logs to the correct locations in your operating system. For example:</para>
							<para id="v15492264">On Windows, use your mouse to copy the files from one location to another.</para>
							<para id="v15492263">On UNIX, use the <command moreinfo="none">cp</command> command.</para>
							<para id="v15492265">If <command moreinfo="none">ARCFUNC COPY</command> is in effect and the <command moreinfo="none">ARCDIR</command> and <command moreinfo="none">RETDIR</command> parameters specify different locations, copy the logs in the <command moreinfo="none">ARCDIR</command> directory to the <command moreinfo="none">RETDIR</command> directory. If <command moreinfo="none">ARCDIR</command> and <command moreinfo="none">RETDIR</command> specify the same location, you do not have to take any action. If some of the log files have been moved to secondary storage, restore these files to the <command moreinfo="none">RETDIR</command> directory.</para>
						</step>
						<step performance="required" id="v15492266">
							<para id="v15492267">Use &ProductName; to restore the archive logs.</para>
							<para id="v15492268">Use the <command moreinfo="none">bprestore</command> command. For example:</para>
							<para id="v54309982">Windows: <command>bprestore <replaceable>install_path</replaceable>\vedb2\db2\v8\db2V82d\NODE0000\SQL0001\SQLOGDIR\S00009.LOG</command>
							</para>
							<para id="v54309981">UNIX: <command>bprestore /vedb2/db2/v8/db2V82d/NODE0000/SQL0001/SQLOGDIR/S00009.LOG</command>
							</para>
						</step>
						<step performance="required" id="v15492271">
							<para id="v15492272">Bring the database online.</para>
							<para id="v15492273">When the roll-forward is initiated, DB2 sends a request to &ProductName; to restore the log files it needs. DB2 then reapplies the transaction information in the archive logs since the last full backup was performed. DB2 brings back the database online.</para>
							<para id="v15492274">For example, you can use the following command options if <command moreinfo="none">PARTITIONTYPE RAW</command> was not specified when any of the log files were backed up:</para>
							<programlisting format="linespecific" id="v15492275">db2 rollforward db sample to end of logs and stop</programlisting>
							<para id="v15492276">The <command moreinfo="none">ROLLFORWARD DATABASE</command> command issues messages if it cannot locate all the archive log files it needs. If you receive these messages, browse and restore the missing archive log files, and issue the <command moreinfo="none">ROLLFORWARD DATABASE</command> command again.</para>
							<para id="v15492277">After the database is successfully restored, the <command moreinfo="none">ROLLFORWARD DATABASE</command> command restores, and reapplies the transactions that are recorded in the archive log files since the last backup was performed. For example, if the backup image was created 10 days ago and restored today, the log files are used to restore any transactions that occurred after the backup.</para>
						</step>
					</procedure>
				</section>
				<section id="v15492315" revision="09232024104513">
					<title id="v15492316">RESTORE DATABASE command options</title>
					<para id="v15492317">You can restore a DB2 database with either the DB2 <command moreinfo="none">RESTORE DATABASE</command> command or with its alternative syntax, <command moreinfo="none">RESTORE DB</command>. The DB2 <command moreinfo="none">RESTORE DATABASE</command> command restores a database from &nbuProductName;.</para>
					<para id="v15492318">
						<xref xreflabel="DB2  command options" linkend="id-SF0A0168270" role="link"/> provides reference information for the command options when used in a &nbuProductName; for DB2 environment.</para>
					<table tabstyle="complex" id="id-SF0A0168270">
						<title id="v15492321">DB2 <command>RESTORE</command> command options</title>
						<tgroup cols="2" id="v15492322">
							<colspec colnum="1" colwidth="1.7in"/>
							<colspec colnum="2" colwidth="*"/>
							<thead id="v15492325">
								<row id="v15492326">
									<entry>
										<para>Option</para>
									</entry>
									<entry>
										<para>Purpose</para>
									</entry>
								</row>
							</thead>
							<tbody id="v15492327">
								<row id="v15492328">
									<entry>
										<para>
											<command moreinfo="none">LOAD <replaceable>NBDB2_Library_Path</replaceable>
											</command>
										</para>
									</entry>
									<entry>
										<para>Instructs DB2 to use the NBDB2 vendor library when you perform the restore.</para>
									</entry>
								</row>
								<row id="v15492329">
									<entry>
										<para>
											<command moreinfo="none">OPEN <replaceable>number</replaceable> SESSIONS</command>
										</para>
									</entry>
									<entry>
										<para>Specifies the number of concurrent data streams used for writing data. Use this option if you have multiple backup devices available or if you have multiplexing enabled in &nbuProductName;.</para>
										<para>Typically, you should specify the same number of sessions that were used during the backup. You can use fewer sessions, but it may degrade overall restore performance. No benefit exists if you specify more sessions.</para>
									</entry>
								</row>
								<row id="v15492330">
									<entry>
										<para>
											<command moreinfo="none">WITH <replaceable>number</replaceable> BUFFERS</command>
										</para>
									</entry>
									<entry>
										<para>Use this option when opening multiple sessions. See <command moreinfo="none">OPEN <replaceable>number</replaceable> SESSIONS</command>.</para>
										<para>The number of buffers must be twice the number of sessions. If you use fewer buffers it can degrade performance or can cause the restore to fail when it reads multiplexed images.</para>
									</entry>
								</row>
								<row id="v15492331">
									<entry>
										<para>
											<command moreinfo="none">BUFFER <replaceable>size</replaceable>
											</command>
										</para>
									</entry>
									<entry>
										<para>Use this option to increase or decrease the buffer size if necessary. Increased size can benefit performance, while decreased size may be necessary if you use numerous buffers. DB2 alters the actual size to be a multiple of the size that is used during the backup.</para>
									</entry>
								</row>
								<row id="v15492332">
									<entry>
										<para>
											<command moreinfo="none">WITHOUT PROMPTING</command>
										</para>
									</entry>
									<entry>
										<para>This option is required for unattended restores, and it must be specified in the backup scripts that &nbuProductName; runs.</para>
									</entry>
								</row>
								<row id="v15492333">
									<entry>
										<para>
											<command moreinfo="none">INCREMENTAL</command>
										</para>
									</entry>
									<entry>
										<para>When you use this option, DB2 may not read the entire image from &nbuProductName; media. Consequently, &nbuProductName; logs an error in the activity monitor, which can safely be ignored.</para>
									</entry>
								</row>
								<row id="v15492334">
									<entry>
										<para>
											<command moreinfo="none">AUTOMATIC</command>
										</para>
									</entry>
									<entry>
										<para>Use this option to restore a series of full and incremental images.</para>
										<para>An automated restore coordinates the restoration of a full backup and all associated incremental backups. A single automated restore restores a full backup, an optional cumulative incremental backup, and one or more differential incremental backups.</para>
									</entry>
								</row>
								<row id="v15492335">
									<entry>
										<para>
											<command moreinfo="none">HISTORY FILE</command>
										</para>
									</entry>
									<entry>
										<para>When you use this option, DB2 may not read the entire image from &nbuProductName; media. Consequently, &nbuProductName; logs an error in the activity monitor, which can safely be ignored.</para>
									</entry>
								</row>
								<row id="v15492336">
									<entry>
										<para>
											<command moreinfo="none">OPTIONS &quot;<replaceable>options-string</replaceable>&quot;</command>
										</para>
									</entry>
									<entry>
										<para>Specifies the options to be used for the restore operation. The string passes to the vendor support library, for example <filename>nbdb2.so</filename>, exactly as it was entered, without the quotes.</para>
										<para>When the options <command>DB2_POLICY</command>, <command>DB2_COPY_NUMBER</command>, <command>DB2_MEDIA_SERVER</command>, or <command>DB2_RESTORE_PRIORITY</command> are specified, the corresponding environment variables and <filename>db2.conf</filename> keywords are overridden.</para>
										<para>For more details about these options:</para>
										<para>
											<xref role="linkmoreinfo" xreflabel="Keywords for the db2.conf file" linkend="id-SF0A0175998"/>
										</para>
										<para>
											<xref role="linkmoreinfo" xreflabel="&nbuProductName;  for DB2 environment variables" linkend="v15491561"/>
										</para>
										<para>If multiple <command>key=value pairs</command> are specified, they are colon delimited. The following example shows colon delimited <command>key=value pairs</command>:</para>
										<para>
											<command>DB2 RESTORE ... OPTIONS "DB2_COPY_NUMBER=2:DB2_MEDIA_SERVER=server8"</command>
										</para>
										<para>Specifying this option overrides the value that is specified by the VENDOROPT database configuration parameter.</para>
									</entry>
								</row>
								<row id="v15492337">
									<entry>
										<para>
											<command moreinfo="none">PARALLELISM <replaceable>n</replaceable>
											</command>
										</para>
									</entry>
									<entry>
										<para>Specifies the number of buffer manipulators that are to be spawned during the restore operation. DB2 automatically chooses an optimal value for this parameter unless you explicitly enter a value.</para>
									</entry>
								</row>
							</tbody>
						</tgroup>
					</table>
				</section>
			</section>
		</section>
		<section id="v15491825" revision="09232024104513" vendor="referenced">
			<title id="v15491826">About an alternate restore</title>
			<para id="v15491824">An alternate restore lets you restore a DB2 database to a different client or to a different instance. You can also change the name of the database during the restore.</para>
			<itemizedlist id="v15491827">
				<title id="v15491828">Alternate restores differ from regular restores as follows:</title>
				<listitem id="v15491829">
					<para id="v15491830">Use the regular restore procedures if you want to restore a database into the same instance on the same &nbuProductName; client that hosted it previously. In this case, the database also retains its original name.</para>
				</listitem>
				<listitem id="v15491831">
					<para id="v15491832">Use alternate restore procedures if you want to restore a database to a different instance or to a different client or if you must rename the database during the restore.</para>
					<para id="v15491833">Databases within an instance must have unique names. If you restore a database into an instance that already has a database by that name, the alternate restore process overwrites the existing database.</para>
				</listitem>
			</itemizedlist>
			<para id="v15491835">
				<xref xreflabel="Types of restores permitted" linkend="id-SF0A0172531" role="link"/> summarizes the types of restores you can perform and whether you need to use regular or alternate restore procedures.</para>
			<table tabstyle="complex" pgwide="1" id="id-SF0A0172531">
				<title id="v15491838">Types of restores permitted</title>
				<tgroup cols="9" id="v15491839">
					<colspec colnum="1" colwidth="*"/>
					<colspec colnum="2" colwidth="*"/>
					<colspec colnum="3" colwidth="*"/>
					<colspec colnum="4" colwidth="*"/>
					<colspec colnum="5" colwidth="*"/>
					<colspec colnum="6" colwidth="*"/>
					<colspec colnum="7" colwidth="*"/>
					<colspec colnum="8" colwidth="*"/>
					<colspec colnum="9" colwidth="*"/>
					<thead id="v15491849">
						<row id="v15491850">
							<entry>
								<para>Object</para>
							</entry>
							<entry>
								<para>Regular restore</para>
							</entry>
							<entry>
								<para>Alternate restore</para>
							</entry>
							<entry>
								<para>Alternate restore</para>
							</entry>
							<entry>
								<para>Alternate restore</para>
							</entry>
							<entry>
								<para>Alternate restore</para>
							</entry>
							<entry>
								<para>Alternate restore</para>
							</entry>
							<entry>
								<para>Alternate restore</para>
							</entry>
							<entry>
								<para>Alternate restore</para>
							</entry>
						</row>
					</thead>
					<tbody id="v15491851">
						<row id="v15491852">
							<entry>
								<para>Database name</para>
							</entry>
							<entry>
								<para>Same</para>
							</entry>
							<entry>
								<para>Same</para>
							</entry>
							<entry>
								<para>Same</para>
							</entry>
							<entry>
								<para>Different</para>
							</entry>
							<entry>
								<para>Same</para>
							</entry>
							<entry>
								<para>Different</para>
							</entry>
							<entry>
								<para>Different</para>
							</entry>
							<entry>
								<para>Different</para>
							</entry>
						</row>
						<row id="v15491853">
							<entry>
								<para>Instance</para>
							</entry>
							<entry>
								<para>Same</para>
							</entry>
							<entry>
								<para>Same</para>
							</entry>
							<entry>
								<para>Different</para>
							</entry>
							<entry>
								<para>Same</para>
							</entry>
							<entry>
								<para>Different</para>
							</entry>
							<entry>
								<para>Different</para>
							</entry>
							<entry>
								<para>Same</para>
							</entry>
							<entry>
								<para>Different</para>
							</entry>
						</row>
						<row id="v15491854">
							<entry>
								<para>Client</para>
							</entry>
							<entry>
								<para>Same</para>
							</entry>
							<entry>
								<para>Different</para>
							</entry>
							<entry>
								<para>Same</para>
							</entry>
							<entry>
								<para>Same</para>
							</entry>
							<entry>
								<para>Different</para>
							</entry>
							<entry>
								<para>Same</para>
							</entry>
							<entry>
								<para>Different</para>
							</entry>
							<entry>
								<para>Different</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
			<para id="v15491855">For example, assume that you have two &nbuProductName; clients, <command moreinfo="none">grade7</command> and <command moreinfo="none">grade8</command>. Instances <command moreinfo="none">class1</command> and <command moreinfo="none">class2</command> are on <command moreinfo="none">grade7</command>. Instance <command moreinfo="none">class1</command> is on <command moreinfo="none">grade8</command>.</para>
			<para id="v15491856">
				<xref xreflabel="Alternate restore example" linkend="id-SF0A0160221" role="link"/> illustrates this example.</para>
			<figure float="0" id="id-SF0A0160221">
				<title id="v15491859">Alternate restore example</title>
				<mediaobject id="v15491860">
					<imageobject id="v15491861">
						<imagedata fileref="NBU_p128i008.svg" format="SVG" id="v15491862"/>
					</imageobject>
				</mediaobject>
			</figure>
			<itemizedlist id="v15491863">
				<title id="v15491864">The following list shows some of the types of restores you can perform with alternate restore procedures:</title>
				<listitem id="v15491865">
					<para id="v15491866">You can restore database <command moreinfo="none">eng1</command> from instance <command moreinfo="none">class2</command> on client <command moreinfo="none">grade7</command> into instance <command moreinfo="none">class1</command> on client <command moreinfo="none">grade8</command>. Database <command moreinfo="none">eng1</command> can retain its name because it is unique to instance <command moreinfo="none">class1</command>.</para>
				</listitem>
				<listitem id="v15491867">
					<para id="v15491868">You can restore database <command moreinfo="none">math1</command> from instance <command moreinfo="none">class1</command> on client <command moreinfo="none">grade7</command> into instance <command moreinfo="none">class1</command> on client <command moreinfo="none">grade8</command>. During the restore, you need to rename <command moreinfo="none">math1</command> to <command moreinfo="none">math2</command> because <command moreinfo="none">class1</command> on <command moreinfo="none">grade8</command> already has a database named <command moreinfo="none">math1</command>. Without renaming, the existing database <command moreinfo="none">math1</command> would be overwritten.</para>
				</listitem>
				<listitem id="v15491869">
					<para id="v15491870">You can restore database <command moreinfo="none">art1</command> from instance <command moreinfo="none">class2</command> on client <command moreinfo="none">grade7</command> into instance <command moreinfo="none">class1</command> on client <command moreinfo="none">grade7</command>. During the restore, you need to rename <command moreinfo="none">art1</command> to <command moreinfo="none">art2</command> because instance <command moreinfo="none">class1</command> already has a database named <command moreinfo="none">art1</command>. Without renaming, the existing database <command moreinfo="none">art1</command> would be overwritten.</para>
				</listitem>
			</itemizedlist>
			<section id="v15491871" revision="02232024133820">
				<title id="v15491872">Preparing the primary server for an alternate restore</title>
				<para id="v15491873" condition="db2">The examples in the following procedure assume that database <command moreinfo="none">SAMPLE</command> was backed up by <command moreinfo="none">client2</command>, and you want to restore <command moreinfo="none">SAMPLE</command> to <command moreinfo="none">client1</command>.</para>
				<para id="v15491874">For more information on how to manage client restores, see the <ulink url="http://www.veritas.com/docs/DOC5332">NetBackup Administrator's Guide, Volume I</ulink>.</para>
				<para id="v152586312">If you use a non-root service user account, specific access must be allowed for that user when you add files to the <filename>/usr/openv/netbackup/db/altnames</filename> directory. The service user account must have full access to these files through the ownership or group and the permissions. For example, if the service user is <filename>svcname</filename> and its group is <filename>srvgrp</filename>, the file can have permissions of <filename>400</filename>. If the file owner is for a different user and group, the file permissions must allow access to the service user. For example, <filename>777</filename>. Equivalent permission settings must be used in a Windows environment.</para>
				<procedure id="v15491875">
					<title id="v15491876">To prepare the &ProductName; primary server for alternate restores</title>
					<step performance="required" id="v15491877">
						<para id="v15491878" condition="db2">Log on to the &ProductName; primary server that hosts the policy that backed up database <command moreinfo="none">SAMPLE</command>.</para>
					</step>
					<step performance="required" id="v15491879">
						<itemizedlist id="v127371418">
							<title id="v127371419">Create a <replaceable>dest_client_name</replaceable> file on the &ProductName; primary server.</title>
							<listitem id="v127371420">
								<para id="v127371421">Windows: <command moreinfo="none">
										<replaceable>install_path</replaceable>\NetBackup\db\altnames\<replaceable>dest_client_name</replaceable>
									</command>
								</para>
							</listitem>
							<listitem id="v127371422">
								<para id="v127371423">UNIX: <command moreinfo="none">/usr/openv/netbackup/db/altnames/<replaceable>dest_client_name</replaceable>
									</command>
								</para>
							</listitem>
						</itemizedlist>
						<para id="v15491890">Where <replaceable>dest_client_name</replaceable> is the name of a client that is allowed to be a destination client for alternate restores. For example, <command moreinfo="none">client1</command>.</para>
					</step>
					<step performance="required" id="v15491891">
						<para id="v15491892">After creating a <replaceable>dest_client_name</replaceable> file, add the name of the &ProductName; for &db; source client to the <replaceable>dest_client_name</replaceable> file. For example, add the following line to this file:</para>
						<para id="v54309983">
							<command>client2</command>
						</para>
					</step>
				</procedure>
				<para id="v55370495">For more information on managing a client restore, see the <ulink url="http://www.veritas.com/docs/DOC5332">NetBackup Administrator's Guide, Volume I</ulink>. </para>
				<para id="v55370497" condition="db2">
					<xref xreflabel="Performing the alternate restore on the clients" linkend="v15491915" role="linkmoreinfo"/>
				</para>
			</section>
			<section id="v15491915" revision="09232024104513">
				<title id="v15491916">Performing the alternate restore on the clients</title>
				<para id="v15491917">The following procedures explain how to restore a DB2 database and its transaction logs. The procedure builds a request to DB2 to find the backup images that correspond to the database you try to restore. Type the commands in this procedure from the client that receives the restored database.</para>
				<procedure id="v15491918">
					<title id="v15491919">To perform an alternate restore of a DB2 database</title>
					<step performance="required" id="v15491920">
						<para id="v15491921">Modify the <command moreinfo="none">db2.conf</command> file on the destination client.</para>
						<itemizedlist id="v15491922">
							<title id="v15491923">Add the following definitions:</title>
							<listitem id="v15491924">
								<para id="v15491925">One to specify the alternate restore</para>
							</listitem>
							<listitem id="v15491926">
								<para id="v15491927">One to define the new database</para>
							</listitem>
							<listitem id="v15491928">
								<para id="v15491929">One to define the old database</para>
							</listitem>
							<listitem id="v15491930">
								<para id="v15491931">One to define the new log files</para>
							</listitem>
							<listitem id="v15491932">
								<para id="v15491933">One to define the old log files</para>
							</listitem>
						</itemizedlist>
						<para id="v15491934">The following example shows the definition that is needed to specify the alternate restore:</para>
						<programlisting format="linespecific" id="v15491935">OBJECTTYPE ALTERNATE # Specifies an alternate restore
SRCINST db2v832d     # Names the source instance that was backed up
SRCALIAS SAMPLE      # Names the source database that was backed up
DESTINST db2v832t    # Names the destination instance name
DESTALIAS NEWSAMPL   # Names the destination database alias name
ENDOPER              # Ends the object definition</programlisting>
						<para id="v15491936">The following example shows the definition that is needed to define the new database:</para>
						<programlisting format="linespecific" id="v15491937">DATABASE NEWSAMPL
OBJECTTYPE DATABASE
POLICY db2-bkup
SCHEDULE Default-Application-Backup
CLIENT_NAME Client1       # Restore to (and backup from) local host
ENDOPER</programlisting>
						<para id="v15491938">The following example shows the definition that is needed to define the old database:</para>
						<programlisting format="linespecific" id="v15491939">DATABASE SAMPLE
OBJECTTYPE DATABASE
POLICY db2-bkup
SCHEDULE Default-Application-Backup
CLIENT_NAME Client2       # Restore from backup of remote host
ENDOPER</programlisting>
						<para id="v15491940">The following example shows the definition that is needed to define the new archive log files:</para>
						<programlisting format="linespecific" id="v15491941">DATABASE NEWSAMPL
OBJECTTYPE ARCHIVE
POLICY db2_archive
SCHEDULE Default-Application-Backup
#SCHEDULE User            # Swap &apos;#&apos; on SCHEDULE for user-exit
CLIENT_NAME Client1       # Restore to (and backup from) local host
ARCFUNC SAVE 
ENDOPER</programlisting>
						<para id="v15491945">The following example shows the definition that is needed to define the old archive log files:</para>
						<programlisting format="linespecific" id="v15491946">DATABASE SAMPLE
OBJECTTYPE ARCHIVE
POLICY db2_archive
SCHEDULE Default-Application-Backup
#SCHEDULE User            # Swap &apos;#&apos; on SCHEDULE for user-exit
CLIENT_NAME Client2       # Restore from backup of remote host
ARCFUNC SAVE
ENDOPER</programlisting>
						<para id="v122274993"/>
					</step>
					<step performance="required" id="v69909816">
						<para id="v15491951">On the destination client, type the DB2 <command moreinfo="none">RESTORE</command> command.</para>
						<para id="v15491952">Type this command in the following format:</para>
						<programlisting format="linespecific" id="v15491953">db2 restore db <replaceable>db_being_restored</replaceable> load <replaceable>lib_path</replaceable> into 
<replaceable>new_db_name</replaceable> redirect
</programlisting>
						<para id="v15491954">Where:</para>
						<informaltable id="v15491955" tabstyle="simple">
							<tgroup cols="2" id="v15491956">
								<colspec colnum="1" colwidth="1.4in"/>
								<colspec colnum="2" colwidth="*"/>
								<tbody id="v15491959">
									<row id="v15491960">
										<entry>
											<para>
												<replaceable>db_being_restored</replaceable>
											</para>
										</entry>
										<entry>
											<para>Specify the name of the database that was backed up.</para>
										</entry>
									</row>
									<row id="v15491961">
										<entry>
											<para>
												<replaceable>lib_path</replaceable>
											</para>
										</entry>
										<entry>
											<para>Specify the full path to the &nbuProductName; library.</para>
										</entry>
									</row>
									<row id="v15491962">
										<entry>
											<para>
												<replaceable>new_db_name</replaceable>
											</para>
										</entry>
										<entry>
											<para>Specify the name for the new database. If the name of the new database matches the name of a database presently included in the new instance, the new database overwrites the existing database.</para>
										</entry>
									</row>
								</tbody>
							</tgroup>
						</informaltable>
						<para id="v15491963">For example:</para>
						<para id="v97220942">Windows:</para>
						<programlisting format="linespecific" id="v15491965">db2 restore db sample load <replaceable>install_path</replaceable>\NetBackup\bin\nbdb2.dll 
   into newsampl redirect</programlisting>
						<para id="v97220941">UNIX:</para>
						<programlisting format="linespecific" id="v15491964">db2 restore db sample load /usr/openv/netbackup/bin/nbdb2.sl 
   into newsampl redirect</programlisting>
					</step>
					<step performance="required" id="v15491966">
						<para id="v15491967">Set the location of the data files for the tablespace.</para>
						<para id="v15491968">Type this command in the following format:</para>
						<programlisting format="linespecific" id="v15491969">db2 set tablespace containers for 0 using &quot;(path <replaceable>path</replaceable>)&quot;
</programlisting>
						<para id="v15491970">Where <replaceable>path</replaceable> specifies the DB2 install path.</para>
						<para id="v15491971">For example, type one or more commands similar to the following:</para>
						<para id="v97220944">Windows:</para>
						<programlisting format="linespecific" id="v15491973">db2 set tablespace containers for 0 using &quot;(path 
DB2_<replaceable>install_path</replaceable>\db2v832t\NODE0000\SQL00001\SQLT0000.0)&quot;</programlisting>
						<para id="v97220943">UNIX:</para>
						<programlisting format="linespecific" id="v15491972">db2 set tablespace containers for 0 using &quot;(path 
DB2_<replaceable>install_path</replaceable>/db2v832t/NODE0000/SQL00001/SQLT0000.0)&quot;</programlisting>
					</step>
					<step performance="required" id="v15491974">
						<para id="v15491975">Restore the database.</para>
						<para id="v15491976">Type the <command moreinfo="none">RESTORE</command> command in the following format:</para>
						<programlisting format="linespecific" id="v15491977">db2 restore db <replaceable>db_being_restored</replaceable> continue</programlisting>
						<para id="v15491978">For example:</para>
						<programlisting format="linespecific" id="v15491979">db2 restore db sample continue</programlisting>
					</step>
					<step performance="required" id="v15491980">
						<para id="v15491981">(Optional) Restore the transaction logs.</para>
						<para id="v15491982">
							<xref xreflabel="Restoring the transaction logs" linkend="id-SF0A0122166" role="linkmoreinfo"/>
						</para>
					</step>
					<step performance="required" id="v15491984">
						<para id="v15491985">Use the DB2 <command moreinfo="none">ROLLFORWARD</command> command to restore the logs.</para>
						<para id="v15491986">Type this command in the following format:</para>
						<programlisting format="linespecific" id="v15491988">db2 rollforward db <replaceable>new_db_name</replaceable> to end of logs and stop</programlisting>
					</step>
				</procedure>
			</section>
			<section id="id-SF0A0122166" revision="09232024104513">
				<title id="v15491992">Restoring the transaction logs</title>
				<itemizedlist id="v15491993">
					<title id="v15491994">Perform this procedure if one of the following is true:</title>
					<listitem id="v15491995">
						<para id="v15491996">The archive logs did not originally reside on a raw device.</para>
					</listitem>
					<listitem id="v15491997">
						<para id="v15491998">The user exit program was used to back up the archive logs.</para>
					</listitem>
				</itemizedlist>
				<procedure id="v15491999">
					<title id="v15492000">To restore the transaction logs</title>
					<step performance="required" id="v15492001">
						<para id="v15492002">On the destination client, create a directory for the restored transaction log files.</para>
						<para id="v15492003">For example:</para>
						<para id="v54309996">Windows: <command>mkdir C:\db\db2_v5\home\db2inst1\NODE0000\SQL00001\SQLOGDIR</command>
						</para>
						<para id="v54309995">UNIX: <command>mkdir /db/db2_v5/home/db2inst1/NODE0000/SQL00001/SQLOGDIR</command>
						</para>
					</step>
					<step performance="required" id="v15492006">
						<para id="v15492007">Use the <command moreinfo="none">bprestore</command> command to restore the logs.</para>
						<para id="v15492008">For example:</para>
						<para id="v54309998">Windows: <command>bprestore <replaceable>install_path</replaceable>\db\db2_v5\home\db2inst1\ NODE0000\SQL00001\SQLOGDIR\S00001.LOG</command>
						</para>
						<para id="v54309997">UNIX: <command>bprestore /db/db2_v5/home/db2inst1/NODE0000/SQL00001 /SQLOGDIR/S00001.LOG</command>
						</para>
					</step>
					<step performance="required" id="v15492011">
						<para id="v15492013">If the directory into which you restored the log files is not correct for the destination database, move the logs to the proper location.</para>
					</step>
					<step performance="required" id="v15492014">
						<para id="v15492015">Verify that the correct owner and group permissions are enabled on the log directory.</para>
					</step>
				</procedure>
			</section>
		</section>
		<section id="v152290688" revision="04052022133451" vendor="referenced">
			<title id="v152290699">About preventing the direct expiration of backup images</title>
			<para id="v152291172" condition="db2">Catalog maintenance operations on DB2 send requests into &ProductName; to synchronize the database catalog with the &ProductName; catalog. As part of the catalog synchronization, the database may initiate an image expiration (delete) request to the &ProductName; catalog. These requests may also come from the DBA when command-line options are used. For compliance reasons, you may want to prevent the expiration of images in the &ProductName; catalog from a database request by using a <filename>bp.conf</filename> entry on the primary server.</para>
			<para id="v152291173">To prevent the expiration of backup images, use the following <filename>bp.conf</filename> entry on the primary server:</para>
			<informaltable id="v152291174">
				<tgroup cols="2" id="v152291175">
					<colspec colname="col1" colnum="1" colwidth="*"/>
					<colspec colname="col2" colnum="2" colwidth="*"/>
					<tbody id="v152291178">
						<row id="v152291179">
							<entry colname="col1">
								<para condition="db2">
									<command>PREVENT_DB2_DIRECT_EXPIRE</command>
								</para>
							</entry>
							<entry colname="col2">
								<para>
									<command>YES</command>: This setting prevents the image delete requests from the database. The delete request receives a status code of 1420 and the log message indicates that the image is on <filename>LEGAL HOLD</filename>. </para>
								<para>
									<command>NO</command>: The default setting. All image delete requests are honored from the database.</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
			<note id="v152291180">
				<para id="v152291181">The normal image expiration (retention) and the <command>bpexpdate</command> command are unaffected by this setting.</para>
				<para id="v152291182">In a clustered primary server environment, these settings should be set and match in all the primary server <filename>bp.conf</filename> files.</para>
			</note>
			<para id="v152291183">The following is an example of a log entry when a status code of 1420 is produced.</para>
			<para id="v152291186" condition="db2">The <filename>bpdb2</filename> log message for DB2:</para>
			<programlisting id="v152291187" condition="db2">Unable to process delete request. Image is on LEGAL HOLD</programlisting>
		</section>
	</chapter>
	<chapter id="v23551873">
		<title id="v15492605">Using Snapshot Client with NetBackup for DB2</title>
		<section id="v56692474" revision="09232024131703" vendor="referenced">
			<title id="v14761208">&nbuProductName; for DB2 with Snapshot Client features</title>
			<para id="v14758629">To use &nbuProductName; for DB2 with Snapshot Client, &nbuProductName; Snapshot Client and &nbuProductName; for DB2 must both be licensed and installed.</para>
			<para id="v14761209">The following &nbuProductName; Snapshot Client features are available for use with &nbuProductName; for DB2.</para>
			<table id="v56423748">
				<title id="v56423749">Snapshot Client features used with &nbuProductName; for DB2</title>
				<tgroup cols="2" id="v56423750">
					<colspec colname="col1" colnum="1" colwidth="1.2in"/>
					<colspec colname="col2" colnum="2" colwidth="*"/>
					<thead id="v56423753">
						<row id="v56423754">
							<entry colname="col1">
								<para>Feature</para>
							</entry>
							<entry colname="col2">
								<para>Description</para>
							</entry>
						</row>
					</thead>
					<tbody id="v56423755">
						<row id="v56840721">
							<entry colname="col1">
								<para>Snapshot backup</para>
							</entry>
							<entry colname="col2">
								<para id="v14761212">A snapshot backup occurs when &nbuProductName; and DB2 coordinate to create a point-in-time disk image of the database for backup. This process is nearly instantaneous; so user access to the database is not interrupted during the backup. The snapshot can then be backed up to storage and or retained for instant recovery.</para>
							</entry>
						</row>
						<row id="v56423756">
							<entry colname="col1">
								<para>Instant recovery</para>
							</entry>
							<entry colname="col2">
								<para id="v14761216">This feature enables instant recovery of the database from a previously created snapshot. It combines snapshot technology with the ability to do rapid disk-based restores. </para>
							</entry>
						</row>
						<row id="v56423757">
							<entry colname="col1">
								<para>Off-host backup</para>
							</entry>
							<entry colname="col2">
								<para>The off-host backup shifts the burden of reading the snapshot to a separate host. The database host is only involved in performing the snapshot. The snapshot is mounted, read, and transferred to storage by an alternate client.</para>
							</entry>
						</row>
						<row id="v56423758">
							<entry colname="col1">
								<para>Block-level incremental backup</para>
							</entry>
							<entry colname="col2">
								<para id="v15500551">Available only on UNIX, a Block-Level Incremental (BLI) Backup uses the change tracking capabilities of the Veritas File System (VxFS) Storage Checkpoint feature. In a BLI backup, only the changed file system blocks are backed up, not the entire file or file system. A BLI backup saves time, decreases the amount of backup media that is required, and significantly reduces CPU and network overhead during backups.</para>
							</entry>
						</row>
						<row id="v56423759">
							<entry colname="col1">
								<para>Proxy operations</para>
							</entry>
							<entry colname="col2">
								<para>A proxy backup or restore is a special type of operation where DB2 does not read or write the database files. Instead, &nbuProductName; for DB2 acts as a proxy and performs all of the data movement. &nbuProductName; coordinates with DB2 to ensure that the correct files are in the correct state for the operation.</para>
								<para>Snapshot, BLI backups, and Instant Recovery are examples of proxy operations.</para>
								<para id="v15491238">Backups and restores remain tightly integrated with DB2 and its catalog, greatly simplifying administration tasks.</para>
							</entry>
						</row>
						<row id="v56423760">
							<entry colname="col1">
								<para>File-based operations</para>
							</entry>
							<entry colname="col2">
								<para>DB2 provides the list of files that require backup or restore to &nbuProductName; for DB2 with Snapshot Client. It then acts as a proxy to perform the data movement.</para>
								<para>Snapshot backups and user-exit log archiving are examples of file-based operations.</para>
								<para>More information is available.</para>
								<para>
									<xref role="linkseeheading" xreflabel="&nbuProductName; for DB2 file-based operations" linkend="v15491220"/>
								</para>
							</entry>
						</row>
						<row id="v56423762">
							<entry colname="col1">
								<para>Stream-based operations</para>
							</entry>
							<entry colname="col2">
								<para>Stream-based is the conventional DB2 database backup method. DB2 reads the files that require backup and provides a stream of buffers containing the contents to &nbuProductName; for DB2. &nbuProductName; transports the buffers to storage. At restore time, DB2 requests the return of the buffers and then writes them back onto the disk where the database resides.</para>
								<para>Database backups that do not use snapshots and vendor log archiving are examples of stream-based operations.</para>
								<para>More information is available.</para>
								<para>
									<xref role="linkseeheading" xreflabel="&nbuProductName; for DB2 stream-based operations" linkend="v15491210"/>
								</para>
							</entry>
						</row>
						<row id="v99289352">
							<entry colname="col1">
								<para>
									<command>bpdb2proxy</command>
								</para>
							</entry>
							<entry colname="col2">
								<para>This &nbuProductName; for DB2 command is used in backup and restore scripts to initiate snapshot backup and restore.</para>
								<note>
									<para>&nbuProductName; for DB2 does not support the <command>USE SNAPSHOT</command> parameter on the <command>DB2 BACKUP DATABASE</command> command.</para>
								</note>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
		</section>
		<section id="v15490653" revision="09232024131420" vendor="referenced">
			<title id="v15490654">About &nbuProductName; for DB2 with Snapshot Client operations</title>
			<para id="v99289371">&nbuProductName; for DB2 users can initiate snapshot operations directly from the command line using the <command>bpdb2proxy </command>command. However, it is more common to place the command into a backup or restore script and the script is then run. The script specifies the DB2 objects to be backed up or restored by the &nbuProductName; for DB2 agent on the client. The script can either run directly on the client or can be specified as the backup selection in a DB2 policy. If a script is specified in a policy, the primary server runs the script when automatic schedules are due to run.</para>
			<para id="v15490656">When the agent is started, the agent checks that the policy it uses for the backup is configured with the Snapshot Client attributes. The agent then initiates a snapshot that results in file-based backups of the DB2 files using &nbuProductName; to perform the data movement.</para>
			<para id="v15490657">The &nbuProductName; for DB2 agent uses DB2 APIs to put the data files into a quiesced mode. &nbuProductName; then creates a snapshot of the files. After the snapshot is created, &nbuProductName; for DB2 uses the DB2 APIs to take the data files out of quiesced mode. The data files are in quiesced mode only for the period of time it takes to create a snapshot.</para>
			<section id="v15490658" revision="09232024131420">
				<title id="v15490659">About the sequence of a &nbuProductName; for DB2 backup operation with Snapshot Client methods </title>
				<itemizedlist id="v15490660">
					<title id="v15490661">For a backup operation, the &nbuProductName; for DB2 agent performs the following tasks in the order shown:</title>
					<listitem id="v15490662">
						<para id="v15490663">Determines the list of files that make up the DB2 database.</para>
					</listitem>
					<listitem id="v15490664">
						<para id="v15490665">Suspends write activity to the data files (quiesces the database).</para>
					</listitem>
					<listitem id="v15490666">
						<para id="v15490667">Uses the Snapshot Client method to create a snapshot image of the mapped files.</para>
					</listitem>
					<listitem id="v15490668">
						<para id="v15490669">Enables DB2 write activity (unquiesces the database).</para>
					</listitem>
					<listitem id="v15490670">
						<para id="v15490671">Backs up the snapshot image of the data files.</para>
					</listitem>
				</itemizedlist>
			</section>
			<section id="v15490672" revision="09232024131420">
				<title id="v15490673">About the sequence of a &nbuProductName; for DB2 restore operation with Snapshot Client methods</title>
				<itemizedlist id="v15490674">
					<title id="v15490675">For a restore operation, the &nbuProductName; for DB2 agent performs the following tasks:</title>
					<listitem id="v15490676">
						<para id="v15490677">Using the DB2 database and a point in time, locates the physical backup images.</para>
					</listitem>
					<listitem id="v15490678">
						<para id="v15490679">Disconnects all users from the database (brings the database offline).</para>
					</listitem>
					<listitem id="v15490680">
						<para id="v15490681">Restores the images to the original database.</para>
					</listitem>
					<listitem id="v15490682">
						<para id="v15490683">Uses DB2 APIs to take the files out of the quiesced state, which puts the database in a roll-forward pending state.</para>
					</listitem>
					<listitem id="v15490684">
						<para id="v15490685">Reruns the transactions from the log files (performs the roll-forward operation).</para>
					</listitem>
					<listitem id="v15490686">
						<para id="v15490687">Enables the user connections to the database (brings the database online).</para>
					</listitem>
				</itemizedlist>
			</section>
			<section id="v15490688" revision="09232024131420">
				<title id="v15490689">About database objects supported by advanced backup methods</title>
				<para id="v15490690">DB2 allows snapshot operations at the node level, so &nbuProductName; can use file-based Snapshot Client backup methods to back up databases. &nbuProductName; for DB2 cannot use Snapshot Client methods to back up individual tablespaces or container files.</para>
				<note id="v66255071">
					<para id="v66255072">Before you can perform the very first snapshot backup, DB2 requires a stream-based backup of the database.</para>
				</note>
				<para id="v99289373">DB2 performs only conventional backups for transaction logs; use either the user-exit or <command>VENDOR</command> method. You cannot use Snapshot Client methods for transaction logs.</para>
				<para id="v15490692">Snapshot backups and log archiving require different configurations. When you configure &nbuProductName; for DB2 with Snapshot Client backups, be sure to configure the policies to allow both kinds of backups.</para>
				<para id="v15490693">
					<xref xreflabel="How Snapshot Client software affects backup types" linkend="v14761397" role="linkmoreinfo"/>
				</para>
			</section>
			<section id="v15490695" revision="09232024131420">
				<title id="v15490696">About multistreaming and DB2 snapshot backups</title>
				<para id="v99289384">To shorten the length of time to backup a snapshot of the DB2 database, the operation may perform multiple, concurrent, job streams in parallel. To configure, use the <command>-s</command> option on the <command>bpdb2proxy</command> command. When more than one stream is used, &nbuProductName; sorts the files by size and create equal sized groups, one for each stream to process.</para>
				<para id="v93613739">
					<xref xreflabel="Example: multiple sessions for a DB2 snapshot backup" linkend="v15490701" role="linkmoreinfo"/>
				</para>
			</section>
			<section id="v15490698" revision="09232024131420">
				<title id="v15490699">About symbolic links and DB2 backups and restores (UNIX)</title>
				<para id="v15490700">&nbuProductName; for DB2 with Snapshot Client fully supports backups and restores of the data files that consist of symbolic links and regular files. Both the symbolic link and the actual file are backed up and restored. But if you select <guimenuitem moreinfo="none">Retain snapshots for instant recovery</guimenuitem>, the symbolic link must reside on the same file system as the data file. When you use instant recovery, if the symbolic link resides on a different file system than the data file it points to, the restore fails.</para>
			</section>
			<section id="v15491210" revision="09232024131703">
				<title id="v15491211">&nbuProductName; for DB2 stream-based operations</title>
				<para id="v99294477">Stream-based operations are the conventional method used by DB2 and &nbuProductName; to backup and restore the database. Log archiving using the <command>VENDOR</command> method is also stream-based.</para>
				<para id="v99294478">During a stream-based backup, the DB2 server processes (for example: <command>db2agent</command>, <command>db2bm</command>, <command>db2med</command>) read the DB2 file contents into buffers. The stream of buffers is passed to &nbuProductName; and transported to storage. At restore time, &nbuProductName; fetches the buffers from storage and returns them to the DB2 server processes which write them back to the file system.</para>
				<para id="v99294479">If the DB2 command line is configured to use multiple sessions, then there are multiple streams of buffers. Each stream of buffers is a unique application backup job and is cataloged as a unique backup image.</para>
				<para id="v15491213">
					<xref xreflabel="&nbuProductName; for DB2 stream-based backup or restore" linkend="id-SF0A0138017" role="link"/> represents a stream-based backup or restore.</para>
				<figure float="0" pgwide="1" id="id-SF0A0138017">
					<title id="v15491216">&nbuProductName; for DB2 stream-based backup or restore</title>
					<mediaobject id="v15491217">
						<imageobject id="v15491218">
							<imagedata fileref="DB2_fig_5_1.svg" id="v99297980"/>
						</imageobject>
					</mediaobject>
				</figure>
				<para id="v55247041">
					<xref xreflabel="&nbuProductName; for DB2 file-based operations" linkend="v15491220" role="linkmoreinfo"/>
				</para>
			</section>
			<section id="v15491220" revision="09232024131703">
				<title id="v15491221">&nbuProductName; for DB2 file-based operations</title>
				<para id="v15491222">In a file-based operation, DB2 provides the list of files that require backup or restore to &nbuProductName; for DB2. &nbuProductName; for DB2 performs the data movement.</para>
				<para id="v15491223">
					<xref xreflabel="&nbuProductName; for DB2 with Snapshot Client file-based backup or restore" linkend="id-SF0A0179208" role="link"/> represents a file-based backup or restore.</para>
				<figure float="0" id="id-SF0A0179208">
					<title id="v15491226">&nbuProductName; for DB2 with Snapshot Client file-based backup or restore</title>
					<mediaobject id="v33759743">
						<imageobject id="v33759744">
							<imagedata fileref="db2_fig_5_2.svg" id="v99294700"/>
						</imageobject>
					</mediaobject>
				</figure>
			</section>
			<section id="v15490701" revision="09232024131420">
				<title id="v15490702">Example: multiple sessions for a DB2 snapshot backup</title>
				<para id="v15490703">The following &nbuProductName; for DB2 sample command initiates a snapshot backup on node 0:</para>
				<programlisting format="linespecific" id="v15490704">bpdb2proxy -backup -d sample -u db2user -p password -s 3 -n 0</programlisting>
				<para id="v15490705">The agent groups the database files into three streams and initiates a file-based backup for each stream. After the backup is done, DB2 starts a conventional backup of the transaction logs using either the user-exit or vendor method.</para>
				<para id="v15490706">Issue this command on each node of the database.</para>
				<note id="v99294745">
					<para id="v99294746">If the policy used by the backup is not configured for Snapshot Client, the backup fails.</para>
				</note>
			</section>
		</section>
		<section id="v14759227" revision="06272024110740" vendor="referenced">
			<title id="v14759228">About configuring Snapshot Client with &DatabaseAgent;</title>
			<para id="v164610620">This topic explains how to configure snapshot and instant recovery backups for the &db; policy. For information on how a snapshot method is automatically selected and details on the types of backup methods, see the <ulink url="https://www.veritas.com/docs/DOC5332">&nbuProductName; Snapshot Manager for Data Center Administrator's Guide</ulink>.</para>
			<para id="v14759230">Snapshot backups do not back up all database objects. Your backup configuration must include one or more automatic schedules to perform snapshot backups and one or more application schedules to perform stream-based backups. This configuration ensures that the entire database can be restored successfully.</para>
			<itemizedlist id="v14759231" condition="db2;ora">
				<title id="v14759232">
					<remark>db2;ora</remark>For snapshot or instant recovery backups, configure the following policies and schedules as follows:</title>
				<listitem id="v14759233">
					<para id="v14759234">A &db; policy with the following attributes:</para>
					<itemizedlist id="v14759235">
						<listitem id="v14759236">
							<para id="v14759237">Snapshot methods for the file systems in which the database files reside.</para>
						</listitem>
						<listitem id="v14759238">
							<para id="v14759239">A backup method on the policy attributes dialog box.</para>
						</listitem>
						<listitem id="v14759240">
							<para id="v14759241">An Automatic Full Backup schedule to perform snapshot and off-host backups of the database.</para>
						</listitem>
						<listitem id="v14759242">
							<para id="v14759243">(Conditional) For script-based policies: An Application Backup schedule to back up the transaction logs. </para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem id="v104002745" condition="db2">
					<para id="v104002746">DB2 does not support snapshot backups of database transaction logs. If DB2 is configured to use the user exit program, review the following topic:</para>
					<para id="v104002747">
						<xref xreflabel="About backing up archive log files with the user exit program" linkend="v15490528" role="linkmoreinfo"/>
					</para>
				</listitem>
			</itemizedlist>
		</section>
		<section id="v14759198" revision="06272024111123" vendor="referenced">
			<title id="v14759199">Configuration requirements for snapshot backups with &DatabaseAgent;</title>
			<para id="v164610619">Each snapshot type has its own hardware requirements, software requirements, compatibility with certain features, and the snapshot methods that are supported. Special requirements apply for specific types of backups. See the <ulink url="https://www.netbackup.com/compatibility">&nbuProductName; Hardware and Cloud Storage Compatibility List (HCL)</ulink> for more information. Familiarize yourself with this information before you configure any snapshot backups.</para>
			<itemizedlist id="v14759201">
				<title id="v14759202">The following list highlights some of the requirements that pertain to database agents:</title>
				<listitem id="v14759203">
					<para id="v59355513">Snapshot Client backups do not back up all database objects. Your backup configuration must include schedules to perform snapshot and stream-based backups. This configuration ensures that the entire database can be restored successfully. </para>
				</listitem>
				<listitem id="v59355515">
					<para id="v104305640">On UNIX, the user identification and group identification numbers (UIDs and GIDs) associated with the files to be backed up must be available. The UID and GID must be available to both the primary client and the alternate backup client. The UID on the primary client and the alternate backup client must be the same. Similarly, the GID on the primary client and the alternate backup client must be the same.</para>
				</listitem>
				<listitem id="v90295465">
					<para id="v90295466">Ensure that the data files reside on a volume or a file system that does not contain archive logs, control files, or executables.</para>
				</listitem>
				<listitem id="v90295467">
					<para id="v90295468" condition="db2">Allocate a different set of volumes or file systems to the DB2 executables versus the configuration files and transaction logs.</para>
					<para id="v104305665" condition="db2">One reason to have two different volumes is to separate the data files from the other files. If the logs are configured on the same volumes as the data files, the volumes the logs are temporarily frozen while &ProductName; takes the snapshot. The logs and the database activity may freeze until the logs become accessible again.</para>
					<para id="v90295470">Another reason for writing the data files to their own repository is because it is required for an instant recovery point-in-time rollback. Only data files can exist on the volume that you want to restore.</para>
				</listitem>
				<listitem id="v14759219">
					<para id="v14759220">The hardware and software that is required for the appropriate snapshot method must be installed and configured correctly.</para>
				</listitem>
				<listitem id="v14759221">
					<para id="v14759222">&ProductName; Snapshot Client must be installed and configured correctly, and the primary server must have a valid license for this option.</para>
				</listitem>
				<listitem id="v14759223">
					<para id="v14759224">To perform off-host backups, specify the off-host in the backup policy and ensure that host has the software and permissions to mount the snapshot.</para>
				</listitem>
			</itemizedlist>
		</section>
		<section id="v14759270" revision="09232024131420" vendor="referenced">
			<title id="v14759271">Configuring a snapshot policy for &DatabaseAgent;</title>
			<para id="v14759272">The following procedure shows how to configure a snapshot policy with optional instant recovery, snapshot retention, and off-host backup.</para>
			<procedure id="v14759273">
				<title id="v14759274">To configure a snapshot policy</title>
				<step performance="required" id="v14759275">
					<para id="v166172232">Open the &nbuProductName; web UI.</para>
				</step>
				<step performance="required" id="v166172233">
					<para id="v14759276">On the left, select <guimenuitem>Protection &gt; Policies</guimenuitem>.</para>
				</step>
				<step performance="required" id="v166172238">
					<para id="v14761330">Select <guimenuitem>Add</guimenuitem>.</para>
				</step>
				<step performance="required" id="v14759277">
					<para id="v14759278">Select the <guilabel>Attributes</guilabel> tab.</para>
				</step>
				<step performance="required" id="v14759279">
					<para id="v14759280">Select the <guimenuitem>DB2</guimenuitem> policy type.</para>
				</step>
				<step performance="required" id="v14759297">
					<para id="v14759298">Select a policy storage unit from the <guimenuitem moreinfo="none">Policy storage</guimenuitem> list.</para>
					<para id="v14759300">Select a policy storage unit in this step even if you plan to select <guimenuitem moreinfo="none">Snapshots only</guimenuitem> later in this procedure.</para>
				</step>
				<step performance="required" id="v14759305">
					<para id="v14759306">Click <guimenuitem moreinfo="none">Perform snapshot backups</guimenuitem>.</para>
				</step>
				<step performance="required" id="v14759307">
					<para id="v14759308">(Optional) Click <guimenuitem moreinfo="none">Snapshot options</guimenuitem> to choose a snapshot method.</para>
					<para id="v14759309">By default &nbuProductName; chooses a snapshot method for you. To choose a snapshot method, click <guimenuitem moreinfo="none">auto</guimenuitem> (the default) or click one of the methods that are presented in the list.</para>
					<para id="v14759310"/>
					<para id="v14759311">The snapshot method that you can use depends on your hardware environment and software environment. Only certain snapshot methods are supported in certain environments. See the supported platforms matrix on the Veritas Support website for more information.</para>
					<para id="v14759312">You can configure only one snapshot method per policy. For example, assume that you want one snapshot method for clients a, b, and c, and a different method for clients d, e, and f. Then you need to create two policies for each group of clients and select one method for each policy.</para>
				</step>
				<step performance="required" id="v14759313">
					<para id="v14759314">(Optional) Select <guimenuitem moreinfo="none">Retain snapshots for Instant Recovery or SLP management</guimenuitem>.</para>
					<para id="v14759315">When this option is selected, &nbuProductName; retains the snapshot backup image on disk for later use in recovery.</para>
				</step>
				<step performance="required" id="v14759316">
					<para id="v14759317">(Optional) Select <guimenuitem moreinfo="none">Perform off-host backup</guimenuitem>.</para>
					<para id="v14759318">By default, the client that hosts the database performs the backup. If you want to reduce the I/O processing load on the client that hosts the database, specify an alternate client to perform the backup.</para>
				</step>
				<step performance="required" id="v14759319">
					<para id="v14759320">(Conditional) For off-host backup method, select <guimenuitem moreinfo="none">Alternate client</guimenuitem>.</para>
					<para id="v140215689">Specify the name of the client to perform the backup. This option may require additional configuration. The alternate client must be a client that shares the disk array.</para>
				</step>
				<step performance="required" id="v14759329">
					<para id="v14759330">Select the <guilabel>Schedules</guilabel> tab.</para>
				</step>
				<step performance="required" id="v14759331">
					<para id="v14759332">Select <guimenuitem moreinfo="none">Add</guimenuitem>.</para>
					<para id="v14759333"/>
				</step>
				<step performance="required" id="v14759334">
					<para id="v14759335">Configure an Automatic schedule for the database files.</para>
				</step>
				<step performance="required" id="v14759336">
					<para id="v14759337">(Conditional) In the <guilabel>Instant Recovery</guilabel> group, select <guimenuitem moreinfo="none">Snapshots only</guimenuitem>.</para>
					<para id="v14759338">This setting suppresses &nbuProductName;'s default behavior, which is to copy the snapshot to a storage unit. When you select <guimenuitem moreinfo="none">Snapshots only</guimenuitem>, &nbuProductName; creates the on-disk snapshot copy of the database, but it does not copy the snapshot to a storage unit. The on-disk snapshot becomes the only backup copy. Note that the on-disk snapshot is not considered to be a replacement for a traditional backup.</para>
				</step>
				<step performance="required" id="v14759339">
					<para id="v14759340"> Configure an Application backup schedule.</para>
					<para id="v14759341">&nbuProductName; uses this storage unit for the initial stream-based backup of the database before subsequent snapshot backups are performed. It is also used for stream-based backups of the transaction logs if you use the <command moreinfo="none">VENDOR</command> method.</para>
				</step>
				<step id="v99300071">
					<para id="v99300072">(Conditional) For BLI backups it is permissible to create Automatic cumulative incremental and Automatic differential incremental backup schedules.</para>
					<para id="v99300073">
						<xref xreflabel="How BLI works with &DatabaseAgent; (UNIX)" linkend="v14761239" role="linkmoreinfo"/>
					</para>
				</step>
				<step performance="required" id="v14759350">
					<para id="v14759351">On the <guilabel>Clients</guilabel> tab, specify the clients to be included in this policy.</para>
				</step>
				<step performance="required" id="v14759356">
					<para id="v14759357">On the <guilabel>Backup selections</guilabel> tab, specify a backup script.</para>
					<para id="v14759358">More information is available about how to use scripts for a &DatabaseAgent; policy with Snapshot Client.</para>
					<para id="v14759359">
						<xref xreflabel="How Snapshot Client software affects scripts" linkend="v14761429" role="linkmoreinfo"/>
					</para>
				</step>
				<step performance="required" id="v14759361">
					<para id="v14759362">Configure other attributes and add any additional schedules and backup selections.</para>
				</step>
			</procedure>
		</section>
		<section id="v99300119" revision="09232024131420" vendor="referenced">
			<title id="v99300152">About configuring the db2.conf for a snapshot policy</title>
			<para id="v99300153">A snapshot backup requires that the <filename>db2.conf </filename>file be configured. The configuration is initially exactly the same as a stream-based backup because DB2 requires an initial stream-based backup before a snapshot backup can be taken. Be sure that the archive stanza is appropriate for the log archive method.</para>
			<itemizedlist id="v99300154">
				<title id="v99300155">When you use the user-exit method for log archiving, configure the <filename>db2.conf</filename> in the following ways: </title>
				<listitem id="v99300156">
					<para id="v99300157">Configuration of the <filename>db2.conf</filename> file for initial stream-based backup:</para>
					<programlisting id="v99300158">DATABASE SAMPLE
OBJECTTYPE DATABASE
POLICY DB2_DB_Policy
SCHEDULE Default-Application-Backup
ENDOPER

DATABASE SAMPLE
OBJECTTYPE ARCHIVE
POLICY DB2_Log_Policy
SCHEDULE User
ARCFUNC SAVE
#ARCFUNC COPY
#ARCDIR C:\MyLogs\arcdir\
#RETDIR C:\MyLogs\arcdir\
#ARCDIR /home/db2inst1/arcdir
#RETDIR /home/db2inst1/arcdir
ENDOPER</programlisting>
				</listitem>
				<listitem id="v99300159">
					<para id="v99300160">Configuration of the <filename>db2.conf</filename> file for subsequent snapshot backups:</para>
					<itemizedlist id="v99300161">
						<listitem id="v99300162">
							<para id="v99300163">After the initial backup, the <filename>db2.conf</filename> file needs one modification to the database stanza before snapshot backups are performed. The specified schedule for the database stanza should be changed to the name of the automatic full backup schedule instead of the application backup schedule.</para>
						</listitem>
					</itemizedlist>
					<programlisting id="v99300164">DATABASE SAMPLE
OBJECTTYPE DATABASE
POLICY DB2_DB_Policy
SCHEDULE Full
ENDOPER

DATABASE SAMPLE
OBJECTTYPE ARCHIVE
POLICY DB2_Log_Policy
SCHEDULE User
ARCFUNC SAVE
#ARCFUNC COPY
#ARCDIR C:\MyLogs\arcdir\
#RETDIR C:\MyLogs\arcdir\
#ARCDIR /home/db2inst1/arcdir
#RETDIR /home/db2inst1/arcdir
ENDOPER</programlisting>
				</listitem>
			</itemizedlist>
		</section>
		<section id="v23550042" revision="03192023203709" vendor="referenced">
			<title id="v23550104">Restoring &DatabaseAgent; from a snapshot backup</title>
			<itemizedlist id="v23550105">
				<title id="v23550106">The following topics describe how to restore files, volumes, and file systems from a snapshot backup:</title>
				<listitem id="v23550107">
					<para id="v23550108">
						<xref xreflabel="About restoring individual files from a &DatabaseAgent; snapshot backup" linkend="v14758135" role="linkseeheading"/>
					</para>
				</listitem>
				<listitem id="v23550110">
					<para id="v23550111">
						<xref xreflabel="About &DatabaseAgent; restores of volumes and file systems using snapshot rollback" linkend="v14758095" role="linkseeheading"/>
					</para>
				</listitem>
				<listitem id="v59438514">
					<para id="v59438515">
						<xref xreflabel="Performing a &DatabaseAgent; point-in-time rollback restore from a SnapVault backup (UNIX)" linkend="v14758060" role="linkseeheading"/>
					</para>
				</listitem>
			</itemizedlist>
			<section id="v14758135" revision="06272024112104">
				<title id="v14758140">About restoring individual files from a &DatabaseAgent; snapshot backup</title>
				<para id="v164610621">Data that is backed up with Snapshot Client methods is restored in the same way as data that is backed up without Snapshot Client methods.</para>
				<para id="v24877043" condition="db2">
					<xref xreflabel="Performing a database restore" linkend="v15492340" role="linkmoreinfo"/>
				</para>
				<para id="v14758146">Use this procedure for the files that were backed up with, or without, instant recovery enabled. In all cases, &db; determines the files that were backed up, and it initiates a corresponding restore request to the database agent.</para>
				<para id="v14758147">If instant recovery is enabled,&nbuProductName; attempts to restore the file by using the unique restore methods available with the instant recovery feature. The type of restore method that&nbuProductName; uses depends on your environment and the type of backup performed. If&nbuProductName; is unable to use any of the instant recovery methods, it restores the file in the typical manner. Data is copied from the snapshot to the primary file system. Information on the instant recovery methods that &nbuProductName; uses is available. See the <ulink url="https://www.veritas.com/docs/DOC5332">&nbuProductName; Snapshot Manager for Data Center Administrator&apos;s Guide</ulink>.</para>
			</section>
			<section id="v14758095" revision="06272024112210">
				<title id="v14758100">About &DatabaseAgent; restores of volumes and file systems using snapshot rollback</title>
				<para id="v14758101">You can request that an entire volume or an entire file system be restored from an instant recovery Snapshot backup. This type of a restore is called a point in time rollback. All the data in the snapshot is restored; single file restore is not available in a rollback.</para>
				<itemizedlist id="v14758102" condition="db2;sap">
					<title id="v14758103">You can perform a snapshot rollback from an instant recovery backup that was made with the following methods:</title>
					<listitem id="v14758106" condition="db2;sap">
						<para id="v14758107">UNIX: VxFS_Checkpoint snapshot<indexterm>
								<primary>VxFS_Checkpoint snapshot</primary>
							</indexterm>
						</para>
					</listitem>
					<listitem id="v14758108" condition="db2;sap">
						<para id="v14758109">vxvm snapshot<indexterm>
								<primary>vxvm snapshot</primary>
							</indexterm>
						</para>
					</listitem>
					<listitem id="v14758110" condition="db2;sap">
						<para id="v14758111">FlashSnap snapshots<indexterm>
								<primary>FlashSnap snapshots</primary>
							</indexterm>
						</para>
					</listitem>
				</itemizedlist>
				<para id="v166172236">See the <ulink url="https://www.veritas.com/docs/DOC5332">&nbuProductName; Snapshot Manager for Data Center Administrator&apos;s Guide</ulink>.</para>
				<itemizedlist id="v14758113">
					<title id="v14758114">The following considerations are relevant for &DatabaseAgent; restores:</title>
					<listitem id="v14758115">
						<para id="v14758116">Snapshot rollback overwrites the entire volume.</para>
					</listitem>
					<listitem id="v14758117">
						<para id="v14758118">With &DatabaseAgent;, snapshot rollback always performs file verification. The agent checks for the following:</para>
						<itemizedlist id="v14758119">
							<listitem id="v14758120">
								<para id="v14758121">The requested files (number and names) are identical to those in the snapshot</para>
							</listitem>
							<listitem id="v14758122">
								<para id="v14758123">The primary volume does not contain any files that were created after the snapshot was made</para>
							</listitem>
						</itemizedlist>
						<para id="v14758126">If verification fails, the rollback aborts with status 249.</para>
					</listitem>
					<listitem id="v14758127" condition="db2">
						<para id="v14758128">Use snapshot rollback with database files only. Database files and archive logs should exist on different file systems or volumes.</para>
					</listitem>
				</itemizedlist>
			</section>
			<section id="v14758060" revision="03152023150404">
				<title id="v14758065">Performing a &DatabaseAgent; point-in-time rollback restore from a SnapVault backup (UNIX)</title>
				<para id="v14758066">When you select a point-in-time rollback restore from a SnapVault backup, &ProductName; restores the entire subvolume (qtree) to a new subvolume (qtree) on the primary host. The restore does not overwrite the existing subvolume. File verification is not performed.<indexterm>
						<primary>SnapVault</primary>
					</indexterm>
				</para>
				<para id="v14758067">The format of the new subvolume name is as follows:</para>
				<para id="v17491760">
					<command>
						<replaceable>mountpointname</replaceable>_restore.<replaceable>timestamp</replaceable>
					</command>
				</para>
				<para id="v14758069">For example: <command moreinfo="none">subvol1_restore.2005.05.19.10h49m04s</command>
				</para>
				<procedure id="v14758070">
					<title id="v14758071">To perform a &DatabaseAgent; point-in-time rollback restore from a SnapVault backup (UNIX)</title>
					<step performance="required" id="v14758072">
						<para id="v14758073">Unmount the original subvolume, which is the subvolume that the restore process did not overwrite.</para>
					</step>
					<step performance="required" id="v14758074">
						<para id="v14758075">Rename the original subvolume.</para>
					</step>
					<step performance="required" id="v14758076">
						<para id="v14758077">Rename the new subvolume with the name of the original.</para>
					</step>
					<step performance="required" id="v14758078">
						<para id="v14758079">Mount the new subvolume on the client. Use the <command moreinfo="none">ALTER DATABASE RENAME DATAFILE</command> command to point to the restored data file on the newly created subvolume.</para>
					</step>
				</procedure>
			</section>
			<section id="v15491792" revision="09232024131420">
				<title id="v15491793">Performing a snapshot rollback restore from the command line</title>
				<para id="v15491794">This topic describes how to perform a snapshot rollback restore with the <command moreinfo="none">bpdb2proxy</command> command.</para>
				<procedure id="v15491795">
					<title id="v15491796">To specify a snapshot rollback restore from the command line</title>
					<step performance="required" id="v15491797">
						<para id="v15491798">If the file .SQLCRT.FLG exists, delete it.</para>
						<para id="v15491799">DB2 creates the .SQLCRT.FLG file when it creates a directory (usually during tablespace creation). For volume level rollback restores this file cannot be present. The directory structure must be present at the time DB2 creates a tablespace or you must delete this file after DB2 creates the directory during tablespace creation.</para>
					</step>
					<step performance="required" id="v15491800">
						<para id="v15491801">Use the <command moreinfo="none">bpdb2proxy</command> command in the following format:</para>
						<para id="v125231347">UNIX: <command>/usr/openv/netbackup/bin/bpdb2proxy -rollbkrestore -d &lt;<replaceable>DBALIAS</replaceable>&gt; [-u &lt;<replaceable>user</replaceable>&gt; -p &lt;<replaceable>password</replaceable>&gt;] [-s &lt;<replaceable>sessions</replaceable>&gt;] [-n &lt;<replaceable>node number</replaceable>&gt;] [-t &lt;mm/dd/yyyy [<replaceable>HH:MM:SS</replaceable>]&gt;] [-S &lt;<replaceable>ServerName</replaceable>&gt;] [-options &lt;<replaceable>options string</replaceable>&gt;]</command>
						</para>
						<para id="v125231348">Windows: <command>
								<replaceable>install_path</replaceable>\NetBackup\bpdb2proxy -rollbkrestore -d &lt;<replaceable>DBALIAS</replaceable>&gt; [-u &lt;<replaceable>user</replaceable>&gt; -p &lt;<replaceable>password</replaceable>&gt;] [-s &lt;<replaceable>sessions</replaceable>&gt;] [-n &lt;<replaceable>node number</replaceable>&gt;] [-t &lt;mm/dd/yyyy [<replaceable>HH:MM:SS</replaceable>]&gt;] [-S &lt;<replaceable>ServerName</replaceable>&gt;] [-options &lt;<replaceable>options string</replaceable>&gt;]</command>
						</para>
						<para id="v15491804">Where:</para>
						<informaltable id="v15491805" tabstyle="simple">
							<tgroup cols="2" id="v15491806">
								<colspec colnum="1" colwidth="1.4in"/>
								<colspec colnum="2" colwidth="*"/>
								<tbody id="v15491809">
									<row id="v15491810">
										<entry>
											<para>-<command moreinfo="none">rollbkrestore</command>
											</para>
										</entry>
										<entry>
											<para>Specifies that this restore is from a snapshot rollback.</para>
										</entry>
									</row>
									<row id="v15491811">
										<entry>
											<para>-d <replaceable>dbalias</replaceable>
											</para>
										</entry>
										<entry>
											<para>Database alias.</para>
										</entry>
									</row>
									<row id="v15491812">
										<entry>
											<para>-u <replaceable>user</replaceable>
											</para>
										</entry>
										<entry>
											<para>Username of the DB2 user.</para>
										</entry>
									</row>
									<row id="v15491813">
										<entry>
											<para>-p <replaceable>password</replaceable>
											</para>
										</entry>
										<entry>
											<para>Password for the DB2 user.</para>
										</entry>
									</row>
									<row id="v15491814">
										<entry>
											<para>-s <replaceable>session</replaceable>
											</para>
										</entry>
										<entry>
											<para>The number of sessions. Optional.</para>
										</entry>
									</row>
									<row id="v15491815">
										<entry>
											<para>-n <replaceable>node_number</replaceable>
											</para>
										</entry>
										<entry>
											<para>The node number. The default is 0. Optional.</para>
										</entry>
									</row>
									<row id="v15491816">
										<entry>
											<para>-t <replaceable>mm</replaceable>/<replaceable>dd</replaceable>/<replaceable>yyyy</replaceable> [<replaceable>HH</replaceable>:<replaceable>MM</replaceable>:<replaceable>SS</replaceable>]</para>
										</entry>
										<entry>
											<para>(Optional) The time of the backup.</para>
											<itemizedlist>
												<title>The values are as follows:</title>
												<listitem>
													<para>For <replaceable>mm</replaceable>, type the month.</para>
												</listitem>
												<listitem>
													<para>For <replaceable>dd</replaceable>, type the day of the month.</para>
												</listitem>
												<listitem>
													<para>For <replaceable>yyyy</replaceable>, type the year.</para>
												</listitem>
												<listitem>
													<para>For <replaceable>HH</replaceable>, type the hour of the day. Optional.</para>
												</listitem>
												<listitem>
													<para>For <replaceable>MM</replaceable>, type the minute of the hour. Optional.</para>
												</listitem>
												<listitem>
													<para>For <replaceable>SS</replaceable>, type the second of the minute. Optional.</para>
												</listitem>
											</itemizedlist>
										</entry>
									</row>
									<row id="v125231349">
										<entry>
											<para>-S &lt;<replaceable>ServerName</replaceable>&gt;</para>
										</entry>
										<entry>
											<para>The name of the server the restore is performed on.</para>
										</entry>
									</row>
									<row id="v125231350">
										<entry>
											<para>-options &lt;<replaceable>options string</replaceable>&gt;</para>
										</entry>
										<entry>
											<para> Specifies the options that are to be used for the restore operation. Currently, the only option is <command>DB2_RESTORE_PRIORITY</command>. By default, the preset priority for restore jobs is 90000, which is the highest preset job priority of any other &nbuProductName; job. The available range is 0 - 99999. The higher the number, the greater the job priority.</para>
											<para>You must use an <command>=</command> sign to specify the value of the option. Example:</para>
											<programlisting>bpdb2proxy -options "DB2_RESTORE_PRIORITY=100"</programlisting>
										</entry>
									</row>
								</tbody>
							</tgroup>
						</informaltable>
					</step>
				</procedure>
			</section>
			<section id="v14761061" revision="06072022141012">
				<title id="v14761066">Troubleshooting &DatabaseAgent; rollback restores<indexterm>
						<primary>restores</primary>
						<secondary>with Snapshot Client methods</secondary>
					</indexterm>
				</title>
				<para id="v14761067">If the rollback restore fails, it may be because the database still has a file open. Shut down and restart the database to try to correct this problem.</para>
			</section>
		</section>
		<section id="v14761223" revision="02292024151734" vendor="referenced">
			<title id="v14761228">About configuring &DatabaseAgent; block-level incremental backups on UNIX</title>
			<para id="v14761229">If only a small portion of a database changes on a daily basis, full database backups are costly in terms of time and media. The Block-Level Incremental (BLI) Backup interface extends the capabilities of &ProductName; to back up only the file system blocks that contain changed data blocks.</para>
			<para id="v14761230">A database BLI backup is done at the file system block level, which means only changed file blocks are backed up. Unchanged blocks within the files are not backed up. The VxFS Storage Checkpoint facility tracks changed blocks in real time. Accordingly, a BLI backup does not need to search the entire volume for the modified blocks at backup time. BLI backup saves time, decreases the amount of backup media that is required, and significantly reduces CPU and network overhead during backups. In addition, BLI backup allows more frequent backups, so backup images are more up to date.</para>
			<para id="v14761231">BLI backup is particularly useful for any large databases that are sized in terms of hundreds of gigabytes or terabytes. Most traditional methods for database backup require that any change in the database - no matter how small - requires that the entire database is backed up. With BLI backup, only modified blocks (or file) need to be backed up.</para>
			<para id="v14761232" condition="db2">BLI backups support the other features of &ProductName; for DB2, including policy types and schedules. It also remains tightly integrated with DB2 and its catalog, which greatly simplifies administration tasks.</para>
			<para id="v59373422">
				<xref xreflabel="Configuring policies for BLI backups with &DatabaseAgent;" linkend="v14761307" role="linkseeheading"/>
			</para>
			<section id="v14761239" revision="02092024115637">
				<title id="v14761240">How BLI works with &DatabaseAgent; (UNIX)</title>
				<para id="v14761242" condition="db2">&ProductName; supports BLI full backups and BLI incremental backups of &db; databases.</para>
				<para id="v14761243">BLI backup supports two types of incremental backups: differential and cumulative. Full, differential incremental, and cumulative incremental backups are specified as part of the policy schedule configuration. When a restore is performed, &ProductName; restores an appropriate full backup. Then it applies the changed blocks from the incremental backups.</para>
				<para id="v14761244">Restoring any of the incremental backup images requires &ProductName; to restore the last full backup image and all the subsequent incremental backups. The restore process continues until the specified incremental backup image is restored. &ProductName; performs this restore process automatically, and it is completely transparent. The media that stored the last full backup and the subsequent incremental backups must be available, or the restore cannot proceed.</para>
				<para id="v14761245">Note that restoring a file rewrites all blocks in that file. The first subsequent differential incremental backup and or all subsequent cumulative incremental backups back up all the blocks in the restored file. After an entire database is restored, the first subsequent backup results in a full backup.</para>
				<para id="v14761246">The restore destination can be a VxFS, UFS (Solaris), JFS (AIX), or HFS (HP-UX) file system. The destination VxFS file system does not need to support the Storage Checkpoint feature to restore files. However, a VxFS file system with the Storage Checkpoint feature is needed to perform BLI backups of the restored data.</para>
				<itemizedlist id="v14761247">
					<title id="v14761248">This topic uses the following terms to describe BLI backups:</title>
					<listitem id="v14761249">
						<para id="v14761250">Full Backup.</para>
						<para id="v14761251">A backup in which &ProductName; backs up each database file completely, not just data blocks that have changed since the last full or incremental backup.</para>
					</listitem>
					<listitem id="v14761252">
						<para id="v14761253">Cumulative BLI Backup.</para>
						<para id="v14761254">This type of backup is a backup of all the changed blocks in the database files since the last full backup. A cumulative BLI backup image contains only the data blocks of database files that changed since the last full backup. A cumulative BLI backup can reduce the number of incremental backup images that must be applied during a restore operation. This speeds up the restore process.</para>
					</listitem>
					<listitem id="v14761255">
						<para id="v14761256">Differential BLI backup.</para>
						<para id="v14761257">A backup in which &ProductName; performs a backup of only those data blocks (within the database files) that changed since the last backup. The previous backup can be of type full, cumulative incremental, or differential incremental.</para>
					</listitem>
				</itemizedlist>
				<para id="v14761259" condition="db2">When &ProductName; initiates BLI backups, it creates, manages, and uses the appropriate Storage Checkpoints of the filesystem(s) hosting the DB2 container files. These Storage Checkpoints identify and maintain a list of modified blocks.</para>
			</section>
			<section id="v59438520" revision="02092024115724">
				<title id="v14761261">About the Storage Checkpoint facility and &DatabaseAgent;</title>
				<para id="v14761263">The BLI backup methodology uses the Storage Checkpoint facility in the Veritas File System (VxFS). This facility is available through the Storage Foundation for &db;.<indexterm>
						<primary>Storage Checkpoint</primary>
					</indexterm>
				</para>
				<para id="v14761264">The VxFS Storage Checkpoint facility keeps track of the file blocks modified by the database since the last backup. &ProductName; with BLI backup leverages this facility to back up only changed blocks for an incremental backup. The entire volume or file is not backed up.</para>
				<para id="v14761265">VxFS Storage Checkpoint is a disk-efficient and I/O-efficient snapshot of file systems. A Storage Checkpoint provides a consistent, stable view of a file system at the instant when the file system was snapped or checkpointed. Instead of making a physically separate copy of the file system, a Storage Checkpoint tracks changed file system blocks. Disk space is saved and I/O overhead is significantly reduced.</para>
				<para id="v14761266">Because the changed blocks are tracked, the VxFS Storage Checkpoint enables BLI backups. VxFS Storage Checkpoint facility provides a consistent view of file systems, which allows BLI backup to freeze the database image during database backups.</para>
				<para id="v14761267">The Storage Checkpoint operation is similar to the snapshot file system mechanism. However, the Storage Checkpoint persists after a system restart which is unlike a snapshot. Also, the Storage Checkpoint operation is totally transparent to backup administrators. The Checkpoint image is managed and available only through &ProductName; or through the VxDBA utility for database backup available with the Veritas Storage Foundation.</para>
				<para id="v104451324">For more information on Storage Checkpoints, see the <ulink url="https://sort.veritas.com/documents">&CompanyName; Storage Foundation Administrator's Guide</ulink>.</para>
				<para id="v14761269" condition="db2">You can take a Storage Checkpoint while the database is online or offline. To take a Storage Checkpoint while the database is online, you must enable archive logging. During the creation of the Storage Checkpoint, all tablespaces are placed in backup mode.</para>
			</section>
			<section id="v14761292" revision="06272024112448">
				<title id="v14761293">Configuration requirements for BLI backups with &DatabaseAgent;</title>
				<itemizedlist id="v14761294">
					<title id="v14761295">Before you configure BLI backups, make sure that your configuration meets the following requirements:</title>
					<listitem id="v14761296">
						<para id="v14761297">&DatabaseAgent; is installed, licensed, and configured.</para>
					</listitem>
					<listitem id="v14761298">
						<para id="v14761299">&ProductName; Snapshot Client is installed and configured, and the primary server must have a valid license for this option.</para>
					</listitem>
					<listitem id="v14761300" condition="db2">
						<para id="v14761301">&CompanyName; Storage Foundation for DB2 must be installed and configured.</para>
					</listitem>
					<listitem id="v14761304">
						<para id="v14761305">&CompanyName; File System must have Storage Checkpoint licensed.</para>
					</listitem>
				</itemizedlist>
				<para id="v166172237">For more information see the <ulink url="https://www.veritas.com/docs/DOC5332">&nbuProductName; Snapshot Manager for Data Center Administrator&apos;s Guide</ulink>.</para>
			</section>
			<section id="v14761284" revision="02122024090212">
				<title id="v14761285">Storage Checkpoint configuration on the &DatabaseAgent; client</title>
				<para id="v14761286" condition="db2">
					<remark>db2</remark>By default, the &ProductName; for DB2 with Snapshot Client for proxy BLI backups uses the Fulldata Storage Checkpoint. When Fulldata Storage Checkpoint is in effect, the &ProductName; for DB2 agent keeps the DB2 database quiesced. The database is quiesced (write suspend) only for the time that is needed to create a Storage Checkpoint.</para>
				<para id="v14761288">To change the default option to use Nodata Storage Checkpoint, a user must create the following file, which can remain empty:</para>
				<programlisting format="linespecific" id="v14761289">    /usr/openv/netbackup/ext/db_ext/NODATA_CKPT_PROXY</programlisting>
				<para id="v14761291" condition="db2">
					<remark>db2</remark>If the agent finds this file during run time, it uses Nodata Storage Checkpoint, and it keeps the database containers in quiesced (write suspend). The database containers are kept in this mode for the duration of the backup.</para>
			</section>
			<section id="v14761307" revision="06272024112816">
				<title id="v14761308">Configuring policies for BLI backups with &DatabaseAgent;</title>
				<para id="v14761309" condition="db2">This topic explains how to configure BLI backups for DB2 policies. BLI backups do not back up the transaction logs. Include policies or schedules to perform file-based or stream-based backups.</para>
				<para id="v14761312">Your backup configuration must ensure that the entire database can be successfully restored.</para>
				<itemizedlist id="v14761313">
					<title id="v14761314">To configure a policy for BLI backups, configure the following:</title>
					<listitem id="v14761315">
						<para id="v14761316">The BLI backup method on the policy attributes dialog box.</para>
					</listitem>
					<listitem id="v104797124" condition="db2">
						<para id="v104797128">An <guilabel>Automatic backup</guilabel> schedule to perform full and incremental snapshot backups of the data files. These backups automatically include the history file.</para>
					</listitem>
					<listitem id="v14761321" condition="db2">
						<para id="v14761322"> An <guilabel>Application backup</guilabel> schedule to perform an initial stream-based backup of the database. Then, conditionally, perform a stream-based backup of transaction logs. Specify this schedule if you use the <command moreinfo="none">VENDOR</command> method for backing up the transaction logs. These files are backed up with the standard &ProductName; for DB2 operations.</para>
					</listitem>
					<listitem id="v14761325" condition="db2">
						<para id="v14761326">(Conditional) A Standard or MS-Windows policy with a User backup schedule to perform a file-based backup of transaction logs. Specify this policy and schedule if you use the user exit program to back up the transaction logs.</para>
					</listitem>
				</itemizedlist>
				<procedure id="v14761327">
					<title id="v14761328">To configure a policy for BLI backups</title>
					<step performance="required" id="v166172240">
						<para id="v166172241">Open the &nbuProductName; web UI.</para>
					</step>
					<step performance="required" id="v166172242">
						<para id="v166172243">On the left, select <guimenuitem>Protection &gt; Policies</guimenuitem>.</para>
					</step>
					<step performance="required" id="v14761329">
						<para id="v14761330">Select <guimenuitem>Add</guimenuitem>.</para>
					</step>
					<step performance="required" id="v14761331">
						<para id="v14761332">Select the <guilabel>Attributes</guilabel> tab.</para>
					</step>
					<step performance="required" id="v14761333">
						<para id="v14761334">From the <guimenuitem moreinfo="none">Policy type</guimenuitem> list, select <guimenuitem moreinfo="none">&policy;</guimenuitem>.</para>
					</step>
					<step performance="required" id="v14761339">
						<para id="v14761340">Select the <guimenuitem moreinfo="none">Policy storage</guimenuitem>.</para>
					</step>
					<step performance="required" id="v14761341">
						<para id="v14761342">Select <guimenuitem moreinfo="none">Perform block-level incremental backups</guimenuitem>.</para>
					</step>
					<step performance="required" id="v14761343">
						<para id="v14761344">To configure schedules, select the <guilabel>Schedules</guilabel> tab.</para>
						<para id="v14761345" condition="db2">DB2 does not support proxy backups of transaction logs.</para>
						<itemizedlist id="v14761346" condition="db2">
							<title id="v14761347">To perform a whole database proxy backup, configure the following:</title>
							<listitem id="v14761348">
								<para id="v14761349">One or more Automatic backup schedules to perform BLI backups of the data files.</para>
								<para id="v23639290">This backup automatically includes a backup of the history file.</para>
							</listitem>
							<listitem id="v14761358">
								<para id="v14761359">An Application backup schedule type for the initial backup of the database and transaction log backups using the <command>VENDOR</command> method.</para>
							</listitem>
						</itemizedlist>
					</step>
					<step performance="required" id="v14761362">
						<para id="v14761363">On the <guilabel>Clients</guilabel> tab, specify the clients to back up with this policy.</para>
					</step>
					<step performance="required" id="v14761364" condition="db2;ora">
						<para id="v14761365">On the <guilabel>Backup selections</guilabel> tab, specify the script.</para>
					</step>
				</procedure>
				<para id="v59373447" condition="db2">
					<xref xreflabel="Configuration requirements for BLI backups with &DatabaseAgent;" linkend="v14761292" role="linkseeheading"/>
				</para>
				<section id="v14761366" revision="02092024122144">
					<title id="v14761367">About the types of &DatabaseAgent; BLI backups</title>
					<para id="v14761369">&ProductName; performs BLI backups with Automatic Full Backup, Automatic Differential Incremental Backup, and Automatic Cumulative Incremental Backup schedules.</para>
					<para id="v14761373">&DatabaseAgent; checks that a full backup was performed before it proceeds with an incremental backup. If the &ProductName; scheduler or user initiates an incremental backup, and &DatabaseAgent; finds no record of a full backup using the same policy, it performs a full backup.</para>
					<itemizedlist id="v14761374">
						<title id="v14761375">To ensure that it has a proper set of images to restore, &ProductName; performs a full backup when it encounters the following situations:</title>
						<listitem id="v14761376" condition="db2">
							<para id="v14761377">If the number of backup streams that is specified changed from the previous backup. This change can be made through the GUI or through a DB2 command.</para>
						</listitem>
						<listitem id="v14761380">
							<para id="v14761381">If &ProductName; does not have a valid full backup image for the same policy in its database. For example, this situation can occur if images were expired.</para>
						</listitem>
					</itemizedlist>
					<para id="v14761386">&DatabaseAgent; always initiates a full backup under these conditions, even if you want to perform an incremental backup.</para>
				</section>
			</section>
			<section id="v99402633" revision="09232024131420">
				<title id="v99403282"> BLI incremental backup options using &nbuProductName; for DB2</title>
				<para id="v99403283">DB2 BLI incremental backups can be initiated in several ways. Initiating them from the primary server is the recommended method because it requires no special configuration. Operational constraints may necessitate initiating the backups from the client host, two options are available.</para>
				<note id="v99403284">
					<para id="v99403285">BLI is not currently supported for DB2 Snapshot backups on Microsoft Windows clients, the examples in this section use UNIX Bourne shell syntax. Modify as appropriate if using a different shell.</para>
				</note>
				<para id="v99403286">The following three options describe how to initiate DB2 BLI incremental backups. Some of these options also contain examples of a policy setup that you use and how to modify the backup script.</para>
				<bridgehead id="v99403288">Server-initiated DB2 BLI incremental backups (recommended)</bridgehead>
				<para id="v99403290">We recommend that you initiate BLI backups from the primary server. Initiate the BLI backups using automatic schedules and a Backup Selection that is a script. When &nbuProductName; controls the initiation, no special configuration is needed. The policy and the schedule information are provided to the client from the primary server. The agent queries the policy and the schedule information and performs the appropriate type of checkpoint; full, cumulative incremental, or differential incremental.</para>
				<bridgehead id="v99403291">Client-initiated DB2 BLI incremental backups using environment variables</bridgehead>
				<para id="v99403293">If the backup is initiated from the client, then the schedule from the <filename>db2.conf</filename> file is used by default. To perform both the full and the incremental backups, the backup script must be enhanced. The enhancement is to ensure the correct type of schedule and associated checkpoint is used. This enhancement can be accomplished by setting the same environment variables that the primary server sets before the backup is initiated.</para>
				<itemizedlist id="v99403294">
					<listitem id="v99403295">
						<para id="v99403296">Create appropriate automatic full, automatic cumulative incremental, and automatic differential incremental schedules in the DB2 backup policy.</para>
					</listitem>
					<listitem id="v99403299">
						<para id="v99403300">Set environment variables to specify the automatic schedule to use before the agent program runs.</para>
					</listitem>
					<listitem id="v99403297">
						<para id="v99403298">Create one <filename>db2.conf</filename> file in the $DB2_Instance_Home directory. Update the schedule keyword in the database stanza with the name of the application backup schedule to use for any stream-based backups that might occur. The value is overridden with automatic schedule names in the following example.</para>
					</listitem>
				</itemizedlist>
				<para id="v99403301">The following is an example of a policy that has automatic schedules for the snapshot backups and an application schedule for the stream-based backups.</para>
				<programlisting id="v99403302">primary$ bpplsched DB2_Policy -L | egrep &apos;^Schedule:|^  Type:&apos;
Schedule:              Full
  Type:                FULL SDB2 (0)
Schedule:              Cum
  Type:                CINC (4)
Schedule:              Diff
  Type:                INCR (1)
Schedule:              Default-Application-Backup
  Type:                UBAK DB2 (2)</programlisting>
				<para id="v99403303">The policy only has one <filename>db2.conf</filename> file, and it is set for stream-based backups.</para>
				<programlisting id="v99403304">client$ head -4 $DB2_Instance_Home/db2.conf
DATABASE SAMPLE
OBJECTTYPE DATABASE
POLICY DB2_Policy
SCHEDULE Default-Application-Backup</programlisting>
				<para id="v99403305">The backup script sets and exports the appropriate environment variables before the backup is initiated.</para>
				<programlisting id="v99403306">DB2_INCR=0
DB2_CINC=0
DB2_FULL=0
if [ &lt;some_condition&gt; ]; then
  DB2_INCR=1
  DB2_SCHED="Diff"
elif [ &lt;some_other_condition&gt; ]; then
  DB2_CINC=1
  DB2_SCHED="Cum"
else
  DB2_FULL=1
  DB2_SCHED="Full"
fi

DB2_POLICY=DB2_Policy
DB2_SCHEDULED=1

export DB2_INCR DB2_CINC DB2_FULL DB2_SCHED DB2_POLICY DB2_SCHEDULED

/usr/openv/netbackup/bin/bpdb2proxy &lt;options&gt;
</programlisting>
				<bridgehead id="v99403307">Client-initiated DB2 BLI incremental backups using multiple db2.conf files</bridgehead>
				<para id="v99403309">If the backup is initiated from the client, then the schedule from the <filename>db2.conf</filename> file is used by default. The <filename>db2.conf</filename> file can specify only one policy and schedule for a specific database. To perform both the full and the incremental backups, the backup script must be enhanced. The enhancement is to ensure the correct type of schedule and associated checkpoint is used. This enhancement can be accomplished by updating the <filename>db2.conf</filename> file before the backup is initiated.</para>
				<itemizedlist id="v99403310">
					<listitem id="v99403311">
						<para id="v99403312">Create appropriate automatic full, automatic cumulative incremental, and automatic differential incremental schedules in the DB2 backup policy.</para>
					</listitem>
					<listitem id="v99403313">
						<para id="v99403314">Create a <filename>db2.conf</filename> file to be used with each schedule. In each file, update the schedule keyword in the database stanza with the associated schedule name.</para>
					</listitem>
					<listitem id="v99403315">
						<para id="v99403316">Copy the appropriate <filename>db2.conf </filename>file into place before you run the agent program.</para>
					</listitem>
				</itemizedlist>
				<para id="v99403317">The following is an example of a policy that has automatic schedules for the snapshot backups and an application schedule for the stream-based backups.</para>
				<programlisting id="v99403318">primary$ bpplsched DB2_DB_Policy -L | egrep &apos;^Schedule:|^  Type:&apos;
Schedule:              Full
  Type:                FULL SDB2 (0)
Schedule:              Cum
  Type:                CINC (4)
Schedule:              Diff
  Type:                INCR (1)
Schedule:              Default-Application-Backup
  Type:                UBAK DB2 (2)</programlisting>
				<para id="v99403319">The policy has three <filename>db2.conf</filename> files, one for each type of automatic backup schedule.</para>
				<programlisting id="v99403320">client$ head -4 db2.conf.with_full_schedule
DATABASE SAMPLE
OBJECTTYPE DATABASE
POLICY DB2_DB_Policy
SCHEDULE Full 

client$ head -4 db2.conf.with_cum_schedule
DATABASE SAMPLE
OBJECTTYPE DATABASE
POLICY DB2_DB_Policy
SCHEDULE Cum 

client$ head -4 db2.conf.with_diff_schedule
DATABASE SAMPLE
OBJECTTYPE DATABASE
POLICY DB2_DB_Policy
SCHEDULE Diff</programlisting>
				<para id="v99403321">The backup script copies the correct <filename>db2.conf</filename> file into place before the backup is initiated.</para>
				<programlisting id="v99403322">... &lt;setup the rest of the DB2 backup environment&gt; ...

if [ &lt;some_condition&gt; ]; then
  cp db2.conf.with_diff_sched $DB2_Instance_Home/db2.conf
elif [ &lt;some_other_condition&gt; ]; then
  cp db2.conf.with_cum_sched $DB2_Instance_Home /db2.conf
else
  cp db2.conf.with_full_sched $DB2_Instance_Home /db2.conf
fi

/usr/openv/netbackup/bin/bpdb2proxy &lt;options&gt;
</programlisting>
			</section>
		</section>
		<section id="id-SF930116274" revision="08042022074951" vendor="referenced">
			<title id="v14761394">About Snapshot Client effects<indexterm>
					<primary>Snapshot Client</primary>
					<secondary>effects on policies and schedules</secondary>
				</indexterm>
			</title>
			<para id="v14761395" condition="db2">The following topics describe how the Snapshot Client software affects backup types, schedule properties, and scripts.</para>
			<section id="v14761397" revision="02092024122340">
				<title id="v14761398">How Snapshot Client software affects backup types</title>
				<para id="v156950648">The backup types available on the <guilabel>Schedules</guilabel> tab of the policy play a different role for &DatabaseAgent; with Snapshot Client backups.</para>
				<para id="v14761400">
					<xref xreflabel="Backup types for &policy; policies" linkend="id-SF930137560" role="linkseeheading"/>
				</para>
				<table tabstyle="complex" id="id-SF930137560">
					<title id="v14761403">Backup types for &policy; policies</title>
					<tgroup cols="2" id="v14761404">
						<colspec colnum="1" colwidth="1.2in"/>
						<colspec colnum="2" colwidth="*"/>
						<thead id="v14761407">
							<row id="v14761408">
								<entry>
									<para>Backup type</para>
								</entry>
								<entry>
									<para>Description</para>
								</entry>
							</row>
						</thead>
						<tbody id="v14761409">
							<row id="v14761410">
								<entry>
									<para>Application Backup</para>
								</entry>
								<entry>
									<para>The Application Backup schedule stores stream-based backups. The Default-Application-Backup schedule is automatically configured as an Application Backup schedule.</para>
								</entry>
							</row>
							<row id="v14761411">
								<entry>
									<para> Full backup</para>
									<para>Differential incremental backup,</para>
									<para>Cumulative incremental backup</para>
								</entry>
								<entry>
									<para condition="db2">The automatic backup schedule types automatically start the backups by running the &DatabaseAgent; scripts. They also store the snapshot backups.</para>
									<note>
										<para>For most snapshot types, any automatic backup schedule (full, cumulative, or differential) results in a full volume snapshot. BLI is the only snapshot method that can perform an incremental backup.</para>
									</note>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
				<para id="v93544142" condition="db2">
					<xref xreflabel="About &nbuProductName; for DB2 with Snapshot Client operations" linkend="v15490653" role="linkmoreinfo"/>
				</para>
				<para id="v96210479" condition="db2;ora">
					<xref xreflabel="How Snapshot Client software affects schedule properties" linkend="v14761412" role="linkmoreinfo"/>
				</para>
			</section>
			<section id="v14761412" revision="04082024124811">
				<title id="v14761413">How Snapshot Client software affects schedule properties</title>
				<para id="v14761414">Some schedule properties have a different meaning for Snapshot Client database backups than for a regular database backup. For a description of other schedule properties, see the information that is specific to standard database agent backups.</para>
				<para id="v14761415">
					<xref xreflabel="About schedule properties " linkend="id-SF930186642" role="linkseeheading"/>
				</para>
				<para id="v14761417">
					<xref xreflabel="Schedule properties" linkend="v104980676" role="link"/> explains the properties for Snapshot Client backups.</para>
				<table id="v104980676">
					<title id="v104980677">Schedule properties</title>
					<tgroup cols="2" id="v104980678">
						<colspec colname="col1" colnum="1" colwidth="1.3in"/>
						<colspec colname="col2" colnum="2" colwidth="*"/>
						<thead id="v104980681">
							<row id="v104980682">
								<entry colname="col1">
									<para>Property</para>
								</entry>
								<entry colname="col2">
									<para>Description</para>
								</entry>
							</row>
						</thead>
						<tbody id="v104980683">
							<row id="v104980684">
								<entry colname="col1">
									<para>Retention</para>
								</entry>
								<entry colname="col2">
									<para>Automatic Schedules:</para>
									<para>Determines how long to retain history of the backups that the primary server schedules and also how long to retain snapshot backups.</para>
									<para>Application Schedules:</para>
									<para>Determines how long to retain stream-based backups.</para>
								</entry>
							</row>
							<row id="v104980685">
								<entry colname="col1">
									<para>Multiple Copies</para>
								</entry>
								<entry colname="col2">
									<para>For snapshot backup, configure <guilabel>Multiple copies</guilabel> on the automatic backup schedule.</para>
									<para>For stream-based backups, configure <guilabel>Multiple copies</guilabel> on the Application backup schedule.</para>
								</entry>
							</row>
							<row id="v104980686">
								<entry colname="col1">
									<para>Frequency</para>
								</entry>
								<entry colname="col2">
									<para>Determines how often an Automatic schedule runs a backup.</para>
									<para>Does not apply to Application backup schedules.</para>
								</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>
			<section id="v14761429" revision="02092024122845">
				<title id="v14761430">How Snapshot Client software affects scripts</title>
				<para id="v156950642">When you use a script, you must enable the advanced backup method for your clients. Configure this method on the <guilabel>Attributes</guilabel> tab of the policy. At run time, the agent checks the policy attributes to determine if a Snapshot Client backup method is configured and performs a proxy file-based backup.</para>
				<para id="v14761436" condition="db2">
					<xref xreflabel="About &ProductName; for DB2 shell scripts" linkend="v15491534" role="linkmoreinfo"/>
				</para>
				<para id="v14761441" condition="db2">If you use a script, the script must reside on each client that is included in the policy. Include the &ProductName; <command moreinfo="none">bpdb2proxy</command> command in the script to perform the advanced backup method. Sample scripts are included with the installation.</para>
				<para id="v93611369" condition="db2">
					<xref xreflabel="Performing a snapshot rollback restore from the command line" linkend="v15491792" role="linkmoreinfo"/>
				</para>
				<para id="v93611371" condition="db2">
					<xref xreflabel="Configuring a snapshot policy for &DatabaseAgent;" linkend="v14759270" role="linkmoreinfo"/>
				</para>
			</section>
		</section>
		<section id="v15492609" revision="09232024131420" vendor="referenced">
			<title id="v15492610">Performing &nbuProductName; for DB2 backups with Snapshot Client methods</title>
			<para id="v15492608">After configuration is complete, performing &nbuProductName; for DB2 with Snapshot Client backups and restores is similar to conventional &nbuProductName; for DB2 operations. The following sections describe some of the differences.</para>
			<itemizedlist id="v15492611">
				<title id="v15492612">&nbuProductName; for DB2 performs backups with Snapshot Client in the following ways:</title>
				<listitem id="v15492617">
					<para id="v15492618">User-directed, from the command line or the script as a DB2 user (with the <command moreinfo="none">bpdb2proxy</command> command)</para>
				</listitem>
				<listitem id="v15492613">
					<para id="v15492614">Server-directed, from an automatic schedule on the primary server</para>
				</listitem>
			</itemizedlist>
			<para id="v15492619">All of these methods require a DB2 policy with Snapshot Client configuration.</para>
			<informaltable id="v54435911">
				<tgroup cols="2" id="v54435912">
					<colspec colname="col1" colnum="1" colwidth="1.55in"/>
					<colspec colname="col2" colnum="2" colwidth="1.00*"/>
					<tbody id="v54435915">
						<row id="v54435917">
							<entry colname="col1">
								<para>User-directed backups using <command>bpdb2proxy</command>
								</para>
							</entry>
							<entry colname="col2">
								<para id="v15492633">Use the <command moreinfo="none">bpdb2proxy</command> command to perform a Snapshot Client backup of your DB2 database from the command line. You must be the DB2 user to use the <command moreinfo="none">bpdb2proxy</command> command. For backups, specify the <command moreinfo="none">-backup</command> option with <command moreinfo="none">bpdb2proxy</command>.</para>
								<para id="v15492634">Use the <command moreinfo="none">bpdb2proxy</command> command in the following format to back up a DB2 database with a Snapshot Client method:</para>
								<para>Windows:<command>
										<replaceable>install_path</replaceable>\NetBackup\bin\bpdb2proxy -backup -d <replaceable>dbalias</replaceable> -u u<replaceable>ser</replaceable> -p <replaceable>password</replaceable>
									</command>
								</para>
								<para>UNIX: <command>/usr/openv/netbackup/bin/bpdb2proxy -backup -d <replaceable>dbalias</replaceable> -u u<replaceable>ser</replaceable> -p <replaceable>password</replaceable>
									</command>
								</para>
							</entry>
						</row>
						<row id="v54435918">
							<entry colname="col1">
								<para>Server-directed backups</para>
							</entry>
							<entry colname="col2">
								<para id="v15492622">The following describes the process for configuring policies for DB2 backups with Snapshot Client.</para>
								<para id="v15492623">
									<xref role="linkmoreinfo" xreflabel="Configuring a snapshot policy for &DatabaseAgent;" linkend="v14759270"/>
								</para>
								<para id="v15492625">These policies specify Snapshot Client backups for the DB2 database.</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</section>
		<section id="v15492640" revision="09232024131420" vendor="referenced">
			<title id="v15492641">Performing &nbuProductName; for DB2 restores with Snapshot Client methods</title>
			<para id="v15492639">Perform &nbuProductName; for DB2 Snapshot Client restores from the DB2 client. The following describes two methods of user-directed restores and restoring from a snapshot backup:</para>
			<informaltable id="v54435921">
				<tgroup cols="2" id="v54435922">
					<colspec colname="col1" colnum="1" colwidth="1.5in"/>
					<colspec colname="col2" colnum="2" colwidth="1.00*"/>
					<tbody id="v54435925">
						<row id="v54435927">
							<entry colname="col1">
								<para>Restore using the command line (user-directed)</para>
							</entry>
							<entry colname="col2">
								<para>Use the <command moreinfo="none">bpdb2proxy</command> command. You must be the DB2 user to use the <command moreinfo="none">bpdb2proxy</command> command. When performing a restore, specify the <command moreinfo="none">-restore</command> option with <command moreinfo="none">bpdb2proxy</command>.</para>
								<note id="v15492646">
									<para id="v15492647">The backup image you restore with <command moreinfo="none">bpdb2proxy</command> must be from a Snapshot Client method backup. Otherwise, the restore fails.</para>
								</note>
								<para id="v15492648">Use the <command moreinfo="none">bpdb2proxy</command> command in the following format to restore a DB2 database with a Snapshot Client method:</para>
								<para>Windows: <command>
										<replaceable>install_path</replaceable>\NetBackup\bin\bpdb2proxy -restore -d <replaceable>dbalias</replaceable> -u <replaceable>user</replaceable> -p <replaceable>password</replaceable>
									</command>
								</para>
								<para>UNIX: <command>/usr/openv/netbackup/bin/bpdb2proxy -restore -d <replaceable>dbalias</replaceable> -u <replaceable>user</replaceable> -p <replaceable>password</replaceable>
									</command>
								</para>
							</entry>
						</row>
						<row id="v54435928">
							<entry colname="col1">
								<para>Restore from a snapshot backup</para>
							</entry>
							<entry colname="col2">
								<para id="v15492654">
									<xref role="linkmoreinfo" xreflabel="About &DatabaseAgent; restores of volumes and file systems using snapshot rollback" linkend="v14758095"/>
								</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</informaltable>
		</section>
	</chapter>
	<chapter id="v23552379">
		<title id="v16588458">Troubleshooting NetBackup for DB2</title>
		<section id="v65423831" revision="05082023170549" vendor="referenced">
			<title id="v14758156">&ProductName; debug logs and reports</title>
			<para id="v14758157">The &ProductName; server and client software let you enable detailed debugging logs. The information in these log files can help you troubleshoot the problems that occur outside of either the database agent or &utility;.</para>
			<itemizedlist id="v14758158">
				<title id="v14758159">Note the following with regard to these logs:</title>
				<listitem id="v14758160">
					<para id="v14758161">These logs do not reveal the errors that occur when &utility; is running unless those errors also affect &ProductName;. &db; may (or may not) write errors in the application to the &ProductName; logs. Your best sources for &db; error information are the logs provided by &db;.</para>
				</listitem>
				<listitem id="v14758162">
					<para id="v14758163">Generally, each debug log corresponds to a &ProductName; process and executable.</para>
				</listitem>
			</itemizedlist>
			<para id="v14758165">More detailed information about the debug log files is available.</para>
			<para id="v14758166">See the <ulink url="http://www.veritas.com/docs/DOC5332">&ProductName; Troubleshooting Guide</ulink>.</para>
			<para id="v14758167">Also refer to the following file:</para>
			<para id="v97215606">Windows:</para>
			<programlisting format="linespecific" id="v14758168">
				<replaceable>install_path</replaceable>\NetBackup\logs\README.debug file</programlisting>
			<para id="v97215605">UNIX:</para>
			<programlisting format="linespecific" id="v14758169">/usr/openv/netbackup/logs/README.debug file</programlisting>
		</section>
		<section id="v14758345" revision="02092024122551" vendor="referenced">
			<title id="v14758350">
				<phrase condition="db2;lot;ora;sap;syb">Enabling the debug logs for a &DatabaseAgent; client automatically (Windows)</phrase>
			</title>
			<para id="v147679164">You can enable debug logging by running a batch file that creates each log directory. To create all log file directories automatically, run the following: </para>
			<programlisting format="linespecific" id="v14758353">
				<replaceable>install_path</replaceable>\NetBackup\logs\mklogdir.bat</programlisting>
			<para id="v24216143" condition="db2;ora;sap;syb">Or, you can manually create the directories for the log files you want created.</para>
		</section>
		<section id="v107243488" revision="09232024132044" vendor="referenced">
			<title id="v107244188">Enabling the debug logs manually (Windows) (&DatabaseAgent;)</title>
			<procedure id="v107244190">
				<title id="v107244191">To create the &DatabaseAgent; for Windows database agent logs manually</title>
				<step id="v107244192">
					<para id="v107244193">Create the following directories on the client:</para>
					<itemizedlist id="v107244194">
						<listitem id="v107244195" condition="db2">
							<para id="v107244196">
								<command>bpubsdb2</command>
							</para>
							<para id="v107244197">For any DB2 instance browse problems when <command>bpdb2proxy</command> is used for backup or restore.</para>
							<programlisting id="v107244198">
								<replaceable>install_path</replaceable>\NetBackup\logs\bpubsdb2</programlisting>
						</listitem>
						<listitem id="v107244199">
							<para id="v107244200">
								<command>bphdb</command>
							</para>
							<para id="v107244201">For any backup that is initiated from an automated schedule on the primary server.</para>
							<programlisting id="v107244202">
								<replaceable>install_path</replaceable>\NetBackup\logs\bphdb</programlisting>
						</listitem>
						<listitem id="v107244207" condition="db2">
							<para id="v107244208">
								<command> bpdb2</command>
							</para>
							<para id="v107244209">For any backup or restore of the database and or <command>LOGARCHMETH2=VENDOR</command> log backups.</para>
							<programlisting id="v107244210">
								<replaceable>install_path</replaceable>\NetBackup\logs\bpdb2</programlisting>
						</listitem>
						<listitem id="v107244211">
							<para id="v107244212">
								<command> bpbkar</command>
							</para>
							<para id="v107244213" condition="db2">For any snapshot backup and or user-exit log backup.</para>
							<programlisting id="v107244214">
								<replaceable>install_path</replaceable>\NetBackup\logs\bpbkar</programlisting>
						</listitem>
						<listitem id="v107244215">
							<para id="v107244216">
								<command> tar</command>
							</para>
							<para id="v107244217" condition="db2">For any snapshot restore and or user-exit log restore.</para>
							<programlisting id="v107244218">
								<replaceable>install_path</replaceable>\NetBackup\logs\tar</programlisting>
						</listitem>
					</itemizedlist>
				</step>
				<step id="v107244219">
					<para id="v107261800" condition="db2">
						<remark>Reviewer: ET 4150682. Updated to indicate access permission and not write permission needed. 02/08/24 </remark>Verify the user or group that the DB2 process (process that loads <command>bpdb2</command>) has appropriate permissions to access the following directories if they exist. If the following directories do not exist, the directories are created automatically with the correct permissions.</para>
					<para id="v107244221">
						<command>install_path\NetBackup\logs\user_ops</command>
					</para>
					<para id="v107244222">
						<command>install_path\NetBackup\logs\user_ops\dbext</command>
					</para>
					<para id="v107244223">
						<command>install_path\NetBackup\logs\user_ops\dbext\logs</command>
					</para>
					<para id="v107261808">
						<remark>Reviewer: ET 4150682. Updated to indicate access permission and not write permission needed. 02/08/24 </remark>Also verify that the user or group that the &db; process runs as has appropriate permissions to access the log directories in step 1.</para>
				</step>
				<step id="v107933695">
					<para id="v107933696"> On the &nbuProductName; server or servers, create the debug log directories for the legacy processes that interact with the &db; agent.</para>
					<para id="v107933697">On the primary server:</para>
					<para id="v107933698">
						<command>install_path\NetBackup\logs\bprd</command>
					</para>
					<para id="v107933699">On the media server or servers:</para>
					<para id="v107933700">
						<command>install_path\NetBackup\logs\bpbrm</command>
					</para>
					<para id="v107933701">
						<command>install_path\NetBackup\logs\bptm</command>
					</para>
				</step>
				<step id="v107244224">
					<para id="v107933702"> The debug logs for unified processes on the server and the client hosts are created automatically by &nbuProductName;.</para>
					<para id="v107244226">&nbuProductName; writes unified logs to <command>install_path\NetBackup\logs</command>.</para>
					<para id="v107244227">For information on how to use logs and reports, see the <ulink url="http://www.veritas.com/docs/DOC5332">NetBackup Troubleshooting Guide</ulink>.</para>
				</step>
			</procedure>
		</section>
		<section id="v107945991" revision="09232024132044" vendor="referenced">
			<title id="v107946116">Enabling the debug logs manually (UNIX) (&DatabaseAgent;)</title>
			<procedure id="v107946117">
				<title id="v107946118">To create the &DatabaseAgent; for UNIX database agent logs manually</title>
				<step id="v107946119">
					<para id="v107946120">Create the following directories on the client:</para>
					<itemizedlist id="v107946121">
						<listitem id="v107946122" condition="db2">
							<para id="v107946123">
								<command>bpubsdb2</command>
							</para>
							<para id="v107946124">For any DB2 instance browse problems when <command>bpdb2proxy</command> is used for backup or restore.</para>
							<programlisting id="v107946125">/usr/openv/netbackup/logs/bpubsdb2</programlisting>
						</listitem>
						<listitem id="v107946126">
							<para id="v107946127">
								<command>bphdb</command>
							</para>
							<para id="v107946128">For any backup that is initiated from an automated schedule on the primary server.</para>
							<programlisting id="v107946129">/usr/openv/netbackup/logs/bphdb</programlisting>
						</listitem>
						<listitem id="v107946134" condition="db2">
							<para id="v107946135">
								<command>bpdb2</command>
							</para>
							<para id="v107946136">For any backup or restore of the database and or <command>LOGARCHMETH2=VENDOR</command> log backups.</para>
							<programlisting id="v107946137">/usr/openv/netbackup/logs/bpdb2</programlisting>
						</listitem>
						<listitem id="v107946138">
							<para id="v107946139">
								<command> bpbkar</command>
							</para>
							<para id="v107946140" condition="db2">For any snapshot backup and or user-exit log backup.</para>
							<programlisting id="v107946141">/usr/openv/netbackup/logs/bpbkar</programlisting>
						</listitem>
						<listitem id="v107946142">
							<para id="v107946143">
								<command> nbtar</command>
							</para>
							<para id="v107946144" condition="db2">For any snapshot restore and or user-exit log restore.</para>
							<programlisting id="v107946145">/usr/openv/netbackup/logs/tar</programlisting>
						</listitem>
					</itemizedlist>
				</step>
				<step id="v107946146">
					<para id="v107946147" condition="db2">
						<remark>Reviewer: ET 4150682. Updated to indicate access permission and not write permission needed. 02/08/24 </remark>Verify the user or group that the DB2 process (process that loads <command>bpdb2</command>) has appropriate permissions to access the following directories if they exist. If the following directories do not exist, the directories are created automatically with the correct permissions.</para>
					<para id="v107946148">
						<command>/usr/openv/logs/user_ops</command>
					</para>
					<para id="v107946149">
						<command>/usr/openv/logs/user_ops/dbext</command>
					</para>
					<para id="v107946150">
						<command>/usr/openv/logs/user_ops/dbext/logs</command>
					</para>
					<para id="v107946151">
						<remark>Reviewer: ET 4150682. Updated to indicate access permission and not write permission needed. 02/08/24 </remark>Also verify that the user or group that the &db; process runs as has appropriate permissions to access the log directories in step 1.</para>
				</step>
				<step id="v107946152">
					<para id="v131868023"> On the &nbuProductName; server or servers, create the debug log directories for the legacy processes that interact with the &db; agent.</para>
					<para id="v107946154">On the primary server:</para>
					<para id="v107946155">
						<command>/usr/openv/logs/bprd</command>
					</para>
					<para id="v107946156">On the media server or servers:</para>
					<para id="v107946157">
						<command>/usr/openv/logs/bpbrm</command>
					</para>
					<para id="v107946158">
						<command>/usr/openv/logs/bptm</command>
					</para>
				</step>
				<step id="v107946159">
					<para id="v107946160">The debug logs for unified processes on the server and the client hosts are created automatically by &nbuProductName;.</para>
					<para id="v107946161">&nbuProductName; writes unified logs to <command>/usr/openv/logs</command>.</para>
					<para id="v107946162">For information on how to use logs and reports, see the <ulink url="http://www.veritas.com/docs/DOC5332">NetBackup Troubleshooting Guide</ulink>.</para>
				</step>
			</procedure>
		</section>
		<section id="v14757971" revision="02092024123013" vendor="referenced">
			<title id="v14757977">About the &DatabaseAgent; log files</title>
			<para id="v14757978">The following topics describe the logs that are created when you create the log directories. Use a text editor to view the contents of the logs.</para>
			<para id="v25820477" condition="db2">
				<xref xreflabel="About the bphdb directory on the Windows database client" linkend="v14758419" role="linkseeheading"/>
			</para>
			<para id="v25820479">
				<xref xreflabel=" " linkend="v14758447" role="linkseeheading"/>
			</para>
			<section id="v14758419" revision="02092024123110">
				<title id="v14758424">About the bphdb directory on the Windows database client</title>
				<para id="v14758425">The <command moreinfo="none">
						<replaceable>install_path</replaceable>\NetBackup\logs\bphdb</command> directory contains log files.<indexterm>
						<primary>bphdb log</primary>
						<secondary>Windows</secondary>
					</indexterm>
				</para>
				<itemizedlist id="v14758426">
					<title id="v14758427">The following types of logs exist:</title>
					<listitem id="v14758428">
						<programlisting format="linespecific" id="v14758429">&logfile;.<replaceable>mmddyy.hhmmss</replaceable>.txt</programlisting>
						<para id="v23697260">Unless it is redirected elsewhere, &ProductName; writes &db; script output to this file.</para>
					</listitem>
					<listitem id="v14758431">
						<programlisting format="linespecific" id="v14758432">&logfile-err;.<replaceable>log.mmddyy.hhmmss</replaceable>.txt</programlisting>
						<para id="v23697262">Unless it is redirected elsewhere, &ProductName; writes &db; script errors to this file.</para>
					</listitem>
					<listitem id="v14758436">
						<programlisting format="linespecific" id="v14758437" condition="db2;sap">
							<replaceable>mmddyy</replaceable>.log</programlisting>
						<para id="v14758438"> This log contains debugging information for the <command moreinfo="none">bphdb</command> process. <command moreinfo="none">bphdb</command> is the &ProductName; database backup binary. It is invoked when an automatic backup schedule is run. &DatabaseAgent; uses this client process for &db; script execution.</para>
					</listitem>
				</itemizedlist>
			</section>
			<section id="v14758447" revision="02092024120238">
				<title id="v14758452">
					<phrase condition="db2;sap">About the bphdb directory on the UNIX database client</phrase>
					<indexterm>
						<primary>bphdb log</primary>
						<secondary>UNIX</secondary>
					</indexterm>
				</title>
				<para id="v14758453">The <command moreinfo="none">/usr/openv/netbackup/logs/bphdb</command> directory contains logs.</para>
				<itemizedlist id="v14758454">
					<title id="v14758455">The following types of logs exist:</title>
					<listitem id="v14758456">
						<programlisting format="linespecific" id="v14758457">&logfile;.<replaceable>mmddyy</replaceable>
						</programlisting>
						<para id="v14758458" condition="db2;sap;syb">Unless it is redirected elsewhere, &ProductName; writes &db; script output to this file.</para>
					</listitem>
					<listitem id="v14758459">
						<programlisting format="linespecific" id="v14758460">&logfile-err;.<replaceable>mmddyy</replaceable>
						</programlisting>
						<para id="v23704786" condition="db2;sap;syb">Unless it is redirected elsewhere, &ProductName; writes &db; script errors to this file.</para>
					</listitem>
					<listitem id="v14758464">
						<programlisting format="linespecific" id="v14758465" condition="db2;inx;syb">log.<replaceable>mmddyy</replaceable>
						</programlisting>
						<para id="v23704789" condition="db2;sap;syb"> This log contains debugging information for the <command moreinfo="none">bphdb</command> process. <command moreinfo="none">bphdb</command> is the &ProductName; database backup binary. It is invoked when an automatic backup schedule is run. &DatabaseAgent; uses this client process for &db; script execution.</para>
					</listitem>
				</itemizedlist>
			</section>
			<section id="v14758396" revision="02092024120353">
				<title id="v14758401">
					<phrase condition="db2;sap;syb">About the &log; directory on the UNIX database client</phrase>
				</title>
				<para id="v14758402">
					<remark>db2;inx;sap;syb </remark>The <command moreinfo="none">/usr/openv/netbackup/logs/&log;</command> directory contains run logs.</para>
				<itemizedlist id="v14758403">
					<title id="v14758404">The following run log exists:</title>
					<listitem id="v14758407" condition="db2;inx;syb">
						<programlisting format="linespecific" id="v14758408">log.<replaceable>mmddyy</replaceable>
						</programlisting>
						<para id="v14758409">This log contains debugging information and run status for the &DatabaseAgent; client process.</para>
					</listitem>
				</itemizedlist>
			</section>
		</section>
		<section id="v14758469" revision="02092024120115" vendor="referenced">
			<title id="v14758474">
				<phrase condition="db2;ora;sap;syb">Setting the debug level on a Windows client</phrase>
			</title>
			<para id="v23532981" condition="dbagent">To control the amount of information that is written to the debug logs, change the Database debug level. Typically, the default value of 0 is sufficient. However, technical support may ask you to set the value higher to analyze a problem.</para>
			<para id="v16395640" condition="db2;ora;windows">The debug logs are located in <filename>
					<replaceable>install_path</replaceable>\NetBackup\logs</filename>.</para>
			<note id="v16393251" condition="db2">
				<para id="v16393252">Information from both the Verbose and the Database debug settings is logged to the same file, <command moreinfo="none">
						<replaceable>mmddyy</replaceable>.log</command>
				</para>
			</note>
			<procedure id="v14760152">
				<title id="v14760153">
					<phrase condition="db2;ora;sap;syb">To set the debug level on a Windows client</phrase>
				</title>
				<step performance="required" id="v14760154">
					<para id="v14760155">Open the <guimenuitem moreinfo="none">Backup, Archive, and Restore</guimenuitem> interface.</para>
				</step>
				<step performance="required" id="v14760156">
					<para id="v14760157">Select <guimenuitem moreinfo="none">File &gt; &ProductName; Client Properties</guimenuitem>.</para>
				</step>
				<step performance="required" id="v14760158">
					<para id="v14760159">Click the <guilabel>Troubleshooting</guilabel> tab.</para>
				</step>
				<step performance="required" id="v107745625">
					<para id="v107745626">Set the <guimenuitem moreinfo="none">General</guimenuitem> debug level.</para>
				</step>
				<step performance="required" id="v16393264">
					<para id="v16393265">Set the <guimenuitem>Verbose</guimenuitem> debug level.</para>
					<para id="v23536426" condition="db2">Set this level to adjust the amount of information from the user exit program.</para>
				</step>
				<step performance="required" id="v23534920">
					<para id="v23534921">Set the <guimenuitem moreinfo="none">Database</guimenuitem> debug level.</para>
					<para id="v23534922" condition="db2">Set this level to adjust the amount of information from the NBDB2 vendor library.</para>
				</step>
				<step performance="required" id="v14760163">
					<para id="v14760164">Click <guimenuitem moreinfo="none">OK</guimenuitem> to save your changes.</para>
				</step>
			</procedure>
		</section>
		<section id="v23536366" revision="06072022141012" vendor="referenced">
			<title id="v23536367"/>
			<para id="v23536369" condition="dbagent">To control the amount of information that is written to the debug logs, change the &quot;Database&quot; debug level. Typically, the default value of 0 is sufficient. However, Technical Support may ask you to set the value higher to analyze a problem.</para>
			<para id="v23536370">The debug logs are located in <filename>/usr/openv/netbackup/logs</filename>.</para>
			<procedure id="v23536371">
				<title id="v23536372">To set the debug level on a UNIX client</title>
				<step performance="required" id="v23536373">
					<para id="v23536374">Enter the following line in the <command moreinfo="none">bp.conf</command> file.</para>
					<programlisting format="linespecific" id="v23536375">VERBOSE = <replaceable>X</replaceable>
					</programlisting>
					<para id="v23536376">Where <replaceable>X</replaceable> is the debug level you want.</para>
				</step>
			</procedure>
		</section>
		<section id="v14758024" revision="01242024123506" vendor="referenced">
			<title id="v14758030">Minimizing timeout failures on large database restores</title>
			<para id="v14758031">Large database restores sometimes fail when multiple restore sessions compete for resources. In this situation, a restore session can be delayed while waiting for media or device access. If the delay is too long, the restore session times out. Use the following procedure to minimize session timeouts and to allow the restores to complete successfully.</para>
			<procedure id="v14758032">
				<title id="v14758033">To minimize timeout failures on large database restores</title>
				<step id="v160307213">
					<para id="v160307214">Open the &ProductName; web UI. </para>
				</step>
				<step id="v164306358">
					<para id="v164306359">On the left, click <guimenuitem moreinfo="none">Hosts &gt; Host properties</guimenuitem>.</para>
				</step>
				<step id="v161613260">
					<para id="v161613261">Select the client.</para>
				</step>
				<step id="v161613262">
					<para id="v161613263">If necessary, click <guimenuitem>Connect</guimenuitem>. </para>
				</step>
				<step id="v161602540">
					<para id="v161602541">Click <guimenuitem>Edit client</guimenuitem>.</para>
				</step>
				<step id="v160307217">
					<para id="v160307218">Click <guimenuitem>Timeouts</guimenuitem>.</para>
				</step>
				<step performance="required" id="v14758036">
					<para id="v14758037">Set the <guimenuitem moreinfo="none">Client read timeout</guimenuitem> property to a large value.</para>
					<para id="v14758038">The default for the <guimenuitem moreinfo="none">Client read timeout</guimenuitem> setting is 300 seconds (5 minutes). For database agent clients, increase the value significantly from the recommended value.</para>
					<para id="v14758039">See the <ulink url="http://www.veritas.com/docs/DOC5332">&ProductName; Administrator's Guide, Volume 1</ulink>.</para>
					<para id="v14758040">For example, change this setting to 30-60 minutes to minimize timeout errors.</para>
				</step>
				<step performance="required" id="v14758041">
					<para id="v14758042">Click <guimenuitem moreinfo="none">Save</guimenuitem>.</para>
				</step>
			</procedure>
			<note id="v90298109">
				<para id="v90298110">This change may delay detecting problems during subsequent backups. Consider putting the original value back in place once any restore that requires a change is complete.</para>
			</note>
		</section>
		<section id="v14758043" revision="02292024152116" vendor="referenced">
			<title id="v14758044">Minimizing the loading and unloading of tapes for database backups</title>
			<para id="v14758045">You can minimize excessive unloading and reloading of tapes between multistreamed database backups by changing the media settings for the primary or the media server.</para>
			<para id="v105190577">See the <ulink url="http://www.veritas.com/docs/DOC5332">&ProductName; Administration Guide, Volume 1</ulink> for details.</para>
			<procedure id="v14758046">
				<title id="v14758047">To minimize loading and unloading of tapes</title>
				<step id="v164306360">
					<para id="v164306361">Open the &ProductName; web UI. </para>
				</step>
				<step id="v164306362">
					<para id="v164306363">On the left, click <guimenuitem moreinfo="none">Hosts &gt; Host properties</guimenuitem>.</para>
				</step>
				<step id="v161613264">
					<para id="v161613265">Select the primary or the media server.</para>
				</step>
				<step id="v161613266">
					<para id="v161613267">If necessary, click <guimenuitem>Connect</guimenuitem>. </para>
				</step>
				<step id="v161611349">
					<para id="v161611350">Click <guimenuitem>Edit primary server</guimenuitem> or <guimenuitem>Edit media server</guimenuitem>.</para>
				</step>
				<step id="v105190567">
					<para id="v105190568">Click <guilabel>Media</guilabel>.</para>
				</step>
				<step id="v105190569">
					<itemizedlist id="v105190570">
						<title id="v105190571">Configure the following settings:</title>
						<listitem id="v105190572">
							<para id="v105190573">
								<guimenuitem>Media unmount delay</guimenuitem>
							</para>
						</listitem>
						<listitem id="v105190574">
							<para id="v105190575">
								<guimenuitem>Media request delay</guimenuitem>
							</para>
							<para id="v105190576">Use this variable only with non-robotic drives, such as tape stackers.</para>
						</listitem>
					</itemizedlist>
				</step>
			</procedure>
		</section>
		<section id="v15490709" revision="02092024104739" vendor="referenced">
			<title id="v15490710">Use the NET_BUFFER_SZ file to speed up a slow restore</title>
			<para id="v15490711">If file restores are slow and your NetBackup primary server is a Linux machine, you can increase file restore speeds. Create a file that is called <command moreinfo="none">NET_BUFFER_SZ</command> on the NetBackup primary server in the NetBackup install directory.</para>
			<procedure id="v15490712">
				<title id="v15490713">To create the NET_BUFFER_SZ file</title>
				<step performance="required" id="v15490714">
					<para id="v15490715">Log into a Linux primary server.</para>
				</step>
				<step performance="required" id="v15490716">
					<para id="v15490717">Use <command moreinfo="none">vi</command>(1) or another editor to create file <command moreinfo="none">/usr/openv/netbackup/NET_BUFFER_SZ</command>.</para>
				</step>
				<step performance="required" id="v15490718">
					<para id="v15490719">Add a line that specifies the socket size, in bytes.</para>
					<para id="v15490720">For example:</para>
					<programlisting format="linespecific" id="v15490721">32768 bytes = 32K</programlisting>
				</step>
				<step performance="required" id="v15490722">
					<para id="v15490723">Save and close the file.</para>
				</step>
			</procedure>
		</section>
		<section id="v15490724" revision="09232024132044" vendor="referenced">
			<title id="v15490725">About false restore failures reported in the Activity monitor</title>
			<para id="v15490726">In some restore scenarios, DB2 reports a successful restore status, but the NetBackup activity monitor reports failures. This situation can occur during restores if DB2 reads a portion of a backup image but not the entire image.</para>
		</section>
		<section id="v15490727" revision="09232024132044" vendor="referenced">
			<title id="v15490728">About the error message codes</title>
			<para id="v15490732">The following table describes the DB2 and &nbuProductName; reason codes. For more information about an error message, see the log files. </para>
			<para id="v15490729">Errors can occur in the &nbuProductName; shared library (UNIX) or DLL (Windows) if these are accessed during the processing of a DB2 database utility <command moreinfo="none">BACKUP</command> or <command moreinfo="none">RESTORE</command>.</para>
			<table id="v55367881">
				<title id="v55367882">DB2 and &nbuProductName; error codes</title>
				<tgroup cols="2" id="v55367883">
					<colspec align="center" colname="col1" colnum="1" colwidth="0.9in"/>
					<colspec colname="col2" colnum="2" colwidth="*"/>
					<thead id="v55367886">
						<row id="v55367887">
							<entry colname="col1">
								<para>Error code</para>
							</entry>
							<entry colname="col2">
								<para>Description</para>
							</entry>
						</row>
					</thead>
					<tbody id="v55367888">
						<row id="v55367889">
							<entry colname="col1">
								<para> 300</para>
							</entry>
							<entry colname="col2">
								<para id="v15490753">Message: ERR - No match for a database image file was found based on the following criteria. </para>
								<para id="v15490755">Cause: The restore criteria of database name, instance, type, and backup time object cannot be found in the &nbuProductName; database.</para>
								<para id="v15490757">Action: Use <command moreinfo="none">bplist</command> to make sure that the image you want to restore exists. Make sure that the correct instance is used.</para>
								<para id="v15490760">Make sure that the correct values are set in <command moreinfo="none">db2.conf</command>. Also, on UNIX check the values in <command moreinfo="none">bp.conf</command>.</para>
								<para id="v15490761">If logging is enabled, check the current log file in the following directory for more information:</para>
								<para id="v54479050">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\logs\bpdb2\</command>
								</para>
								<para id="v54479049">UNIX: <command>/usr/openv/&ProductName;/logs/bpdb2</command>
								</para>
							</entry>
						</row>
						<row id="v55367890">
							<entry colname="col1">
								<para>305</para>
							</entry>
							<entry colname="col2">
								<para id="v15490766">Message: ERR - found more than one object.</para>
								<para id="v15490768">Cause: Multiple DB2 backup images were found in the &nbuProductName; database that matched the restore criteria of database name, instance, type, and backup time.</para>
								<para id="v15490770">Action: This error should not occur under typical operations. If logging is enabled, check the current log file in the following directory for more information:</para>
								<para id="v54479052">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\logs\bpdb2\</command>
								</para>
								<para id="v54479051">UNIX: <command>/usr/openv/&ProductName;/logs/bpdb2</command>
								</para>
							</entry>
						</row>
						<row id="v55367891">
							<entry colname="col1">
								<para>310</para>
							</entry>
							<entry colname="col2">
								<para id="v15490776">Message: ERR - bp.config failed with <replaceable>status</replaceable> status.</para>
								<para id="v15490778">Cause:</para>
								<para id="v15490780">Windows: Unable to read configuration file.</para>
								<para>UNIX: Unable to read configuration file <command moreinfo="none">/usr/openv/&ProductName;/bp.conf</command>
								</para>
								<para id="v15490781">Action: Make sure that the file exists and is properly configured.</para>
								<para id="v15490783">If logging is enabled, check the current log file in the following directory for more information:</para>
								<para id="v54479054">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\logs\bpdb2\</command>
								</para>
								<para id="v54479053">UNIX: <command>/usr/openv/&ProductName;/logs/bpdb2</command>
								</para>
							</entry>
						</row>
						<row id="v55367892">
							<entry colname="col1">
								<para>330</para>
							</entry>
							<entry colname="col2">
								<para id="v15490788">Message: ERR - Invalid options encountered for action <replaceable>action</replaceable>.</para>
								<para id="v15490790">Cause: Invalid option(s) encountered for <replaceable>action</replaceable>.</para>
								<para id="v15490792">Action: Make sure that the action parameters are used properly.</para>
							</entry>
						</row>
						<row id="v55367893">
							<entry colname="col1">
								<para>335</para>
							</entry>
							<entry colname="col2">
								<para id="v15490796">Message: ERR - in get DB2 UDB level.</para>
								<para id="v15490798">Cause: &nbuProductName; server and the &nbuProductName; for DB2 shared library (UNIX) DB2 DLL (Windows) or are not at the same level.</para>
								<para id="v15490801">Action: Make sure that the &nbuProductName; and the &nbuProductName; for DB2 shared library (UNIX) or the DB2 DLL (Windows) are at the same level. Check the log file in the following directory:</para>
								<para id="v54479056">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\logs\</command>
								</para>
								<para id="v54479055">UNIX: <command>/usr/openv/&ProductName;/logs/bpdb2</command>
								</para>
								<para id="v15490807">Check the version number of the shared library and the version number for &nbuProductName;. If they are not the same, install the same level.</para>
							</entry>
						</row>
						<row id="v55367894">
							<entry colname="col1">
								<para>380</para>
							</entry>
							<entry colname="col2">
								<para id="v15490810">Message: ERR - <filename>db2.conf</filename> read status error <replaceable>error</replaceable>.</para>
								<para id="v15490812">Cause: <command moreinfo="none">db2.conf</command> read status error.</para>
								<para id="v15490814">Action: Make sure that the directory is accessible with read and write permissions. Make sure that the file exists and has read permission.</para>
							</entry>
						</row>
						<row id="v55367895">
							<entry colname="col1">
								<para>385</para>
							</entry>
							<entry colname="col2">
								<para id="v15490818">Message: ERR - Found multiple &lt;DATABASE&gt; entries before an &lt;ENDOPER&gt; entry was encountered.</para>
								<para id="v15490820">Cause: Found multiple <command moreinfo="none">DATABASE</command> entries before an <command moreinfo="none">ENDOPER</command> entry was encountered in the following file:</para>
								<para id="v54479058">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\dbext\db2.conf</command>
								</para>
								<para id="v54479057">UNIX: <command>$HOME/db2.conf</command>
								</para>
								<para id="v15490824">Action: Remove the extra <command moreinfo="none">DATABASE</command> entry.</para>
							</entry>
						</row>
						<row id="v55367896">
							<entry colname="col1">
								<para>390</para>
							</entry>
							<entry colname="col2">
								<para id="v15490828">Message: ERR - Found multiple &lt;OBJECTTYPE&gt; entries before an ENDOPER entry was encountered. </para>
								<para id="v15490830">Cause: Found multiple <command moreinfo="none">OBJECTTYPE</command> entries before an <command moreinfo="none">ENDOPER</command> entry was encountered in the following file:</para>
								<para id="v54479060">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\dbext\db2.conf</command>
								</para>
								<para id="v54479059">UNIX: <command>$HOME/db2.conf</command>
								</para>
								<para id="v15490834">Action: Remove the extra <command moreinfo="none">OBJECTTYPE</command> entry.</para>
							</entry>
						</row>
						<row id="v55367897">
							<entry colname="col1">
								<para>395</para>
							</entry>
							<entry colname="col2">
								<para id="v15490838">Message: ERR - Found multiple &lt;POLICY&gt; entries before an &lt;ENDOPER&gt; entries was encountered. </para>
								<para id="v15490840">Cause: Found multiple <command moreinfo="none">POLICY</command> entries before an <command moreinfo="none">ENDOPER</command> entry was encountered in the following file:</para>
								<para id="v54479062">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\dbext\db2.conf</command>
								</para>
								<para id="v54479061">UNIX: <command>$HOME/db2.conf</command>
								</para>
								<para id="v15490844">Action: Remove the extra <command moreinfo="none">POLICY</command> entry.</para>
							</entry>
						</row>
						<row id="v55367898">
							<entry colname="col1">
								<para>400</para>
							</entry>
							<entry colname="col2">
								<para id="v15490848">Message: ERR - Found multiple &lt;SCHEDULE&gt; entries before an &lt;ENDOPER&gt; entries was encountered. </para>
								<para id="v15490850">Cause: Found multiple <command moreinfo="none">SCHEDULE</command> entries before an <command moreinfo="none">ENDOPER</command> entry was encountered in the following file:</para>
								<para id="v54479064">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\dbext\db2.conf</command>
								</para>
								<para id="v54479063">UNIX: <command>$HOME/db2.conf</command>
								</para>
								<para id="v15490854">Action: Remove the extra <command moreinfo="none">SCHEDULE</command> entry.</para>
							</entry>
						</row>
						<row id="v55367899">
							<entry colname="col1">
								<para>405</para>
							</entry>
							<entry colname="col2">
								<para id="v15490858">Message: ERR - Found multiple &lt;ARCFUNC&gt; entries before an &lt;ENDOPER&gt; entries was encountered. </para>
								<para id="v15490860">Cause: Found multiple <command moreinfo="none">ARCFUNC</command> entries before an <command moreinfo="none">ENDOPER</command> entry was encountered in the following file:</para>
								<para id="v54479066">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\dbext\db2.conf</command>
								</para>
								<para id="v54479065">UNIX: <command>$HOME/db2.conf</command>
								</para>
								<para id="v15490864">Action: Remove the extra <command moreinfo="none">ARCFUNC</command> entry.</para>
							</entry>
						</row>
						<row id="v55367900">
							<entry colname="col1">
								<para>410</para>
							</entry>
							<entry colname="col2">
								<para id="v15490868">Message: ERR - Found multiple &lt;ARCDIR&gt; entries before an &lt;ENDOPER&gt; entries was encountered. </para>
								<para id="v15490870">Cause: Found multiple <command moreinfo="none">ARCDIR</command> entries before an <command moreinfo="none">ENDOPER</command> entry was encountered in the following file:</para>
								<para id="v54479068">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\dbext\db2.conf</command>
								</para>
								<para id="v54479067">UNIX: <command>$HOME/db2.conf</command>
								</para>
								<para id="v15490874">Action: Remove the extra <command moreinfo="none">ARCDIR</command> entry.</para>
							</entry>
						</row>
						<row id="v55367901">
							<entry colname="col1">
								<para>415</para>
							</entry>
							<entry colname="col2">
								<para id="v15490878">Message: ERR - Found multiple &lt;RETDIR&gt; entries before an &lt;ENDOPER&gt; entries was encountered. </para>
								<para id="v15490880">Cause: Found multiple <command moreinfo="none">RETDIR</command> entries before an <command moreinfo="none">ENDOPER</command> entry was encountered in the following file:</para>
								<para id="v54479070">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\dbext\db2.conf</command>
								</para>
								<para id="v54479069">UNIX: <command>$HOME/db2.conf</command>
								</para>
								<para id="v15490884">Action: Remove the extra <command moreinfo="none">RETDIR</command> entry.</para>
							</entry>
						</row>
						<row id="v55367902">
							<entry colname="col1">
								<para>420</para>
							</entry>
							<entry colname="col2">
								<para id="v15490888">Message: ERR - need to specify a valid POLICY or SCHEDULE in <filename>db2.conf</filename> for &lt;DATABASE <replaceable>database</replaceable>&gt; and &lt;OBJECTTYPE <replaceable>objecttype</replaceable>&gt;. </para>
								<para id="v15490890">Cause: Policy name or schedule name is not specified in the <command moreinfo="none">POLICY</command> or <command moreinfo="none">SCHEDULE</command> entry in the following file:</para>
								<para id="v54479072">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\dbext\db2.conf</command>
								</para>
								<para id="v54479071">UNIX: <command>$HOME/db2.conf</command>
								</para>
								<para id="v15490894">Action: Add an appropriate policy name or schedule name to the <command moreinfo="none">POLICY</command> or <command moreinfo="none">SCHEDULE</command> entry.</para>
							</entry>
						</row>
						<row id="v55367903">
							<entry colname="col1">
								<para>425</para>
							</entry>
							<entry colname="col2">
								<para id="v15490898">Message: ERR - need to specify a valid ARCDIR in <filename>db2.conf</filename>: Errno =<replaceable>error_no</replaceable> : <replaceable>string</replaceable>.</para>
								<para id="v15490900">Cause: Invalid <command moreinfo="none">ARCDIR</command> is specified in <command moreinfo="none">db2.conf</command>.</para>
								<para id="v15490902">Action: Add an appropriate directory name to the <command moreinfo="none">ARCDIR</command> entry.</para>
							</entry>
						</row>
						<row id="v55367904">
							<entry colname="col1">
								<para>430</para>
							</entry>
							<entry colname="col2">
								<para id="v15490906">Message: ERR - ARCDIR field needs to be specified in the <filename>db2.conf</filename> file. </para>
								<para id="v15490908">Cause: No <command moreinfo="none">ARCDIR</command> entry is found in the following file:</para>
								<para id="v54479074">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\dbext\db2.conf</command>
								</para>
								<para id="v54479073">UNIX: <command>$HOME/db2.conf</command>
								</para>
								<para id="v15490912">Action: Add an <command moreinfo="none">ARCDIR</command> field with an appropriate directory name to the following file:</para>
							</entry>
						</row>
						<row id="v55367905">
							<entry colname="col1">
								<para>435</para>
							</entry>
							<entry colname="col2">
								<para id="v15490918">Message: ERR - RETDIR field needs to contain a valid file when OBJECTTYPE is equal to ARCHIVE: <replaceable>string</replaceable>. </para>
								<para id="v15490920">Cause: <command moreinfo="none">RETDIR</command> field does not contain a valid file.</para>
								<para id="v15490922">Action: <command moreinfo="none">RETDIR</command> field must contain a valid file when <command moreinfo="none">OBJECTTYPE ARCHIVE</command> is specified in the following file:</para>
								<para id="v54479076">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\dbext\db2.conf</command>
								</para>
								<para id="v54479075">UNIX: <command>$HOME/db2.conf</command>
								</para>
							</entry>
						</row>
						<row id="v55367906">
							<entry colname="col1">
								<para>440</para>
							</entry>
							<entry colname="col2">
								<para id="v15490928">Message: ERR - COPY or SAVE needs to be specified for ARCFUNC when OBJECTTYPE is equal to ARCHIVE. </para>
								<para id="v15490930">Cause: Found <command moreinfo="none">OBJECTTYPE ARCHIVE</command> but no <command moreinfo="none">ARCFUNC</command> in the <command moreinfo="none">db2.conf</command> file.</para>
								<para id="v15490932">Action: Specify a copy or save parameter for <command moreinfo="none">ARCFUNC</command> if <command moreinfo="none">OBJECTTYPE ARCHIVE</command> is also specified.</para>
							</entry>
						</row>
						<row id="v55367907">
							<entry colname="col1">
								<para>445</para>
							</entry>
							<entry colname="col2">
								<para id="v15490936">Message: ERR - Invalid &lt;OBJECTTYPE&gt; entries: <replaceable>entry</replaceable>.</para>
								<para id="v15490938">Cause: Invalid <command moreinfo="none">OBJECTTYPE</command> entry in the following file:</para>
								<para id="v54479078">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\dbext\db2.conf</command>
								</para>
								<para id="v54479077">UNIX: <command>$HOME/db2.conf</command>
								</para>
								<para id="v15490942">Action: Add the appropriate object type.</para>
							</entry>
						</row>
						<row id="v55367908">
							<entry colname="col1">
								<para>450</para>
							</entry>
							<entry colname="col2">
								<para id="v15490948">Message: ERR - OBJECTTYPE entry needs to be specified.</para>
								<para id="v15490950">Cause: <command moreinfo="none">OBJECTTYPE</command> entry is not specified in the following file:</para>
								<para id="v54479080">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\dbext\db2.conf</command>
								</para>
								<para id="v54479079">UNIX: <command>$HOME/db2.conf</command>
								</para>
								<para id="v15490954">Action: Add the appropriate object type.</para>
							</entry>
						</row>
						<row id="v55367909">
							<entry colname="col1">
								<para>455</para>
							</entry>
							<entry colname="col2">
								<para id="v15490960">Message: ERR - POLICY entry needs to be specified.</para>
								<para id="v15490962">Cause: <command moreinfo="none">POLICY</command> entry is not specified in the following file:</para>
								<para id="v54479082">Windows: <command>
										<replaceable>install_path</replaceable>\&ProductName;\dbext\db2.conf</command>
								</para>
								<para id="v54479081">UNIX: <command>$HOME/db2.conf</command>
								</para>
								<para id="v15490966">Action: Add the appropriate policy name.</para>
							</entry>
						</row>
						<row id="v55367910">
							<entry colname="col1">
								<para>502</para>
							</entry>
							<entry colname="col2">
								<para id="v15490972">Message: &nbuProductName; DB2 Handle Invalid</para>
								<para id="v15490974">Cause: Internal communication between DB2 and &nbuProductName; failed.</para>
							</entry>
						</row>
						<row id="v55367911">
							<entry colname="col1">
								<para>505</para>
							</entry>
							<entry colname="col2">
								<para id="v15490979">Message: The input parameters supplied by DB2 are not valid.</para>
								<para id="v15490981">Cause: This error can occur when you use an unsupported version of DB2.</para>
							</entry>
						</row>
						<row id="v55367912">
							<entry colname="col1">
								<para>507</para>
							</entry>
							<entry colname="col2">
								<para id="v15490986">Message: &nbuProductName; Initialize Failed</para>
								<para id="v15490988">Cause: &nbuProductName; encountered errors in preparing for the requested operation. This error can result from improper configuration.</para>
							</entry>
						</row>
						<row id="v55367913">
							<entry colname="col1">
								<para>510</para>
							</entry>
							<entry colname="col2">
								<para id="v15490993">Message: &nbuProductName; Read Config Failed</para>
								<para id="v15490995">Cause: &nbuProductName; encountered errors in reading configuration settings.</para>
								<para id="v15490997">Action: Check that the &nbuProductName; client and server settings are configured. Also verify that the <command moreinfo="none">db2.conf</command> file exists and that it is configured.</para>
							</entry>
						</row>
						<row id="v55367914">
							<entry colname="col1">
								<para>511</para>
							</entry>
							<entry colname="col2">
								<para id="v15491001">Message: &nbuProductName; Write Config Failed</para>
								<para id="v15491003">Cause: &nbuProductName; encountered errors in preparing for the requested operation. This error can result from improper configuration.</para>
							</entry>
						</row>
						<row id="v55367915">
							<entry colname="col1">
								<para>513</para>
							</entry>
							<entry colname="col2">
								<para id="v15491008">Message: &nbuProductName; Begin Action Failed</para>
								<para id="v15491010">Cause: &nbuProductName; encountered errors attempting to start the requested operation. This error can indicate a problem in obtaining necessary resources.</para>
							</entry>
						</row>
						<row id="v55367916">
							<entry colname="col1">
								<para>514</para>
							</entry>
							<entry colname="col2">
								<para id="v15491015">Message: &nbuProductName; Create Image Failed</para>
								<para id="v15491017">Cause: &nbuProductName; encountered errors attempting to create a backup image.</para>
							</entry>
						</row>
						<row id="v55367917">
							<entry colname="col1">
								<para>515</para>
							</entry>
							<entry colname="col2">
								<para id="v15491022">Message: &nbuProductName; Get Image Failed</para>
								<para id="v15491024">Cause: &nbuProductName; encountered errors attempting to access a backup image.</para>
							</entry>
						</row>
						<row id="v55367918">
							<entry colname="col1">
								<para>516</para>
							</entry>
							<entry colname="col2">
								<para id="v15491029">Message: &nbuProductName; Find Image Failed</para>
								<para id="v15491031">Cause: &nbuProductName; encountered errors attempting to locate a backup image.</para>
							</entry>
						</row>
						<row id="v55367919">
							<entry colname="col1">
								<para>518</para>
							</entry>
							<entry colname="col2">
								<para id="v15491036">Message: &nbuProductName; Write Failed</para>
								<para id="v15491038">Cause: &nbuProductName; encountered errors writing a backup image.</para>
							</entry>
						</row>
						<row id="v55367920">
							<entry colname="col1">
								<para>520</para>
							</entry>
							<entry colname="col2">
								<para id="v15491043">Message: &nbuProductName; Read Failed</para>
								<para id="v15491045">Cause: &nbuProductName; encountered errors reading a backup image.</para>
							</entry>
						</row>
						<row id="v55367921">
							<entry colname="col1">
								<para>523</para>
							</entry>
							<entry colname="col2">
								<para id="v15491050">Message: &nbuProductName; Commit Data Failed</para>
								<para id="v15491052">Cause: &nbuProductName; encountered errors attempting to close the backup image.</para>
							</entry>
						</row>
						<row id="v55367922">
							<entry colname="col1">
								<para>524</para>
							</entry>
							<entry colname="col2">
								<para id="v15491057">Message: &nbuProductName; Commit Action Failed</para>
								<para id="v15491059">Cause: &nbuProductName; encountered errors attempting to complete the requested operation.</para>
							</entry>
						</row>
						<row id="v55367923">
							<entry colname="col1">
								<para>526</para>
							</entry>
							<entry colname="col2">
								<para id="v15491064">Message: &nbuProductName; Abort Action Failed</para>
								<para id="v15491066">Cause: &nbuProductName; encountered errors attempting to abort the previously requested operation.</para>
							</entry>
						</row>
						<row id="v55367924">
							<entry colname="col1">
								<para>528</para>
							</entry>
							<entry colname="col2">
								<para id="v15491071">Message: &nbuProductName; Delete Image Failed</para>
								<para id="v15491073">Cause: &nbuProductName; encountered errors attempting to expire an incomplete backup image. This error typically indicates that the previous operation has failed, and DB2 tried to delete any incomplete images.</para>
								<note>
									<para>Starting with &nbuProductName; 8.3, database delete requests are accepted and processed. Before &nbuProductName; 8.3, database delete requests were treated as invalid requests and were not processed. When &nbuProductName; receives a delete image request, it searches the &nbuProductName; catalog. If the image is found and it is not on a legal hold, the image is removed from the &nbuProductName; catalog.</para>
								</note>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>
		</section>
	</chapter>
	<appendix id="v31720435">
		<title id="v15491240">Configuration for a &db; EEE (DPF) environment</title>
		<section id="id-SF0A0150467" revision="09232024132828">
			<title id="v15491242">Overview of installation and configuration for a DB2 EEE (DPF) environment</title>
			<para id="v15491243">The IBM DB2 Enterprise Extended Edition (EEE) environment is a database that is distributed across multiple hosts or partitions. In a non-EEE environment, the database is typically centralized on a single host. The Database Partitioning Feature (DPF) is equivalent to the EEE.</para>
			<para id="v15491244">All instructions that refer to an EEE environment are also applicable for a DPF environment.</para>
			<para id="v15491247">In a DB2 EEE (DPF) environment, install the NetBackup client on every client using DB2.</para>
			<para id="v55246391">
				<xref xreflabel="Configuring NetBackup for DB2 in an EEE environment" linkend="v15491248" role="linkmoreinfo"/>
			</para>
			<para id="v55246393">
				<xref xreflabel="Adding NetBackup policies for DB2 EEE environment" linkend="v15491289" role="linkmoreinfo"/>
			</para>
			<para id="v55246395">
				<xref xreflabel="Backing up the archive logs that are in a DB2 EEE environment" linkend="v24410043" role="linkmoreinfo"/>
			</para>
			<para id="v55246397">
				<xref xreflabel="Creating DB2 scripts for a DB2 EEE environment" linkend="v24088949" role="linkmoreinfo"/>
			</para>
		</section>
		<section id="v15491248" revision="09232024132828">
			<title id="v15491249">Configuring NetBackup for DB2 in an EEE environment</title>
			<para id="v15491250">The configuration process for NetBackup for DB2 in a DB2 EEE environment is the same as the configuration process in a DB2 non-EEE environment. However one exception for this configuration process is the procedure for adding a backup policy.</para>
			<itemizedlist id="v24088900">
				<listitem id="v24088901">
					<para id="v24088902">Set the <guimenuitem>Maximum jobs per client</guimenuitem> property.</para>
					<para id="v24088903">The instructions for setting this property for DB2 EEE are the same as those for DB2.</para>
					<para id="v24088904">
						<xref xreflabel="Configuring the Maximum jobs per client" linkend="v14758648" role="linkseeheading"/>
					</para>
				</listitem>
				<listitem id="v24088905">
					<para id="v24088906">Add NetBackup policies for the DB2 EEE environment.</para>
					<para id="v24088907">The instructions for adding policies to NetBackup are different for DB2 EEE.</para>
					<para id="v24088908">
						<xref xreflabel="Adding NetBackup policies for DB2 EEE environment" linkend="v15491289" role="linkseeheading"/>
					</para>
				</listitem>
				<listitem id="v24088909">
					<para id="v24088910">Create DB2 scripts for the DB2 EEE environment.</para>
					<para id="v24088911">The instructions for creating scripts for DB2 EEE are the same as those for DB2.</para>
					<para id="v24121472">
						<xref xreflabel="About &ProductName; for DB2 shell scripts" linkend="v15491534" role="linkseeheading"/>
					</para>
				</listitem>
				<listitem id="v31197555">
					<para id="v31197556">
						<xref xreflabel="Creating DB2 scripts for a DB2 EEE environment" linkend="v24088949" role="linkseeheading"/>
					</para>
				</listitem>
				<listitem id="v24088914">
					<para id="v24088915">Create a <filename>
							<replaceable>$DB2_Instance_Home</replaceable>/db2.conf</filename> file.</para>
					<para id="v24088916">The instructions for configuring the <filename>db2.conf</filename> files for DB2 EEE are the same as those for DB2.</para>
					<para id="v24088917">
						<xref xreflabel="Configuring the run-time environment" linkend="id-SF0A0196418" role="linkseeheading"/>
					</para>
				</listitem>
				<listitem id="v24088918">
					<para id="v24088919">Test NetBackup for DB2 EEE configuration settings.</para>
					<para id="v24088920">The instructions for testing DB2 EEE configuration settings are the same as those for DB2.</para>
				</listitem>
			</itemizedlist>
		</section>
		<section id="v15491289" revision="09232024132705">
			<title id="v24088922">Adding NetBackup policies for DB2 EEE environment</title>
			<para id="v24088925">The following policies must be configured for a DB2 EEE environment:</para>
			<itemizedlist id="v24088926">
				<listitem id="v24088932">
					<para id="v24088933">A DB2 type policy with an Application Backup schedule type.</para>
					<itemizedlist id="v24499973">
						<listitem id="v24499974">
							<para id="v24088934">Include only one Application Backup schedule type. Delete the schedule that is called Default-Application-Backup.</para>
							<para id="v24499976">For complete instructions on how to create this type of schedule, see the following:</para>
							<para id="v24410041">
								<xref xreflabel="Configure an application backup schedule" linkend="id-SF930186919" role="linkseeheading"/>
							</para>
						</listitem>
						<listitem id="v24499979">
							<para id="v24499980">In the client list, include all clients you want to back up, including the DB2 catalog node.</para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem id="v24088927">
					<para id="v24088928">A DB2 policy with an Automatic backup schedule.</para>
					<itemizedlist id="v24499981">
						<listitem id="v24499982">
							<para id="v24499983"> Include one of the following schedule types: Automatic full backup, Automatic differential incremental backup, or Automatic cumulative incremental backup. This policy should contain only one automatic backup schedule type. </para>
							<para id="v24499984">For complete instructions on how to create this type of schedule, see the following:</para>
							<para id="v24499985">
								<xref xreflabel="Configure automatic backup schedules" linkend="id-SF930115156" role="linkseeheading"/>
							</para>
						</listitem>
						<listitem id="v24088943">
							<para id="v24088944">Do not specify the automatic backup schedule name in the <filename>
									<replaceable>$DB2_Instance_Home</replaceable>/db2.conf file</filename>. For a proxy backup, do include the automatic backup schedule name.</para>
						</listitem>
						<listitem id="v24499989">
							<para id="v24088930">Include only the clients that contain the DB2 catalog node and that run a DB2 script. The script uses the IBM <command>db2_all</command> command to archive the DB2 catalog nodes before any other node is backed up.</para>
						</listitem>
					</itemizedlist>
				</listitem>
				<listitem id="v24088936">
					<para id="v24088937">Create a Standard type policy with a User Backup type schedule if the following apply: </para>
					<itemizedlist id="v24499991">
						<listitem id="v24499992">
							<para id="v24499993">The user exit program for logging is turned on in DB2 UDB.</para>
						</listitem>
						<listitem id="v24499994">
							<para id="v24499995">The client is a UNIX machine.</para>
						</listitem>
					</itemizedlist>
					<para id="v24499996">
						<xref xreflabel="About backing up archive log files with the user exit program" linkend="v15490528" role="linkseeheading"/>
					</para>
				</listitem>
				<listitem id="v24499998">
					<para id="v24499999">If you use the VENDOR method, see the following:</para>
					<para id="v24500000">
						<xref xreflabel="Creating a db2.conf file (vendor method)" linkend="v15491397" role="linkseeheading"/>
					</para>
				</listitem>
			</itemizedlist>
		</section>
		<section id="v24410043" revision="09232024132705">
			<title id="v24410044">Backing up the archive logs that are in a DB2 EEE environment</title>
			<para id="v24088924">The policy you use to back up the archive logs depends on the method you use for log archiving. If you use the user exit program, create a <guimenuitem>Standard</guimenuitem> policy. If you use the VENDOR method, you can use the DB2 Application Backup schedule.</para>
		</section>
		<section id="v24088949" revision="09232024132705">
			<title id="v15491290">Creating DB2 scripts for a DB2 EEE environment</title>
			<para id="v15491291">Scripts operate on a single &ProductName; client. If your EEE/DPF environment spans multiple computers, create at least one script for each computer.</para>
			<para id="v15491292">For example, assume your database spans two hosts, and the host <command moreinfo="none">H1</command> contains partition <command moreinfo="none">P1</command>, and the host <command moreinfo="none">H2</command> contains partitions <command moreinfo="none">P2</command> and <command moreinfo="none">P3</command>.</para>
			<itemizedlist id="v15491293">
				<title id="v15491294">You need at least two scripts, as follows:</title>
				<listitem id="v15491295">
					<para id="v15491296">One script for partition <command moreinfo="none">P1</command> on host <command moreinfo="none">H1</command>
					</para>
				</listitem>
				<listitem id="v15491297">
					<para id="v15491298">One script for partitions <command moreinfo="none">P2</command> and <command moreinfo="none">P3</command> on host <command moreinfo="none">H2</command>.</para>
				</listitem>
			</itemizedlist>
			<note id="v24238140">
				<para id="v15491300">The successful backup and restore of the catalog partition is the user's responsibility. Generally, it is recommended that the catalog partition is the first node backed up and the first partition restored. For more information, see your DB2 documentation.</para>
			</note>
			<para id="v15491306">Roll-forward recovery to a point-in-time (PIT) is not supported. DB2 requires that PIT recovery runs the same operation for all partitions and tablespaces on all computers.</para>
		</section>
	</appendix>
	<appendix id="v31723260">
		<title id="v15492445">Using NetBackup for DB2 with SAP&#xAE;</title>
		<section id="v15492446" revision="09232024133251">
			<title id="v15492447">About &nbuProductName; for DB2 with SAP</title>
			<para id="v15492448">When SAP software uses a DB2 database, &nbuProductName; for DB2 can be used within that environment for backup and restore of SAP data. Follow the recommended installation, backup, and restore guidelines to ensure that SAP, DB2, and &nbuProductName; work together.</para>
		</section>
		<section id="v15492449" revision="09232024133251">
			<title id="v15492450">Installation of the DB2 user exit program</title>
			<para id="v15492451">DB2 allows for the presence of a single user exit program to manage archiving of database log files. Both SAP and &nbuProductName; deliver user exit programs for exclusive use by DB2. The user exit program resides in the DB2 database directory as <command moreinfo="none">db2uext2</command>.</para>
			<para id="v15492452">The use of the &nbuProductName; user exit program is required because it automatically archives log files to a storage unit. It also enables on-demand recovery of log files by DB2.</para>
			<para id="v15492453">Take precautions when installing SAP to prevent overwriting the &nbuProductName; user exit program. Always preserve the &nbuProductName; <command moreinfo="none">db2uext2</command> file before installing SAP and restore afterwards.</para>
		</section>
		<section id="v15492454" revision="09232024133251">
			<title id="v15492455">Backup and restore of DB2 databases used by SAP</title>
			<para id="v15492456">Follow the standard &nbuProductName; instructions in this document for backup and restore of the DB2 databases that SAP uses. You can use either DB2 or &nbuProductName; to initiate database backups and restores.</para>
			<note id="v15492457">
				<para id="v15492458">Do not use <command moreinfo="none">SAP CCMS</command>, <command moreinfo="none">sapdba</command>, <command moreinfo="none">brbackup</command>, or <command moreinfo="none">brrestore</command> commands to initiate backups or restores. They do not invoke &nbuProductName;.</para>
			</note>
			<note id="v15492459">
				<para id="v15492460">SAP must not be running when you attempt to restore the database.</para>
			</note>
		</section>
		<section id="v15492461" revision="09232024133251">
			<title id="v15492462">Archive and restore of DB2 log files used by SAP</title>
			<para id="v15492463">Follow the standard &nbuProductName; instructions in this document for configuring the user exit program. DB2 automatically invokes the user exit program to archive and recover the necessary log files.</para>
			<note id="v15492464">
				<para id="v15492465">Do not use <command moreinfo="none">SAP CCMS</command>, <command moreinfo="none">sapdba</command>, <command moreinfo="none">brarchive</command> commands, or the SAP Logfile Management window in the DB2 Control Center for log file archival. They depend on the SAP user exit program for proper operation.</para>
			</note>
		</section>
		<section id="v15492466" revision="09232024133251">
			<title id="v15492467">Backup of SAP files</title>
			<para id="v15492468">Be certain to include any and all SAP files when planning for SAP recovery, not only the DB2 database. For instance, if you use standard &nbuProductName; file backup procedures you can backup any regular files that SAP uses.</para>
			<para id="v15492469">For file backup instructions, see the &nbuProductName; Backup, Archive, and Restore help.</para>
		</section>
	</appendix>
	<appendix id="v125233963">
		<title id="v125233964">Register authorized locations</title>
		<section id="v125208570" revision="07052024092530">
			<title id="v125208571">Registering authorized locations used by a &ProductName; database script-based policy</title>
			<para id="v125210390">During a backup, &ProductName; checks for scripts in the default script location and any authorized locations. The default, authorized script location for UNIX is <filename>usr/openv/netbackup/ext/db_ext</filename> and for Windows is <filename>install_path\netbackup\dbext</filename>. If the script is not in the default script location or an authorized location, the policy job fails. You can move any script into the default script location or any additional authorized location and &ProductName; recognizes the scripts. You need to update the policy with the script location if it has changed. An authorized location can be a directory and &ProductName; recognizes any script within that directory. An authorized location can also be a full path to a script if an entire directory does need to be authorized.</para>
			<para id="v125208580">If the default script location does not work for your environment, use the following procedure to enter one or more authorized locations for your scripts. Use <command>nbsetconfig</command> to enter an authorized location where the scripts reside. You can also use <command>bpsetconfig</command>, however this command is only available on the primary or the media server.</para>
			<note id="v125208581">
				<para id="v125210395">One recommendation is that scripts should not be world-writable. &ProductName; does not allow scripts to run from network or remote locations. All scripts must be stored and run locally. Any script that is created and saved in the &ProductName; <filename>db_ext</filename> (UNIX) or <filename>dbext</filename> (Windows) location needs to be protected during a &ProductName; uninstall.</para>
				<para id="v125212163">For more information about registering authorized locations and scripts, review the knowledge base article:</para>
				<para id="v125212166" condition="print;dbagent">
					<ulink url="https://www.veritas.com/content/support/en_US/article.100039639">https://www.veritas.com/content/support/en_US/article.100039639</ulink>
				</para>
			</note>
			<procedure id="v125208583">
				<title id="v125208584">To add an authorized location</title>
				<step id="v125208585">
					<para id="v125208586"> Open a command prompt on the client.</para>
				</step>
				<step id="v125208587">
					<para id="v125208588"> Use <command>nbsetconfig</command> to enter values for an authorized location. The client privileged user must run these commands.</para>
					<itemizedlist id="v125208589">
						<title id="v125247404">The following examples are for paths you may configure for the Oracle agent. Use the path that is appropriate for your agent.</title>
						<listitem id="v125208590">
							<para id="v125208591">On UNIX:</para>
							<programlisting id="v125208592">[root@client26 bin]# ./nbsetconfig
nbsetconfig&gt;DB_SCRIPT_PATH = /Oracle/scripts
nbsetconfig&gt;DB_SCRIPT_PATH = /db/Oracle/scripts/full_backup.sh
nbsetconfig&gt;
&lt;ctrl-D&gt;</programlisting>
						</listitem>
						<listitem id="v125208593">
							<para id="v125208594">On Windows:</para>
							<programlisting id="v125208595">C:\Program Files\Veritas\NetBackup\bin&gt;nbsetconfig
nbsetconfig&gt; DB_SCRIPT_PATH=c:\db_scripts
nbsetconfig&gt; DB_SCRIPT_PATH=e:\oracle\fullbackup\full_rman.sh
nbsetconfig&gt;
&lt;ctrl-Z&gt;
</programlisting>
						</listitem>
					</itemizedlist>
					<note id="v125208596">
						<para id="v125208597">Review the <ulink url="https://www.veritas.com/support/en_US/article.DOC5332">&ProductName; Command Reference Guide</ulink> for options, such as reading from a text file and remotely setting clients from a &ProductName; server using <command>bpsetconfig</command>. If you have a text file with the script location or authorized locations listed, <command>nbsetconfig</command> or <command>bpsetconfig</command> can read from that text file. An entry of <command>DB_SCRIPT_PATH=none</command> does not allow any script to run on a client. The <command>none</command> entry is useful if an administrator wants to completely lock down a server from running scripts.</para>
					</note>
				</step>
				<step id="v125208598">
					<para id="v125208599">(Conditional) Perform these steps on any clustered database or agent node that can perform the backup. </para>
				</step>
				<step id="v125210762">
					<para id="v125210763">(Conditional) Update any policy if the script location was changed to the default or authorized location.</para>
				</step>
			</procedure>
		</section>
	</appendix>
</book>